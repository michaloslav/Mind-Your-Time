(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{293:function(e,t,a){"use strict";a.r(t);var r=a(25),n=a(62),s=a(63),i=a(80),o=a(78),l=a(79),u=a(1),c=a.n(u),m=a(275),d=a.n(m),p=a(791),h=a.n(p),b=a(800),g=a.n(b),T=a(870),f=a(108);a(879);function v(e,t,a){e.datasets[0].backgroundColor.push(t.color),e.datasets[0].data.push(a),e.labels.push(t.name),t.estimatedDuration&&(e.datasets[1].backgroundColor.push(t.color),e.datasets[1].data.push(t.estimatedDuration))}var E=function(e){var t,a=e.settings,n=a.timeFormat24H,s=a.roundTo,i=a.bufferTimePercentage,o=f.a.round(f.a.add(e.currentTime,e.stats.timeNeeded),s),l=f.a.isBiggerThan(e.endTime,o,!1,!0);t=l?f.a.round(f.a.subtract(e.endTime,o,!0),s):f.a.round(f.a.subtract(o,e.endTime,!0),s);var u,m=0,p=0,b=0,E={datasets:[{label:"Actual",backgroundColor:[],data:[]},{label:"Planned",backgroundColor:[],data:[]}],labels:[]};if(e.projects.forEach(function(t){var a=parseInt(t.estimatedDuration);if("done"===t.state)m+=a,v(E,t,a);else{var n=0;t.progress&&(n+=parseInt(t.progress)),"workingOnIt"===t.state&&t.startedWorkingOnIt&&(n+=f.a.subtractToMinutes(Object(r.a)({},e.currentTime,{s:(new Date).getSeconds()}),t.startedWorkingOnIt,!0)),n>a&&(n=a),m+=n,p+=a-n,v(E,t,n)}b+=Math.round(a*i)}),e.breaks.forEach(function(t){var a=f.a.subtractToMinutes(t.endTime,t.startTime,!0);E.labels.push(t.name),E.datasets[1].backgroundColor.push("#bbb"),E.datasets[1].data.push(a);var r=0;f.a.isBiggerThan(e.currentTime,t.startTime,!1,!0)&&(r=f.a.isBiggerThan(e.currentTime,t.endTime,!0,!0)?a:f.a.subtractToMinutes(e.currentTime,t.startTime,!0)),E.datasets[0].backgroundColor.push("#bbb"),E.datasets[0].data.push(r)}),e.realEndTime){var k=new Date(e.realEndTime),M=k.getHours(),S=k.getMinutes();k.getSeconds()>=30&&S++;var y=!1;M>12&&(M-=12,y=!0),u={h:M,m:S,pm:y}}var O=f.a.subtractToMinutes(u||e.currentTime,e.startTime,!0),w=f.a.subtractToMinutes(o,e.currentTime,!0),C=Math.round(100*m/O),j=Math.round(100*(m+p)/(O+w)),I=O-m;I=Math.round(I/s)*s,v(E,{name:"Unproductive time",color:"#aaa"},I);var N=!0,B=!1,D=void 0;try{for(var L,A=e.breaks[Symbol.iterator]();!(N=(L=A.next()).done);N=!0){var F=L.value;b+=f.a.subtractToMinutes(F.endTime,F.startTime,!0)}}catch(H){B=!0,D=H}finally{try{N||null==A.return||A.return()}finally{if(B)throw D}}b=Math.round(b/s)*s,E.datasets[1].backgroundColor.push("#aaa"),E.datasets[1].data.push(b);var P=e.settings.darkTheme?"white":"black";return c.a.createElement("div",{className:"TimeStatsModal",style:{color:P}},c.a.createElement(d.a,{variant:"h6"},"You need ",f.a.makeFullLengthDurationString(e.stats.timeNeeded)),c.a.createElement("b",null,f.a.makeString(e.stats.totalProjectTime,!1,!1,n))," for projects",c.a.createElement("br",null),f.a.makeString(e.stats.totalBufferTime,!1,!1,n)," for buffers",c.a.createElement("br",null),f.a.makeString(e.stats.totalBreakTime,!1,!1,n)," for breaks",c.a.createElement("div",{className:"section"},"At the current pace, you'll be done at ",c.a.createElement("b",null,f.a.makeString(o,!0,!1,n)),c.a.createElement("br",null),"That's",c.a.createElement("b",null,c.a.createElement("span",null," "),f.a.makeFullLengthDurationString(t),c.a.createElement("span",null," "),l?"earlier":"later"),c.a.createElement("span",null," "),"than what you planned"),!isNaN(C)&&C>=0&&C<=100&&c.a.createElement("div",{className:"section"},"You've been productive ",c.a.createElement("b",null,C,"%")," of the time so far",c.a.createElement("br",null),"Assuming you're done at ",f.a.makeString(o,!0,!1,n),",",c.a.createElement("br",null),"your productivity percentage will be",c.a.createElement("span",null," "),j<C?c.a.createElement(h.a,{disableFocusListener:!0,disableTouchListener:!0,title:"Your predicted productivity percentage is lower then your current one because of buffer times.\n                You can learn more about buffer times in the about section."},c.a.createElement("b",null,j,"%")):c.a.createElement("b",null,j,"%")),c.a.createElement("div",{className:"section"},c.a.createElement(d.a,{variant:"h6"},"Your day so far:",c.a.createElement(h.a,{disableFocusListener:!0,disableTouchListener:!0,title:"The inner circle represents your day as you planned it,\n              the outer one represents your day so far\n              (starting at ".concat(f.a.makeString(e.startTime,!0,!1,n),")")},c.a.createElement(g.a,{className:"helperIcon"}))),c.a.createElement("div",null,c.a.createElement(T.a,{data:E,width:250,height:200+4*E.datasets[0].data.length,options:{maintainAspectRatio:!1,legend:{position:"bottom",labels:{fontColor:P}}}}))))},k=a(773),M=a.n(k),S=a(796),y=a.n(S);a(881);a.d(t,"default",function(){return O});var O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).updateCurrentTime=function(){var e=new Date,t=e.getMinutes();if(a.state.currentTimeAvailable||a.setState({currentTimeAvailable:!0}),t!==a.props.currentTime.m||0===a.props.currentTime.h){var r=e.getHours(),n=r>=12;r=0===(r%=12)?12:r,a.props.onCurrentTimeChange({h:r,m:t,pm:n})}},a.openModal=function(){a.setState({modalOpen:!0})},a.state={currentTimeAvailable:!1,modalOpen:!1},a.currentTimeUpdateInterval=setInterval(a.updateCurrentTime,1e3),a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateCurrentTime()}},{key:"componentWillUnmount",value:function(){clearInterval(this.currentTimeUpdateInterval)}},{key:"render",value:function(){var e,t,a,n,s,i,o,l,u=this;if(this.state.currentTimeAvailable&&this.props.settings.bufferTimePercentage){e=t=0,this.props.projects.forEach(function(a,n){if("done"!==a.state){var s=parseInt(a.estimatedDuration),i=parseInt(a.progress);"workingOnIt"===a.state&&a.startedWorkingOnIt&&(i+=f.a.subtractToMinutes(Object(r.a)({},u.props.currentTime,{s:(new Date).getSeconds()}),a.startedWorkingOnIt,!0)),i&&(i>s?s=0:s-=i),e+=s,n!==u.props.projects.length-1&&(t+=Math.round(s*u.props.settings.bufferTimePercentage))}}),e=Math.round(e/this.props.settings.roundTo)*this.props.settings.roundTo,t=Math.round(t/this.props.settings.roundTo)*this.props.settings.roundTo,a=0;var m=!0,d=!1,p=void 0;try{for(var b,g=this.props.breaks[Symbol.iterator]();!(m=(b=g.next()).done);m=!0){var T=b.value,v=f.a.toMinutesSinceMidnight(T.endTime,!0),k=f.a.toMinutesSinceMidnight(this.props.currentTime,!0);if(!f.a.isBiggerThan(k,v,!1)){var S=f.a.toMinutesSinceMidnight(T.startTime,!0);f.a.isBiggerThan(S,k,!0)?a+=f.a.subtractToMinutes(v,S,!0):a+=f.a.subtractToMinutes(v,k,!0)}}}catch(O){d=!0,p=O}finally{try{m||null==g.return||g.return()}finally{if(d)throw p}}a=Math.round(a/this.props.settings.roundTo)*this.props.settings.roundTo,n=f.a.toTimeObject(f.a.addToMinutes(e,t,a),!1),s=f.a.subtract(this.props.endTime,this.props.currentTime,!0),i=f.a.isBiggerThan(n,s,!1,!1),l=(o=!f.a.isBiggerThan(s,0))&&""!==this.props.endTime.h&&""!==this.props.endTime.m}else e=t=a=0,n=s={h:0,m:0,pm:!1},i=o=l=!1;return c.a.createElement(c.a.Fragment,null,c.a.createElement(M.a,{item:!0,className:"timeStatsSideGridItem"+(i?" timeStatsWarning":"")},c.a.createElement(h.a,{title:"Projects: "+f.a.makeString(e,!1)+",\nBuffers: "+f.a.makeString(t,!1)+",\nBreaks: "+f.a.makeString(a,!1)+" (click for more)"},c.a.createElement("div",{onClick:this.openModal},c.a.createElement("div",{className:"timeStatsLabelDiv"},c.a.createElement("label",null,this.props.shortLabels?"N":"Time n","eeded:")),f.a.makeString(n,!1)))),c.a.createElement(M.a,{item:!0},c.a.createElement("h4",null,f.a.makeString(this.props.currentTime,!0,!1,this.props.settings.timeFormat24H))),c.a.createElement(M.a,{item:!0,className:"timeStatsSideGridItem"+(l?" timeStatsWarning":"")},c.a.createElement("div",{onClick:this.openModal},c.a.createElement("div",{className:"timeStatsLabelDiv"},c.a.createElement("label",null,this.props.shortLabels?"R":"Time r","emaining:")),o?"0:00":f.a.makeString(s,!1))),c.a.createElement(y.a,{open:this.state.modalOpen,onClose:function(){u.setState({modalOpen:!1})},"aria-label":"Time Stats Modal"},c.a.createElement(E,Object.assign({stats:{timeNeeded:n,totalProjectTime:e,totalBufferTime:t,totalBreakTime:a}},this.props))))}}]),t}(u.Component)},800:function(e,t,a){"use strict";var r=a(66);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1)),s=(0,r(a(274)).default)(n.default.createElement(n.default.Fragment,null,n.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"})),"Help");t.default=s},879:function(e,t,a){},881:function(e,t,a){}}]);
//# sourceMappingURL=20.6ed386ca.chunk.js.map
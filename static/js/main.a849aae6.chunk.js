(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{272:function(e,t,a){e.exports=a(664)},277:function(e,t,a){},279:function(e,t,a){},413:function(e,t,a){},415:function(e,t,a){},417:function(e,t,a){},436:function(e,t,a){},439:function(e,t,a){},447:function(e,t,a){},449:function(e,t,a){},451:function(e,t,a){},453:function(e,t,a){},460:function(e,t,a){},462:function(e,t,a){},498:function(e,t,a){},500:function(e,t,a){},599:function(e,t,a){},601:function(e,t,a){},603:function(e,t,a){},605:function(e,t,a){},607:function(e,t,a){},609:function(e,t,a){},617:function(e,t,a){},619:function(e,t,a){},621:function(e,t,a){},626:function(e,t,a){},657:function(e,t){},664:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),s=a.n(o),i=(a(277),a(18)),l=a(11),c=a(19),u=a(13),d=a(12),p=a(14),m=a(33),h=a(45),f=a(47),g=a(269),E=a(17),b=a.n(E),v=a(117),T=a.n(v),j=(a(279),function(e){return r.a.createElement(b.a,{onClick:e.onClick,className:"BackButton","aria-label":"Back"},r.a.createElement(T.a,null))}),k=a(30),y=a.n(k),w=a(158),C=a.n(w),O=a(40),S=a.n(O),P=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:"toMinutesSinceMidnight",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(typeof e){case"number":t=e;break;case"string":if(t=parseInt(e),isNaN(t))return void console.warn("Unexpected input: ",e);break;case"object":var n=parseInt(e.h);12===n&&"pm"in e&&(n-=12),t=60*n+parseInt(e.m),e.pm&&(t+=720);break;default:return void console.warn("Unexpected input: ",e)}return a&&this.isBiggerThan(e,0,!0)&&this.isBiggerThan(300,e,!0)&&(t+=1440),t}},{key:"toTimeObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!1;if(t){for(;e>=1440;)e-=1440;e>=720&&(a=!0,e-=720)}var n=e%60,r=(e-n)/60;return(isNaN(r)||isNaN(n))&&console.warn("NaN result: ",{h:r,m:n,pm:a}),t?{h:r,m:n,pm:a}:{h:r,m:n}}},{key:"addToMinutes",value:function(){for(var e=Array.isArray(arguments[0])?arguments[0]:arguments,t=0,a=0;a<e.length;a++)t+=this.toMinutesSinceMidnight(e[a]);return t}},{key:"add",value:function(){return this.toTimeObject(this.addToMinutes.apply(this,arguments))}},{key:"subtractToMinutes",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.toMinutesSinceMidnight(e,a)-this.toMinutesSinceMidnight(t,a)}},{key:"subtract",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.subtractToMinutes(e,t,a);return this.toTimeObject(n,!1)}},{key:"makeString",value:function(e){var t,a,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("number"===typeof e&&(e=this.toTimeObject(e,n)),o&&(n=!1),"string"===typeof e.m&&(e.m=parseInt(e.m)),a=e.m>=10?e.m:"0"+e.m,t=(n||r)&&0===e.h?12:e.h,o&&e.pm&&(t=parseInt(t)+12),!isNaN(a)){var s=t+":"+a;if("undefined"!==typeof e.pm&&n)s+=" "+(e.pm?"PM":"AM");return s}console.warn("Wrong input to makeString: ",e)}},{key:"round",value:function(e,t){var a=this.toMinutesSinceMidnight(e);return a=Math.round(a/t)*t,this.toTimeObject(a)}},{key:"isBiggerThan",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.subtractToMinutes(e,t,n);return a?r>=0:r>0}},{key:"areIdentical",value:function(){for(var e,t=0;t<arguments.length;t++){var a=arguments[t];if(isNaN(a.h)&&(a.h=a.h.toString()),isNaN(a.m)&&(a.m=a.m.toString()),"string"===typeof a.h&&(a.h=parseInt(a.h)),"string"===typeof a.m&&(a.m=parseInt(a.m)),e){if(a.h!==e.h||a.m!==e.m||a.pm!==e.pm)return!1;e=a}else e=a}return!0}},{key:"suggestStartTime",value:function(e,t,a){var n=this.add(e,t*a.bufferTimePercentage);return this.round(n,a.roundTo)}},{key:"average",value:function(){var e=this.addToMinutes.apply(this,arguments),t=Math.round(e/arguments.length);return this.toTimeObject(t)}},{key:"makeFullLengthDurationString",value:function(e){var t=parseInt(e.h),a=parseInt(e.m);e.pm&&(t+=12);var n="";return t&&(n+=t+" hour"),t>1&&(n+="s"),t&&a&&(n+=" and "),a&&(n+=a+" minute"),a>2&&(n+="s"),t||a||(n="0 minutes"),n}}]),e}();function D(e,t,a,n){if((a=JSON.parse(JSON.stringify(a))).length){for(var r={projects:[],breaks:[]},o=0;o<e.length;o++)r.projects[o]=P.average(e[o].plannedTime.start,e[o].plannedTime.end);for(var s=0;s<a.length;s++)r.breaks[s]=P.average(a[s].startTime,a[s].endTime)}for(var i=0;i<e.length;i++){e[i].plannedTime||(e[i].plannedTime={}),e[i].plannedTime.start=0!==i?P.suggestStartTime(e[i-1].plannedTime.end,e[i-1].estimatedDuration,t):n,e[i].plannedTime.end=P.add(e[i].plannedTime.start,e[i].estimatedDuration);for(var l=0;l<a.length;l++){var c=0===i?e[i].plannedTime.start:e[i-1].plannedTime.end;if(P.isBiggerThan(e[i].plannedTime.end,a[l].startTime,!0,!0)&&P.isBiggerThan(a[l].startTime,c,!0,!0)){var u=P.isBiggerThan(r.projects[i],r.breaks[l],!0,!0),d=P.subtractToMinutes(a[l].endTime,a[l].startTime,!0);u?(a[l].startTime=0===i?e[i].plannedTime.start:e[i-1].plannedTime.end,a[l].endTime=P.add(a[l].startTime,d),e[i].plannedTime.start=0===i?a[l].endTime:P.suggestStartTime(a[l].endTime,e[i-1].estimatedDuration,t),e[i].plannedTime.end=P.add(e[i].plannedTime.start,e[i].estimatedDuration)):(a[l].startTime=e[i].plannedTime.end,a[l].endTime=P.add(a[l].startTime,d))}}}return e}function I(e,t,a){return""===e||!isNaN(e)&&e>=t&&e<=a}var M=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleKeyPress=function(e){"Enter"===e.key&&a.props.onEnterPress&&a.props.onEnterPress()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e,t){var a;a="number"===typeof t?t:"pm"===e?"PM"===t.target.value:t.target.value;var n=this.props.settings.timeFormat24H?24:12;"h"===e&&!I(a,1,n)||"m"===e&&!I(a,0,59)||(this.props.settings.timeFormat24H&&"h"===e&&(a>=12?(a-=12,this.props.onChange("pm",!0)):this.props.onChange("pm",!1)),this.props.onChange(e,a))}},{key:"handleKeyDown",value:function(e,t){var a;if("ArrowUp"===t.key&&(a="up"),"ArrowDown"===t.key&&(a="down"),a){var n=this.props.value;n&&!isNaN(n.m)||(n=0);var r="m"===e?this.props.settings.roundTo:60;n="up"===a?P.add(n,r):P.toTimeObject(P.subtractToMinutes(n,r),!0),P.isBiggerThan(0,n,!1)&&(n=P.add(n,1440)),this.props.onChange("object",n)}}},{key:"render",value:function(){var e=this.props.value.h;e=0===e?12:e;var t=this.props.value.m;return t=0===t?"0"+t:t,r.a.createElement("div",{className:"TimeSetterDesktop"+(this.props.showError?" timeSetterError":""),style:{display:"inline"}},r.a.createElement(y.a,{onChange:this.handleInputChange.bind(this,"h"),value:this.props.settings.timeFormat24H&&this.props.value.pm?e+12:e,id:this.props.firstInputId,placeholder:"Hours","aria-label":"Hours",autoComplete:"off",error:this.props.hError,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown.bind(this,"h")}),":",r.a.createElement(y.a,{onChange:this.handleInputChange.bind(this,"m"),value:t,placeholder:"Minutes","aria-label":"Minutes",autoComplete:"off",error:this.props.mError,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown.bind(this,"m")}),!this.props.settings.timeFormat24H&&r.a.createElement(C.a,{onChange:this.handleInputChange.bind(this,"pm"),value:this.props.value.pm?"PM":"AM"},r.a.createElement(S.a,{value:"AM"},"AM"),r.a.createElement(S.a,{value:"PM"},"PM")))}}]),t}(n.Component),N=a(246),B=a.n(N),A=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=60*e.getHours()+e.getMinutes(),n=P.toTimeObject(t);a.props.onChange("object",n)},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=new Date,t=this.props.value.h;return this.props.value.pm&&(t+=12),e.setHours(t),e.setMinutes(this.props.value.m),r.a.createElement(B.a,{className:"TimeSetterMobile",mode:this.props.mode,value:e,onChange:this.handleChange,error:this.props.error})}}]),t}(n.Component),x=r.a.createContext({}),L=r.a.createContext({}),R=(a(413),function(e){return r.a.createElement(x.Consumer,null,function(t){return r.a.createElement(L.Consumer,null,function(a){return a?r.a.createElement(A,{mode:t.timeFormat24H?"24h":"12h",value:e.value,onChange:e.onChange,error:e.hError||e.mError||e.showErrorProp}):r.a.createElement(M,{onChange:e.onChange,value:e.value,firstInputId:e.firstInputId,hError:e.hError,mError:e.mError,onEnterPress:e.onEnterPress,settings:t})})})}),F=(a(415),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).render=function(){return r.a.createElement("span",{className:"ColorPicker"},r.a.createElement("input",{className:"colorInput",ref:function(e){return a.colorInput=e},type:"color","aria-label":"Color",value:a.props.value,onChange:function(e){a.props.onChange(e.target.value)}}),r.a.createElement("svg",{width:a.props.xl?50:20,height:a.props.xl?30:20,onClick:function(){a.colorInput.click()}},a.props.xl?r.a.createElement("rect",{width:"50",height:"30",rx:"5",ry:"5",style:{fill:a.props.value}}):r.a.createElement("circle",{cx:"10",cy:"10",r:".5rem",fill:a.props.value})))},a.state={},a.colorInput=r.a.createRef(),a}return Object(p.a)(t,e),t}(n.Component)),V=a(10),W=a.n(V),H=a(161),K=a.n(H),_=a(28),U=a.n(_),Y=(a(417),function(e){return r.a.createElement(W.a,{className:"MobileInputFields container"},r.a.createElement(j,{onClick:e.close}),r.a.createElement(W.a,{className:"buttonTop"},e.buttonTop),e.title&&r.a.createElement(U.a,{className:"title",variant:"h6",children:e.title}),r.a.createElement(W.a,{style:e.title?{}:{paddingTop:"1.5rem"}},r.a.createElement(K.a,{value:e.inputValues.name,onChange:e.onInputChange.bind(void 0,"name"),onKeyPress:e.onKeyPress,placeholder:"Name","aria-label":"Name",error:e.showErrors.name||e.showErrorProp,fullWidth:!0,margin:"normal",autoFocus:!0})),r.a.createElement(W.a,{className:"durationAndStartTimeDiv",container:!0,justify:"space-between"},"break"!==e.type&&r.a.createElement(W.a,{item:!0,xs:"default"===e.type?12:6,className:"item"},r.a.createElement("label",null,"Duration:"),r.a.createElement(K.a,{type:"number",value:e.inputValues.duration,onChange:e.onInputChange.bind(void 0,"duration"),onKeyPress:e.onKeyPress,placeholder:"Duration","aria-label":"Duration",error:e.showErrors.duration||e.showErrorProp})),"default"!==e.type&&r.a.createElement(W.a,{item:!0,xs:6,className:"item"},r.a.createElement("label",null,"Start:"),r.a.createElement(R,{value:e.inputValues.startTime,onChange:e.onTimeInputChange.bind(void 0,"startTime"),firstInputId:"newProjectStartTimeInput",hError:e.showErrors.startTimeH||e.showErrorProp,mError:e.showErrors.startTimeM||e.showErrorProp,showErrors:e.showErrors,onEnterPress:e.add})),"break"===e.type&&r.a.createElement(W.a,{item:!0,xs:6,className:"item"},r.a.createElement("label",null,"End:"),r.a.createElement(R,{value:e.inputValues.endTime,onChange:e.onTimeInputChange.bind(void 0,"endTime"),firstInputId:"newProjectEndTimeInput",hError:e.showErrors.endTimeH||e.showErrors.endTime||e.showErrorProp,mError:e.showErrors.endTimeM||e.showErrors.endTime||e.showErrorProp,showErrors:e.showErrors,onEnterPress:e.add}))),"break"!==e.type&&r.a.createElement(W.a,null,"Color:",r.a.createElement(F,{xl:!0,value:e.inputValues.color,onChange:e.onColorChange})),r.a.createElement(W.a,{className:"confirmDiv",container:!0,justify:"center"},e.button))}),J=a(27),G=a.n(J);function z(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];return""===e.name&&a.push("name"),(""===e.duration||isNaN(e.duration)||e.duration>1440)&&a.push("duration"),t||((""===e.startTime.h||isNaN(e.startTime.h))&&a.push("startTimeH"),(""===e.startTime.m||isNaN(e.startTime.m))&&a.push("startTimeM")),a.length?{valid:!1,errors:a}:{valid:!0}}function Z(e,t){return!("name"===e&&t.length>30)&&("duration"!==e||!isNaN(t)||""===t)}function q(e){var t=[];return""===e.name&&t.push("name"),(""===e.startTime.h||isNaN(e.startTime.h))&&t.push("startTimeH"),(""===e.startTime.m||isNaN(e.startTime.m))&&t.push("startTimeM"),(""===e.endTime.h||isNaN(e.endTime.h))&&t.push("endTimeH"),(""===e.endTime.m||isNaN(e.endTime.m))&&t.push("endTimeM"),P.isBiggerThan(e.startTime,e.endTime,!1,!0)&&t.push("endTime"),t.length?{valid:!1,errors:t}:{valid:!0}}var $=a(7),Q=function(e){return function(t){function a(t){var n,o;if(Object(l.a)(this,a),(n=Object(u.a)(this,Object(d.a)(a).call(this,t))).handleColorChange=function(e){n.setState({inputValues:Object(i.a)({},n.state.inputValues,{color:e})})},n.render=function(){return r.a.createElement(e,Object.assign({},n.props,{inputValues:n.state.inputValues,showErrors:n.state.showErrors,showErrorProp:!!n.props.showErrors&&n.props.showErrors.noProjects,onInputChange:n.handleInputChange.bind(Object($.a)(Object($.a)(n))),onTimeInputChange:n.handleTimeInputChange.bind(Object($.a)(Object($.a)(n))),onColorChange:n.handleColorChange,setState:n.setState.bind(Object($.a)(Object($.a)(n)))}))},n.props.inputValues)o=n.props.inputValues;else{o={name:""};var s,c=n.props.type,p=n.props.settings.roundTo||5;if("default"!==c){var m,h=n.props.lastProject;m=h&&h.plannedTime?P.suggestStartTime(h.plannedTime.end,h.estimatedDuration,n.props.settings):n.props.currentTime?P.round(P.add(n.props.currentTime,15),p):{h:12,m:0,pm:!0},o.startTime=m}"break"===n.props.type?o.endTime=P.round(P.add(o.startTime,30),p):(o.duration="",s="undefined"!==typeof n.props.defaultColorIndex?n.props.settings.defaultColors[n.props.defaultColorIndex]:"#000000",o.color=s)}return n.state={inputValues:o,userHasntChangedStartTime:!0,defaultColorIndex:n.props.defaultColorIndex,showErrors:{}},n}return Object(p.a)(a,t),Object(c.a)(a,[{key:"componentDidUpdate",value:function(){if("default"!==this.props.type&&""!==this.state.inputValues.h&&this.state.userHasntChangedStartTime&&this.props.settings.bufferTimePercentage&&this.props.lastProject&&!this.props.isDefaultProjects){var e=P.suggestStartTime(this.props.lastProject.plannedTime.end,this.props.lastProject.estimatedDuration,this.props.settings);if(""===this.state.inputValues.startTime.h||!P.areIdentical(e,this.state.inputValues.startTime)){var t=Object(i.a)({},this.state.inputValues,{startTime:e});if("break"===this.props.type){var a=P.round(P.add(e,30),this.props.settings.roundTo);t.endTime=a}this.setState({inputValues:t})}}if("break"!==this.props.type&&!this.props.inputValues&&"undefined"===typeof this.state.defaultColorIndex&&"undefined"!==typeof this.props.defaultColorIndex&&this.props.settings.defaultColors){var n=this.state.inputValues,r=this.props.settings.defaultColors,o=this.props.defaultColorIndex;r.length<=o&&(o=0),n.color=r[o],n.color=n.color?n.color:"#000000",this.setState({inputValues:n,defaultColorIndex:o})}}},{key:"handleInputChange",value:function(e,t){var a=t.target.value;Z(e,a)&&this.setState({inputValues:Object(i.a)({},this.state.inputValues,Object(m.a)({},e,a)),showErrors:Object(i.a)({},this.state.showErrors,Object(m.a)({},e,!1))})}},{key:"handleTimeInputChange",value:function(e,t,a){var n={inputValues:this.state.inputValues,showErrors:this.state.showErrors};"object"===t?n.inputValues[e]=a:n.inputValues[e][t]=a,n.showErrors[e+t.toUpperCase()]=!1,n.userHasntChangedStartTime=!1,this.setState(n)}}]),a}(n.Component)},X=function(e){return Q(function(t){function a(){var t,n;Object(l.a)(this,a);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return(n=Object(u.a)(this,(t=Object(d.a)(a)).call.apply(t,[this].concat(s)))).add=function(e){var t,a=n.props,r=a.inputValues,o=a.type;if(!(t="break"===o?q(r):z(r,"default"===o)).valid){var s=n.props.showErrors;return t.errors.forEach(function(e){s[e]=!0}),void n.setState(s)}var i,l={name:""};if("default"!==o&&(l.startTime={h:"",m:"",pm:!0}),"break"===o)l.endTime={h:"",m:"",pm:!0},n.props.onAddBreak(n.props.inputValues);else{l.duration="",l.color=r.color;var c=n.props.settings.defaultColors,u=n.props.defaultColorIndex;i=u>=c.length-1?0:++u,l.color=c[i],n.props.onAddProject(n.props.inputValues,i)}var d={inputValues:l};"break"!==o&&(d.defaultColorIndex=i),n.props.setState(d),"function"===typeof e&&e()},n.handleKeyPress=function(e){"Enter"===e.key&&n.add()},n.render=function(){return r.a.createElement(e,Object.assign({},n.props,{add:n.add,onKeyPress:n.handleKeyPress}))},n}return Object(p.a)(a,t),a}(n.Component))},ee=X(function(e){return r.a.createElement(Y,Object.assign({},e,{button:r.a.createElement(G.a,{onClick:function(){e.add(e.close)},color:"primary",variant:"contained"},"Add")}))}),te=a(70),ae=a.n(te),ne=function(e){return Q(function(t){function a(){var t,n;Object(l.a)(this,a);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return(n=Object(u.a)(this,(t=Object(d.a)(a)).call.apply(t,[this].concat(s)))).save=function(){var e,t=n.props,a=t.inputValues,r=t.type;if(!(e="break"===r?q(a):z(a,"default"===r)).valid){var o=n.props.showErrors;return e.errors.forEach(function(e){o[e]=!0}),void n.props.setState(o)}n.props.onDoneEditing(n.props.inputValues)},n.handleKeyPress=function(e){"Enter"===e.key&&n.save()},n.render=function(){return r.a.createElement(e,Object.assign({},n.props,{save:n.save,onKeyPress:n.handleKeyPress}))},n}return Object(p.a)(a,t),a}(n.Component))}(function(e){return r.a.createElement(Y,Object.assign({},e,{button:r.a.createElement(G.a,{onClick:function(t,a){e.save(t,a),e.close()},color:"primary",variant:"contained"},"Save"),buttonTop:r.a.createElement(b.a,{onClick:function(){window.confirm("Are you sure you want to delete this?")&&(e.close(),e.delete())}},r.a.createElement(ae.a,null)),title:e.type&&"Edit the "+("break"===e.type?"break":"default"===e.type&&"repetitive project")}))}),re=a(118),oe=a.n(re),se=a(52),ie=a.n(se),le=(a(436),function(e){return r.a.createElement(oe.a,{onClick:e.onClick,color:"primary",className:"AddFab","aria-label":"Add a project"},r.a.createElement(ie.a,null))}),ce=a(35),ue=a.n(ce),de=a(36),pe=a.n(de),me=a(39),he=a.n(me),fe=a(26),ge=a.n(fe),Ee=a(4),be=a.n(Ee),ve=a(119),Te=a.n(ve),je=(a(439),function(e){return r.a.createElement(W.a,{className:"BreaksView container"},r.a.createElement(j,{onClick:e.changeView.bind(void 0,"breaks",!1)}),r.a.createElement(U.a,{variant:"h6",className:"title"},"Breaks"),r.a.createElement(ue.a,null,r.a.createElement(he.a,null,r.a.createElement(ge.a,null,r.a.createElement(be.a,null,"Name"),r.a.createElement(be.a,null,"Time"),r.a.createElement(be.a,null))),r.a.createElement(pe.a,null,e.breaks.length?e.breaks.map(function(t){return r.a.createElement(ge.a,{key:t.id},r.a.createElement(be.a,null,t.name),r.a.createElement(be.a,null,r.a.createElement(x.Consumer,null,function(e){return P.makeString(t.startTime,t.startTime.pm!==t.endTime.pm,!0,e.timeFormat24H)+"-"+P.makeString(t.endTime,!0,!0,e.timeFormat24H)})),r.a.createElement(be.a,null,r.a.createElement(b.a,{onClick:e.changeView.bind(void 0,"edit",!0,{type:"break",id:t.id})},r.a.createElement(Te.a,null))))}):r.a.createElement(ge.a,null,r.a.createElement(be.a,{colSpan:4},"You haven't set any breaks")))),r.a.createElement(le,{onClick:e.changeView.bind(void 0,"add",!0,{type:"break"})}))}),ke=a(271),ye=function(e){return r.a.createElement(be.a,{className:"setStartTimeCell"},r.a.createElement("div",{className:"setStartTimeLabelDiv"},r.a.createElement("label",{htmlFor:e.firstInputId},"Start:")),r.a.createElement(R,{onChange:e.onChange,value:e.value,firstInputId:e.firstInputId,hError:e.hError,mError:e.mError,onEnterPress:e.onEnterPress}))},we=a(53),Ce=a.n(we),Oe=(a(447),function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value;isNaN(t)||a.setState({progress:t})},a.save=function(){a.props.onPause(a.props.row.id,"paused",a.state.progress)},a.render=function(){return r.a.createElement("div",{className:"SetProgressPopoverContent"},r.a.createElement("span",null,"I've worked on this for "),r.a.createElement(y.a,{autoFocus:!0,"aria-label":"Progress in minutes",value:a.state.progress||"",onChange:a.handleInputChange,onKeyPress:function(e){"Enter"===e.key&&a.save()}}),r.a.createElement("span",null," minutes"),r.a.createElement(b.a,{"aria-label":"Save the progress and pause the project",onClick:a.save,color:"primary"},r.a.createElement(Ce.a,null)))};var n=P.subtractToMinutes(e.currentTime,e.row.startedWorkingOnIt,!0);return e.row.progress&&(n+=parseInt(e.row.progress)),a.state={progress:n},a}return Object(p.a)(t,e),t}(n.Component)),Se=a(88),Pe=a.n(Se),De=a(54),Ie=a.n(De),Me=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.close=function(){a.setState({anchorEl:null})},a.state={anchorEl:null},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.anchorEl;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{"aria-label":"Pause the project",onClick:this.handleClick},r.a.createElement(Ie.a,null)),r.a.createElement(Pe.a,{open:Boolean(e),anchorEl:e,onClose:this.close,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(Oe,this.props)))}}]),t}(n.Component),Ne=a(69),Be=a.n(Ne),Ae=a(48),xe=a.n(Ae),Le=a(71),Re=a.n(Le),Fe=(a(449),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).open=function(e){a.setState({anchorEl:e.currentTarget})},a.close=function(){a.setState({anchorEl:null}),setTimeout(function(){a.setState({showSetProgress:!1})},500)},a.render=function(){var e=a.state.anchorEl;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{"aria-label":"Open the project state dropdown",onClick:a.open,color:"primary"},r.a.createElement(Re.a,null)),r.a.createElement(Pe.a,{className:"ChangeProjectStateDropdownMenu",anchorEl:e,open:Boolean(e),onClose:a.close},a.state.showSetProgress?r.a.createElement(Oe,{onPause:a.props.onProjectStateChange,row:a.props.row,currentTime:a.props.currentTime}):r.a.createElement(Be.a,null,[{title:"Pause",icon:r.a.createElement(Ie.a,null),onClick:a.setState.bind(Object($.a)(Object($.a)(a)),{showSetProgress:!0},null)},{title:"Done",icon:r.a.createElement(Ce.a,{color:"primary"}),onClick:a.props.onProjectStateChange.bind(Object($.a)(Object($.a)(a)),a.props.row.id,"done")}].map(function(e){return r.a.createElement(xe.a,{key:e.title,button:!0,onClick:e.onClick},e.icon,e.title)}))))},a.state={anchorEl:null,showSetProgress:!1},a}return Object(p.a)(t,e),t}(n.Component)),Ve=a(120),We=a.n(Ve),He=a(247),Ke=a.n(He);a(451);function _e(e){var t=[];return"done"===e.row.state?(e.isMobile||t.push(r.a.createElement("span",{key:"doneSpan",className:"done"},"DONE")),t.push(r.a.createElement(b.a,{key:"undo","aria-label":"Mark project as undone",onClick:e.onProjectStateChange.bind(this,e.row.id,"paused")},r.a.createElement(Ke.a,null)))):("workingOnIt"===e.row.state?e.isMobile?t.push(r.a.createElement(Fe,{key:"dropdown",row:e.row,currentTime:e.currentTime,onProjectStateChange:e.onProjectStateChange})):t.push(r.a.createElement(Me,{key:"pause",row:e.row,currentTime:e.currentTime,onPause:e.onProjectStateChange})):t.push(r.a.createElement(b.a,{key:"start","aria-label":"Start working on the project",onClick:e.onProjectStateChange.bind(this,e.row.id,"workingOnIt"),color:"primary"},r.a.createElement(We.a,null))),e.isMobile||t.push(r.a.createElement(b.a,{key:"done","aria-label":"Mark the project as done",onClick:e.onProjectStateChange.bind(this,e.row.id,"done"),color:"workingOnIt"===e.row.state?"primary":void 0},r.a.createElement(Ce.a,null)))),r.a.createElement(be.a,{className:"ChangeProjectStateCell"},t.map(function(e){return e}))}var Ue=a(51),Ye=a.n(Ue),Je=a(49),Ge=a.n(Je),ze=a(46),Ze=a.n(ze),qe=(a(453),function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).startEditing=function(){var e={values:a.state.values,editing:!0};a.props.isDefaultProjects||(e.values.startTime=Object.assign({},a.props.row.plannedTime.start)),a.setState(e)},a.handleStartTimeChange=function(e,t){var n={values:a.state.values,showErrors:a.state.showErrors};"object"===e?n.values.startTime=t:n.values.startTime[e]=t,n.showErrors["startTime"+e.toUpperCase()]=!1,a.setState(n)},a.save=function(){var e=z(a.state.values,a.props.isDefaultProjects);if(!e.valid){var t=a.state.showErrors;return e.errors.forEach(function(e){t[e]=!0}),void a.setState(t)}a.props.onDoneEditing(a.props.row.id,a.state.values),a.setState({editing:!1})},a.handleKeyPress=function(e){"Enter"===e.key&&a.save()};var n={editing:!1,values:{name:a.props.row.name,duration:a.props.row.estimatedDuration},showErrors:{}};return a.props.isDefaultProjects||(n.values.startTime=a.props.row.plannedTime.start),a.state=n,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e,t){var a=t.target.value;if(Z(e,a)){var n={values:this.state.values,showErrors:this.state.showErrors};n.values[e]=a,n.showErrors[e]=!1,this.setState(n)}}},{key:"render",value:function(){var e,t,a,n,o,s=this,l=this.state.editing&&"planning"===this.props.mode,c={};if(!this.props.isDefaultProjects){e=this.props.row.progress?parseInt(this.props.row.progress):0,"workingOnIt"===this.props.row.state&&(e+=P.subtractToMinutes(this.props.currentTime,this.props.row.startedWorkingOnIt,!0));var u,d=e;d>this.props.row.estimatedDuration&&(d=this.props.row.estimatedDuration),o=parseInt(this.props.row.estimatedDuration)-d,a=!P.isBiggerThan(P.add(this.props.row.plannedTime.start,d),this.props.currentTime,!0,!0),n=!P.isBiggerThan(this.props.row.plannedTime.end,this.props.currentTime,!0,!0),"done"===this.props.row.state?(u=100,t="stateClassDone"):(a&&"workingOnIt"!==this.props.row.state&&(t="stateClassTooLate"),u=100*d/this.props.row.estimatedDuration),c={backgroundImage:"linear-gradient(to right, #00c8002e, #00c8002e ".concat(u,"%, transparent ").concat(u,"%, transparent 100%)")}}return r.a.createElement(L.Consumer,null,function(u){return r.a.createElement(Ye.a,{rootRef:s.props.provided.innerRef},r.a.createElement(ge.a,Object.assign({},s.props.provided.draggableProps,{style:Object(i.a)({},s.props.provided.draggableProps.style,c)}),r.a.createElement(be.a,null,r.a.createElement(Ge.a,Object.assign({className:"dragIcon"},s.props.provided.dragHandleProps),"drag_indicator"),r.a.createElement(F,{value:s.props.row.color,onChange:s.props.onColorChange.bind(s,s.props.row.id)})),r.a.createElement(be.a,{className:l?"setNameCell":t},l?r.a.createElement(y.a,{value:s.state.values.name,onChange:s.handleInputChange.bind(s,"name"),placeholder:"Name","aria-label":"Name",error:s.state.showErrors.name,onKeyPress:s.handleKeyPress}):s.props.row.name),(!u||s.props.isDefaultProjects)&&r.a.createElement(be.a,{className:l?"setDurationCell":null},l?r.a.createElement(y.a,{value:s.state.values.duration,onChange:s.handleInputChange.bind(s,"duration"),placeholder:"Duration","aria-label":"Duration",error:s.state.showErrors.duration,onKeyPress:s.handleKeyPress}):e&&"done"!==s.props.row.state?r.a.createElement(Ze.a,{title:e+"/"+s.props.row.estimatedDuration+" done"},r.a.createElement("span",null,o," minutes left")):s.props.row.estimatedDuration+" minutes"),!s.props.isDefaultProjects&&(l?r.a.createElement(ye,{value:s.state.values.startTime,onChange:s.handleStartTimeChange,firstInputId:"changeStartTimeInput"+s.props.row.id,hError:s.state.showErrors.startTimeH,mError:s.state.showErrors.startTimeM,onEnterPress:s.save}):r.a.createElement(x.Consumer,null,function(e){return r.a.createElement(be.a,{className:l?"setStartTimeCell":null},r.a.createElement("span",{className:a&&"stateClassTooLate"===t?t:null},P.makeString(s.props.row.plannedTime.start,s.props.row.plannedTime.start.pm!==s.props.row.plannedTime.end.pm,!0,e.timeFormat24H)),r.a.createElement("span",{className:a&&n&&"stateClassTooLate"===t?t:null},"-"),r.a.createElement("span",{className:n&&"stateClassDone"!==t?"stateClassTooLate":null},P.makeString(s.props.row.plannedTime.end,!0,!1,e.timeFormat24H)))})),"planning"===s.props.mode?r.a.createElement(be.a,null,l?r.a.createElement(b.a,{"aria-label":"Save changes",onClick:s.save,color:"primary"},r.a.createElement(Ce.a,null)):r.a.createElement(b.a,{"aria-label":"Edit the project",onClick:u?s.props.startEditingMobile.bind(s,s.props.row.id):s.startEditing},r.a.createElement(Te.a,null)),!u&&r.a.createElement(b.a,{"aria-label":"Delete the project",onClick:s.props.onDeleteProject.bind(s,s.props.row.id),className:"deleteIconButton"},r.a.createElement(ae.a,null))):r.a.createElement(_e,{row:s.props.row,onProjectStateChange:s.props.onProjectStateChange,currentTime:s.props.currentTime,isMobile:u})))})}}]),t}(n.Component)),$e=(a(460),X(function(e){return r.a.createElement(ge.a,{id:"addProjectRow"},r.a.createElement(be.a,null,r.a.createElement(F,{value:e.inputValues.color,onChange:e.onColorChange})),r.a.createElement(be.a,{className:"setNameCell"},r.a.createElement("div",{id:"addProjectLabelDiv"},r.a.createElement("label",{htmlFor:"addProjectNameInput"},"Add a project:")),r.a.createElement(y.a,{onChange:e.onInputChange.bind(void 0,"name"),value:e.inputValues.name,placeholder:"Name","aria-label":"Name",error:e.showErrors.name||e.showErrorProp,onKeyPress:e.onKeyPress,id:"addProjectNameInput",autoFocus:!0})),r.a.createElement(be.a,{className:"setDurationCell"},r.a.createElement(y.a,{onChange:e.onInputChange.bind(void 0,"duration"),value:e.inputValues.duration,placeholder:"Duration","aria-label":"Duration",error:e.showErrors.duration||e.showErrorProp,onKeyPress:e.onKeyPress})," minutes"),!e.isDefaultProjects&&r.a.createElement(ye,{onChange:e.onStartTimeChange,value:e.inputValues.startTime,firstInputId:"setStartTimeInput",hError:e.showErrors.startTimeH||e.showErrorProp,mError:e.showErrors.startTimeM||e.showErrorProp,showErrors:e.showErrors,onEnterPress:e.add}),r.a.createElement(be.a,null,r.a.createElement(b.a,{color:"primary",style:{color:e.showErrorProp?"red":null},"aria-label":"Add the new project",onClick:e.add},r.a.createElement(ie.a,null))))})),Qe=a(56),Xe=a(121),et=a.n(Xe),tt=(a(462),function(e){var t=r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,null,r.a.createElement(U.a,{variant:"h6",className:"drawerTitle"},"Repetitive projects:")),r.a.createElement(W.a,null,r.a.createElement("label",null,"Use repetitive projects",r.a.createElement(et.a,{color:"primary",checked:e.useDefaultProjects&&"false"!==e.useDefaultProjects,onChange:e.onUseDefaultProjectsChange,"aria-label":"Use default projects"}))));return r.a.createElement(r.a.Fragment,null,e.mobile?t:r.a.createElement(W.a,{container:!0,justify:"space-between"},t),r.a.createElement(ue.a,{className:"projectsTable"},r.a.createElement(he.a,null,r.a.createElement(ge.a,null,r.a.createElement(be.a,null),r.a.createElement(be.a,null,"Name"),r.a.createElement(be.a,null,"Duration"),r.a.createElement(be.a,null))),r.a.createElement(Qe.a,{onDragEnd:e.onDragEnd},r.a.createElement(Qe.c,{droppableId:"0"},function(t){return r.a.createElement(Ye.a,{rootRef:t.innerRef},r.a.createElement(pe.a,t.droppableProps,!e.projects.length&&r.a.createElement(ge.a,null,r.a.createElement(be.a,null),r.a.createElement(be.a,{colSpan:2},"You haven't set any repetitive projects yet"),r.a.createElement(be.a,null)),e.projects.map(function(t,a){return r.a.createElement(Qe.b,{key:t.id,draggableId:t.id.toString(),index:a},function(a){return r.a.createElement(qe,{mode:"planning",row:t,currentTime:e.currentTime,provided:a,onColorChange:e.onColorChange,onDoneEditing:e.onDoneEditing,onProjectStateChange:e.onProjectStateChange,onDeleteProject:e.onDeleteProject,isDefaultProjects:!0,startEditingMobile:e.startEditingMobile})})}),t.placeholder,!e.mobile&&r.a.createElement($e,{settings:e.settings,defaultColorIndex:e.defaultColorIndex,showErrors:{},lastProject:e.projects[e.projects.length-1],onAddProject:e.onAddProject,isDefaultProjects:!0})))}))),!e.mobile&&r.a.createElement(W.a,{container:!0,justify:"center"},r.a.createElement(G.a,{onClick:e.onClose,variant:"contained",color:"primary",style:{margin:".5rem"}},"Save")))}),at=function(e){var t=e.changeView,a=Object(ke.a)(e,["changeView"]);return r.a.createElement(W.a,{className:"DefaultProjectsView container"},r.a.createElement(j,{onClick:t.bind(void 0,"defaultProjects",!1)}),r.a.createElement(tt,Object.assign({},a,{mobile:!0})),r.a.createElement(le,{onClick:t.bind(void 0,"add",!0,{type:"default"})}))};a(498);function nt(e){var t=this,a=[{label:"Plan",val:"planning"},{label:"Work",val:"working"}].map(function(a){return r.a.createElement(W.a,{key:a.val},r.a.createElement(oe.a,{onClick:e.onModeChange.bind(t,a.val),color:a.val===e.mode?"primary":null},a.label))});return r.a.createElement(W.a,{className:"ModeSwitch",container:!0,alignItems:"baseline",justify:"space-between"},a[0],e.children,a[1])}a(500);var rt=function(e){return r.a.createElement(L.Consumer,null,function(t){return r.a.createElement(ue.a,{id:"ProjectsTable",className:"projectsTable"},r.a.createElement(he.a,null,r.a.createElement(ge.a,null,r.a.createElement(be.a,null),r.a.createElement(be.a,null,"Name"),!t&&r.a.createElement(be.a,null,"Duration estimate"),r.a.createElement(be.a,null,t?"Time":"Planned time"),r.a.createElement(be.a,null))),r.a.createElement(Qe.a,{onDragEnd:e.onDragEnd},r.a.createElement(Qe.c,{droppableId:"0"},function(a){return r.a.createElement(Ye.a,{rootRef:a.innerRef},r.a.createElement(pe.a,a.droppableProps,!e.projects.length&&r.a.createElement(ge.a,null,r.a.createElement(be.a,null),r.a.createElement(be.a,{colSpan:t?2:3,style:e.showErrors.noProjects?{color:"red",fontWeight:500}:null},"You haven't set any projects yet"),r.a.createElement(be.a,null)),e.projects.map(function(t,a){return r.a.createElement(Qe.b,{key:t.id,draggableId:t.id.toString(),index:a},function(a){return r.a.createElement(qe,{mode:e.mode,row:t,currentTime:e.currentTime,provided:a,onColorChange:e.onColorChange,onDoneEditing:e.onDoneEditing,onProjectStateChange:e.onProjectStateChange,onDeleteProject:e.onDeleteProject,startEditingMobile:e.startEditingMobile})})}),a.placeholder,"planning"===e.mode&&!t&&r.a.createElement($e,{settings:e.settings,defaultColorIndex:e.defaultColorIndex,showErrors:e.showErrors,lastProject:e.projects[e.projects.length-1],onAddProject:e.onAddProject})))})))})},ot=a(72),st=a.n(ot),it=a(252);a(599);function lt(e,t,a){e.datasets[0].backgroundColor.push(t.color),e.datasets[0].data.push(a),e.labels.push(t.name),t.estimatedDuration&&(e.datasets[1].backgroundColor.push(t.color),e.datasets[1].data.push(t.estimatedDuration))}var ct=function(e){var t,a=e.settings,n=a.timeFormat24H,o=a.roundTo,s=a.bufferTimePercentage,i=P.round(P.add(e.currentTime,e.stats.timeNeeded),o),l=P.isBiggerThan(e.endTime,i,!1,!0);t=l?P.round(P.subtract(e.endTime,i,!0),o):P.round(P.subtract(i,e.endTime,!0),o);var c=0,u=0,d=0,p={datasets:[{label:"Actual",backgroundColor:[],data:[]},{label:"Planned",backgroundColor:[],data:[]}],labels:[]};e.projects.forEach(function(t){var a=parseInt(t.estimatedDuration);if("done"===t.state)c+=a,lt(p,t,a);else{var n=0;t.progress&&(n+=parseInt(t.progress)),"workingOnIt"===t.state&&t.startedWorkingOnIt&&(n+=P.subtractToMinutes(e.currentTime,t.startedWorkingOnIt,!0)),n>a&&(n=a),c+=n,u+=a-n,lt(p,t,n)}d+=Math.round(a*s)});var m=P.subtractToMinutes(e.currentTime,e.startTime,!0),h=P.subtractToMinutes(i,e.currentTime,!0),f=Math.round(100*c/m),g=Math.round(100*(c+u)/(m+h));lt(p,{name:"Unproductive time",color:"#aaa"},m-c);var E=!0,b=!1,v=void 0;try{for(var T,j=e.breaks[Symbol.iterator]();!(E=(T=j.next()).done);E=!0){var k=T.value;d+=P.subtractToMinutes(k.endTime,k.startTime,!0)}}catch(y){b=!0,v=y}finally{try{E||null==j.return||j.return()}finally{if(b)throw v}}return p.datasets[1].backgroundColor.push("#aaa"),p.datasets[1].data.push(d),r.a.createElement("div",{className:"TimeStatsModal"},r.a.createElement(U.a,{variant:"h6"},"You need ",P.makeFullLengthDurationString(e.stats.timeNeeded)),r.a.createElement("b",null,P.makeString(e.stats.totalProjectTime,!1,!1,n))," for projects",r.a.createElement("br",null),P.makeString(e.stats.totalBufferTime,!1,!1,n)," for buffers",r.a.createElement("br",null),P.makeString(e.stats.totalBreakTime,!1,!1,n)," for breaks",r.a.createElement("div",{className:"section"},"At the current pace, you'll be done at ",r.a.createElement("b",null,P.makeString(i,!0,!1,n)),r.a.createElement("br",null),"That's",r.a.createElement("b",null,r.a.createElement("span",null," "),P.makeFullLengthDurationString(t),r.a.createElement("span",null," "),l?"earlier":"later"),r.a.createElement("span",null," "),"than what you planned"),r.a.createElement("div",{className:"section"},"You've been productive ",r.a.createElement("b",null,f,"%")," of the time so far",r.a.createElement("br",null),"Assuming you're done at ",P.makeString(i,!0,!1,n),",",r.a.createElement("br",null),"your productivity percentage will be",r.a.createElement("span",null," "),g<f?r.a.createElement(Ze.a,{disableFocusListener:!0,disableTouchListener:!0,title:"Your predicted productivity percentage is lower then your current one because of buffer times.\n              You can learn more about buffer times in the about section."},r.a.createElement("b",null,g,"%")):r.a.createElement("b",null,g,"%")),r.a.createElement("div",{className:"section"},r.a.createElement(U.a,{variant:"h6"},"Your day so far:",r.a.createElement(Ze.a,{disableFocusListener:!0,disableTouchListener:!0,title:"The inner circle represents your day as you planned it,\n              the outer one represents your day so far\n              (starting at ".concat(P.makeString(e.startTime,!0,!1,n),")")},r.a.createElement(st.a,{className:"helperIcon"}))),r.a.createElement("div",null,r.a.createElement(it.a,{data:p,width:250,height:250,options:{maintainAspectRatio:!1,legend:{position:"bottom"}}}))))},ut=a(159),dt=a.n(ut),pt=(a(601),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).updateCurrentTime=function(){var e=new Date,t=e.getMinutes();if(a.setState({currentTimeAvailable:!0}),t!==a.props.currentTime.m||0===a.props.currentTime.h){var n=e.getHours(),r=n>=12;n=0===(n%=12)?12:n,a.props.onCurrentTimeChange({h:n,m:t,pm:r})}},a.openModal=function(){a.setState({modalOpen:!0})},a.state={currentTimeAvailable:!1,modalOpen:!1},a.currentTimeUpdateInterval=setInterval(a.updateCurrentTime,1e3),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateCurrentTime()}},{key:"componentWillUnmount",value:function(){clearInterval(this.currentTimeUpdateInterval)}},{key:"render",value:function(){var e,t,a,n,o,s,i,l,c=this;if(this.state.currentTimeAvailable&&this.props.settings.bufferTimePercentage){e=t=0,this.props.projects.forEach(function(a,n){if("done"!==a.state){var r=parseInt(a.estimatedDuration),o=parseInt(a.progress);"workingOnIt"===a.state&&a.startedWorkingOnIt&&(o+=P.subtractToMinutes(c.props.currentTime,a.startedWorkingOnIt,!0)),o&&(o>r?r=0:r-=o),e+=r,n!==c.props.projects.length-1&&(t+=Math.round(r*c.props.settings.bufferTimePercentage))}}),e=Math.round(e/this.props.settings.roundTo)*this.props.settings.roundTo,t=Math.round(t/this.props.settings.roundTo)*this.props.settings.roundTo,a=0;var u=!0,d=!1,p=void 0;try{for(var m,h=this.props.breaks[Symbol.iterator]();!(u=(m=h.next()).done);u=!0){var f=m.value,g=P.toMinutesSinceMidnight(f.endTime,!0),E=P.toMinutesSinceMidnight(this.props.currentTime,!0);if(!P.isBiggerThan(E,g,!1)){var b=P.toMinutesSinceMidnight(f.startTime,!0);P.isBiggerThan(b,E,!0)?a+=P.subtractToMinutes(g,b,!0):a+=P.subtractToMinutes(g,E,!0)}}}catch(v){d=!0,p=v}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}a=Math.round(a/this.props.settings.roundTo)*this.props.settings.roundTo,n=P.toTimeObject(P.addToMinutes(e,t,a),!1),o=P.subtract(this.props.endTime,this.props.currentTime,!0),s=P.isBiggerThan(n,o,!1,!1),l=(i=!P.isBiggerThan(o,0))&&""!==this.props.endTime.h&&""!==this.props.endTime.m}else e=t=a=0,n=o={h:0,m:0,pm:!1},s=i=l=!1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{item:!0,className:"timeStatsSideGridItem"+(s?" timeStatsWarning":"")},r.a.createElement(Ze.a,{title:"Projects: "+P.makeString(e,!1)+",\nBuffers: "+P.makeString(t,!1)+",\nBreaks: "+P.makeString(a,!1)+" (click for more)"},r.a.createElement("div",{onClick:this.openModal},r.a.createElement("div",{className:"timeStatsLabelDiv"},r.a.createElement("label",null,this.props.shortLabels?"N":"Time n","eeded:")),P.makeString(n,!1)))),r.a.createElement(W.a,{item:!0},r.a.createElement("h4",null,P.makeString(this.props.currentTime,!0,!1,this.props.settings.timeFormat24H))),r.a.createElement(W.a,{item:!0,className:"timeStatsSideGridItem"+(l?" timeStatsWarning":"")},r.a.createElement("div",{onClick:this.openModal},r.a.createElement("div",{className:"timeStatsLabelDiv"},r.a.createElement("label",null,this.props.shortLabels?"R":"Time r","emaining:")),i?"0:00":P.makeString(o,!1))),r.a.createElement(dt.a,{open:this.state.modalOpen,onClose:function(){c.setState({modalOpen:!1})},"aria-label":"Time Stats Modal"},r.a.createElement(ct,Object.assign({stats:{timeNeeded:n,totalProjectTime:e,totalBufferTime:t,totalBreakTime:a}},this.props))))}}]),t}(n.Component));function mt(e,t){for(var a,n=!1;!n;){a=Math.floor(Math.random()*Math.pow(10,8)),n=!0;for(var r=0;r<e.length;r++)if(e[r].id===a){n=!1;break}if(n){var o=["lastModified",t,a,"id"].join("_");isNaN(localStorage[o])||(n=!1)}}return a}a(603);var ht=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).validateEndTime=function(e,t,n){var r,o=a.state.temp,s=a.state.showEndTimeErrors;return P.isBiggerThan(n,t,!1,!0)?(r=!0,s[e]=!1,clearTimeout(o.showEndTimeErrors[e])):(r=!1,o.showEndTimeErrors[e]=setTimeout(function(){a.setState({showEndTimeErrors:Object(i.a)({},a.state.showEndTimeErrors,Object(m.a)({},e,!0))})},500)),a.setState({temp:o,showEndTimeErrors:s}),r},a.addBreak=function(){if(!a.state.showEndTimeErrors.new){var e=a.state.breaks,t=a.state.newBreak,n=mt(e,"breaks");t.id=n,e.push(t),a.setState({breaks:e}),a.props.onSave(e,{breaks:n});var r=a.state.breakDurations;r.new=30,r[n]=P.subtractToMinutes(t.endTime,t.startTime,!0),a.setState({newBreak:{startTime:P.add(t.endTime,90),endTime:P.add(t.endTime,120),name:""},breakDurations:r})}},a.handleSave=function(){a.props.onClose()},a.handleEnterPress=function(e){"Enter"===e.key&&a.addBreak()},a.handleEnterPressNew=function(e){"Enter"===e.key&&a.addBreak()},a.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{variant:"h6",className:"drawerTitle"},"Breaks:"),r.a.createElement(ue.a,{className:"BreaksDrawer"},r.a.createElement(he.a,null,r.a.createElement(ge.a,null,r.a.createElement(be.a,null,"Name (optional)"),r.a.createElement(be.a,null,"Start"),r.a.createElement(be.a,null,"End"),r.a.createElement(be.a,null))),r.a.createElement(pe.a,null,a.state.breaks.length?a.state.breaks.map(function(e,t){return r.a.createElement(ge.a,{key:e.id},r.a.createElement(be.a,null,r.a.createElement(y.a,{value:e.name,onChange:a.handleInputChange.bind(Object($.a)(Object($.a)(a)),e.id,"name"),onKeyPress:a.handleEnterPress})),r.a.createElement(be.a,null,r.a.createElement(R,{value:e.startTime,onChange:a.handleTimeInputChange.bind(Object($.a)(Object($.a)(a)),e.id,"startTime"),onEnterPress:a.handleSave})),r.a.createElement(be.a,null,r.a.createElement(R,{value:e.endTime,onChange:a.handleTimeInputChange.bind(Object($.a)(Object($.a)(a)),e.id,"endTime"),onEnterPress:a.handleSave,showError:a.state.showEndTimeErrors[e.id]})),r.a.createElement(be.a,null,r.a.createElement(b.a,{onClick:a.deleteBreak.bind(Object($.a)(Object($.a)(a)),e.id)},r.a.createElement(ae.a,null))))}):r.a.createElement(ge.a,null,r.a.createElement(be.a,{colSpan:4},"You haven't set any breaks")),r.a.createElement(ge.a,null,r.a.createElement(be.a,null,r.a.createElement(y.a,{value:a.state.newBreak.name,onChange:a.handleInputChange.bind(Object($.a)(Object($.a)(a)),"new","name"),onKeyPress:a.handleEnterPressNew})),r.a.createElement(be.a,null,r.a.createElement(R,{value:a.state.newBreak.startTime,onChange:a.handleTimeInputChange.bind(Object($.a)(Object($.a)(a)),"new","startTime"),onEnterPress:a.addBreak})),r.a.createElement(be.a,null,r.a.createElement(R,{value:a.state.newBreak.endTime,onChange:a.handleTimeInputChange.bind(Object($.a)(Object($.a)(a)),"new","endTime"),onEnterPress:a.addBreak,showError:a.state.showEndTimeErrors.new})),r.a.createElement(be.a,null,r.a.createElement(b.a,{color:"primary",onClick:a.addBreak},r.a.createElement(ie.a,null)))))),r.a.createElement(W.a,{container:!0,justify:"center"},r.a.createElement(G.a,{onClick:a.handleSave.bind(Object($.a)(Object($.a)(a))),variant:"contained",color:"primary",style:{margin:".5rem"}},"Save")))};var n=JSON.parse(JSON.stringify(e.breaks)),o={};n.length?(o.startTime=P.add(n[n.length-1].endTime,90),o.endTime=P.add(o.startTime,60)):(o.startTime=P.round(P.add(e.currentTime,90),15),o.endTime=P.add(o.startTime,60)),o.name="";for(var s={new:30},c=0;c<n.length;c++){s[n[c].id]=P.subtractToMinutes(n[c].endTime,n[c].startTime,!0)}return a.state={breaks:n,newBreak:o,breakDurations:s,errors:{},showEndTimeErrors:{},temp:{showEndTimeErrors:{}}},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e,t,a){var n=a.target.value;if("new"===e){var r=this.state.newBreak;r[t]=n,this.setState({newBreak:r})}else{var o=this.state.breaks,s=o.findIndex(function(t){return t.id===e});o[s][t]=n,this.setState({breaks:o}),this.props.onSave(o,{breaks:e})}}},{key:"handleTimeInputChange",value:function(e,t,a,n){if("new"===e){var r=this.state.newBreak,o=this.state.breakDurations;"object"===a?r[t]=n:r[t][a]=n,""!==n&&("startTime"===t&&(r.endTime=P.add(r.startTime,o.new)),"endTime"===t&&(this.validateEndTime(e,r.startTime,r.endTime),o.new=P.subtractToMinutes(r.endTime,r.startTime,!0))),this.setState({newBreak:r,breakDurations:o})}else{var s=this.state.breaks,i=this.state.breakDurations,l=s.findIndex(function(t){return t.id===e});"object"===a?s[l][t]=n:s[l][t][a]=n;var c=!0;""===n?c=!1:("startTime"===t&&(s[l].endTime=P.add(s[l].startTime,i[e])),"endTime"===t&&(c=this.validateEndTime(e,s[l].startTime,s[l].endTime),i[l]=P.subtractToMinutes(s[l].endTime,s[l].startTime,!0),this.setState({breakDurations:i})));var u=this.state.errors;u[e]=!c;var d=Object.values(u).every(function(e){return!e});this.setState({breaks:s,errors:u}),this.props.onSave(s,d,{breaks:e})}}},{key:"deleteBreak",value:function(e){var t=this.state.breaks,a=t.findIndex(function(t){return t.id===e});t.splice(a,1);var n=this.state.errors;delete n[e];var r=Object.values(n).every(function(e){return!e});this.setState({breaks:t,errors:n}),this.props.onSave(t,r,{breaks:e})}}]),t}(n.Component),ft=a(254),gt=a.n(ft),Et=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).responseGoogle=function(e){e.error?console.log(e):a.props.connect(e.tokenId)},a.render=function(){return r.a.createElement(gt.a,{clientId:"1070394852834-4nunul2jqv2pqn9du9ralgd61220d3c1.apps.googleusercontent.com",buttonText:"Sign In",onSuccess:a.responseGoogle,onFailure:a.responseGoogle,render:a.props.render})},a}return Object(p.a)(t,e),t}(n.Component),bt=a(124),vt=a.n(bt),Tt=a(55),jt=a.n(Tt),kt=(a(605),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleDismiss=function(e){a.props.showDontRemindMeAgain?a.setState({anchorEl:e.currentTarget}):a.props.dismiss()},a.closeDismissMenu=function(){a.setState({anchorEl:null})},a.state={anchorEl:null},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl;return r.a.createElement("div",{className:"signInPanel"},r.a.createElement(W.a,{className:"signInPanelContainer",container:!0,alignItems:"center",justify:"space-evenly"},r.a.createElement(W.a,null,"Sign in to sync your data between all your devices:"),r.a.createElement(W.a,null,r.a.createElement(Et,{connect:this.props.connect}))),r.a.createElement(b.a,{className:"dismissButton",onClick:this.handleDismiss,"aria-owns":t?"signInPanelDismissMenu":void 0},r.a.createElement(jt.a,null)),this.props.showDontRemindMeAgain&&r.a.createElement(vt.a,{id:"signInPanelDismissMenu",anchorEl:t,open:Boolean(t),onClose:this.closeDismissMenu},r.a.createElement(S.a,{onClick:function(){e.closeDismissMenu(),e.props.dismiss()}},"Remind me later"),r.a.createElement(S.a,{onClick:function(){e.closeDismissMenu(),e.props.dontRemindMeAgain()}},"Don't remind me again")))}}]),t}(n.Component)),yt=function(e){return r.a.createElement("svg",{width:"23px",height:"23px",viewBox:"11.5 11.5 23 23",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"btn_google_light_normal_ios"),r.a.createElement("desc",null,"Created with Sketch."),r.a.createElement("defs",null,r.a.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"filter-1"},r.a.createElement("feOffset",{dx:"0",dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),r.a.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),r.a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0",in:"shadowBlurOuter1",type:"matrix",result:"shadowMatrixOuter1"}),r.a.createElement("feOffset",{dx:"0",dy:"0",in:"SourceAlpha",result:"shadowOffsetOuter2"}),r.a.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter2",result:"shadowBlurOuter2"}),r.a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0",in:"shadowBlurOuter2",type:"matrix",result:"shadowMatrixOuter2"}),r.a.createElement("feMerge",null,r.a.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),r.a.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),r.a.createElement("feMergeNode",{in:"SourceGraphic"}))),r.a.createElement("rect",{id:"path-2",x:"0",y:"0",width:"40",height:"40",rx:"2"})),r.a.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -160.000000)"}),r.a.createElement("g",{id:"btn_google_light_normal",transform:"translate(-1.000000, -1.000000)"},r.a.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)",filter:"url(#filter-1)"},r.a.createElement("g",{id:"button-bg"},r.a.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd"}),r.a.createElement("use",{fill:"none"}),r.a.createElement("use",{fill:"none"}),r.a.createElement("use",{fill:"none"}))),r.a.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},r.a.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),r.a.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),r.a.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),r.a.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),r.a.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),r.a.createElement("g",{id:"handles_square"}))))},wt=(a(607),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).close=function(){a.setState({anchorEl:null})},a.about=function(){a.close(),a.props.history.push("/about")},a.signIn=function(e){a.close(),a.props.connect(e)},a.signOut=function(){a.close(),a.props.disconnect()},a.state={anchorEl:null},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{id:"dropdownMenuButton","aria-owns":t?"dropdownMenu":void 0,"aria-haspopup":"true",onClick:function(t){e.setState({anchorEl:t.currentTarget})}},r.a.createElement(Re.a,null)),r.a.createElement(vt.a,{id:"dropdownMenu",anchorEl:t,open:Boolean(t),onClose:this.close},r.a.createElement(S.a,{onClick:this.about},r.a.createElement(st.a,null),"About"),this.props.loggedIn?r.a.createElement(S.a,{onClick:this.signOut},r.a.createElement(jt.a,null),"Sign Out"):r.a.createElement(Et,{connect:this.signIn,render:function(e){return r.a.createElement(S.a,{onClick:e.onClick},r.a.createElement(yt,null),"Sign In")}})))}}]),t}(n.Component)),Ct=a(163),Ot=a.n(Ct),St=a(116),Pt=a.n(St),Dt=a(126),It=a.n(Dt),Mt=a(125),Nt=a.n(Mt);function Bt(e){var t=e.substr(1).split("&"),a={},n=!0,r=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var l=s.value.split("=");a[l[0]]=l[1]}}catch(c){r=!0,o=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}a(609);var At=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).setShowResetButton=function(){var e,t,n=new Date(localStorage.lastReset).getTime(),r=(n%=864e5)/1e3/60;if(!(e=P.isBiggerThan(r,a.props.currentTime,!1,!0))){var o=new Date(localStorage.lastReset),s=(a.props.data.settings.showResetButtonAfter,a.props.data.settings).showResetButtonAfter;o.setTime(o.getTime()+60*s*60*1e3),t=o<new Date}var i=(e||t)&&a.props.data.projects.length;a.setState({showResetButton:i})},a.addBreak=function(e,t){for(var n=a.props.data.breaks.slice(),r=0;r<n.length;r++)(P.isBiggerThan(t,n[r].startTime,!1,!0)&&P.isBiggerThan(n[r].startTime,e,!0,!0)||P.isBiggerThan(t,n[r].endTime,!1,!0)&&P.isBiggerThan(n[r].endTime,e,!0,!0))&&(n[r].autodetected?(P.isBiggerThan(e,n[r].startTime,!1,!0)&&(e=n[r].startTime),P.isBiggerThan(n[r].endTime,t,!0,!0)&&(t=n[r].endTime),n.splice(r,1)):e=n[r].endTime);var o=mt(n,"breaks");return n.push({id:o,name:"Auto "+(n.length+1),autodetected:!0,startTime:e,endTime:t}),a.props.update({breaks:n},{breaks:o}),n},a.handleEndTimeChange=function(e,t){var n=Object.assign({},a.props.data.endTime),r={showErrors:a.state.showErrors,temp:a.state.temp};"object"===e?n=t:n[e]=t,""===n.h||""===n.m||P.isBiggerThan(a.props.currentTime,n,!0,!0)?r.temp.endTimeErrorTimeout=setTimeout(function(){a.props.changeRouterShowErrors("endTime",!0)},250):(clearTimeout(r.temp.endTimeErrorTimeout),a.props.changeRouterShowErrors("endTime",!1)),r.endTime=n,a.setState(r),a.props.update({endTime:n})},a.handleRootKeyDown=function(e){a.props.data.settings.changeModeOnTab&&"Tab"===e.key&&!a.state.temp.openBreaksDrawer&&(e.preventDefault(),a.props.changeMode("planning"===a.props.data.mode?"working":"planning"))},a.handleCurrentTimeChange=function(e){a.props.onCurrentTimeChange(e),setTimeout(a.setShowResetButton)},a.resetState=function(){window.confirm("Are you sure you want to delete all your projects?")&&(a.props.update({projects:[],breaks:[],mode:"planning",productivityPercentage:void 0}),a.setState({showResetButton:!1}))},a.closeDrawer=function(e,t){if("undefined"===typeof a.state.temp["canClose"+e]||a.state.temp["canClose"+e]||window.confirm("Some of the ".concat(t," weren't editted properly. If you close this now, those changes will be lost"))){var n=a.state.temp;n["open"+e]=!1,n["canClose"+e]=void 0,"DefaultProjectsDrawer"===e&&(n.defaultProjectsDrawerRemoveTransform=!1),a.setState(n)}},a.saveBreaks=function(e,t,n){if("undefined"===typeof t||t){var r=a.props.data.projects.slice();a.props.data.projects.length&&(r=D(r,a.props.data.settings,e,a.props.data.startTime));var o=a.state.temp;"undefined"!==typeof t&&(o.canCloseBreaksDrawer=t),a.setState({temp:o}),a.props.update({projects:r,breaks:JSON.parse(JSON.stringify(e))},n)}else a.setState({temp:Object(i.a)({},a.state.temp,{canCloseBreaksDrawer:!1})})},a.handleSignInDismiss=function(){a.setState({temp:Object(i.a)({},a.state.temp,{signInDissmissed:!0})}),localStorage.userHasDismissedSignInBefore=!0,a.showSignInAgainTimeout=setTimeout(function(){a.setState({temp:Object(i.a)({},a.state.temp,{signInDissmissed:null})})},18e5)},a.handleSignInDontRemindMeAgain=function(){a.setState({temp:Object(i.a)({},a.state.temp,{signInDissmissed:null})}),localStorage.removeItem("userHasDismissedSignInBefore"),localStorage.dontShowSignInPanelAgain=!0},a.openDefaultProjectsDrawer=function(){a.setState({temp:Object(i.a)({},a.state.temp,{openDefaultProjectsDrawer:!0})}),setTimeout(function(){a.setState({temp:Object(i.a)({},a.state.temp,{defaultProjectsDrawerRemoveTransform:!0})})},400)},a.addBreak=function(e){var t=a.props.data.breaks,n=mt(t,"breaks");t.push(Object(i.a)({id:n},e)),a.props.update({breaks:t},{breaks:n})},a.state={showErrors:{},showResetButton:!1,temp:{dontShowSignInYet:!0}},a.showSignInPanelAfterLoadTimeout=setTimeout(function(){a.setState({temp:Object(i.a)({},a.state.temp,{dontShowSignInYet:!1})})},5e3),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){!Object.keys(e.data.settings).length&&Object.keys(this.props.data.settings).length&&this.setShowResetButton();var t,a,n=!1;if(this.props.data.projects.length){n=!0;for(var r=0;r<this.props.data.projects.length;r++)if("done"!==this.props.data.projects[r].state){n=!1;break}if(n){for(var o=0,s=0;s<this.props.data.projects.length;s++)o+=parseInt(this.props.data.projects[s].estimatedDuration);if(o>=60?a=P.makeString(P.toTimeObject(o,!1),!1):a+=" minutes",this.props.data.productivityPercentage)t=this.props.data.productivityPercentage;else{var i=P.subtractToMinutes(this.props.currentTime,this.props.data.startTime,!0);t=Math.round(100*o/i)}}}else n=!1;n!==this.state.allProjectsDone&&this.setState({allProjectsDone:n}),a!==this.state.totalTimeWorkedString&&this.setState({totalTimeWorkedString:a}),t===this.props.data.productivityPercentage||isNaN(t)&&"number"===typeof t||this.props.update({productivityPercentage:t})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.showSignInAgainTimeout),clearTimeout(this.showSignInPanelAfterLoadTimeout)}},{key:"addProject",value:function(e,t,a){this.props.changeRouterShowErrors("noProjects",!1);var n=this.props.data[e].slice(),r=this.props.data.settings,o=mt(n,"projects"),s={id:o,name:t.name,color:t.color,estimatedDuration:t.duration,state:"notStarted"};if("defaultProjects"!==e&&(s.plannedTime={start:t.startTime,end:P.add(t.startTime,t.duration)}),n.length&&"defaultProjects"!==e){var i=n[n.length-1];r.detectBreaksAutomatically&&P.isBiggerThan(t.startTime,P.suggestStartTime(i.plannedTime.end,i.estimatedDuration,r),!1,!0)&&this.addBreak(i.plannedTime.end,t.startTime)}n.push(s);var l=Object(m.a)({},e,n);"undefined"!==typeof a&&(l["projects"===e?"defaultColorIndex":"defaultColorIndexDefaultProjects"]=a);1===n.length&&"defaultProjects"!==e&&(l.startTime=n[0].plannedTime.start),this.props.update(l,Object(m.a)({},e,o))}},{key:"deleteProject",value:function(e,t){var a=this.props.data[e].slice(),n=this.props.data.settings,r=a.findIndex(function(e){return e.id===parseInt(t)});n.updateTimesAfterDelete&&0===r&&a[1]&&"defaultProjects"!==e&&(a[1].plannedTime.start=a[0].plannedTime.start),a.splice(r,1),n.updateTimesAfterDelete&&"defaultProjects"!==e&&(a=D(a,n,this.props.data.breaks,this.props.data.startTime));var o=Object(m.a)({},e,a);a.length||"defaultProjects"===e||(o.breaks=[]),this.props.update(o,Object(m.a)({},e,t))}},{key:"handleColorChange",value:function(e,t,a){var n=this.props.data[e].slice(),r=n.findIndex(function(e){return e.id===parseInt(t)}),o=Object.assign({},n[r]);n.splice(r,1),o.color=a,n.splice(r,0,o),this.props.update(Object(m.a)({},e,n),{projects:t})}},{key:"handleDragEnd",value:function(e,t){if(this.setState({temp:Object(i.a)({},this.state.temp,{dragging:!1})}),t.destination){var a=t.draggableId,n=t.destination.index,r=[];this.props.data[e].forEach(function(t){var a=Object.assign({},t);"defaultProjects"!==e&&(a.plannedTime=JSON.parse(JSON.stringify(t.plannedTime))),r.push(a)});var o,s=r.findIndex(function(e){return e.id===parseInt(a)}),l=r[s];if(n!==s)"defaultProjects"!==e&&(o=r[0].plannedTime.start),r.splice(s,1),r.splice(n,0,l),this.props.data.settings.updateTimesAfterDrag&&"defaultProjects"!==e&&(r[0].plannedTime.start=o,r=D(r,this.props.data.settings,this.props.data.breaks,this.props.data.startTime)),this.props.update(Object(m.a)({},e,r))}}},{key:"handleDoneEditingProject",value:function(e,t,a){var n=this.props.data[e].slice(),r=this.props.data.breaks,o=this.props.data.settings,s=n.findIndex(function(e){return e.id===parseInt(t)});if(!(s<0)){var i,l,c,u={};if(Object.keys(n[s]).forEach(function(e){u[e]=n[s][e]}),"defaultProjects"===e||u.estimatedDuration===a.duration&&P.areIdentical(u.plannedTime.start,a.startTime)||(u.plannedTime=Object.assign({},u.plannedTime)),n.splice(s,1),o.detectBreaksAutomatically&&0!==s&&"defaultProjects"!==e&&P.isBiggerThan(a.startTime,u.plannedTime.start,!1,!0)&&(r=this.addBreak(P.suggestStartTime(n[s-1].plannedTime.end,n[s-1].estimatedDuration,o),a.startTime)),o.detectBreaksAutomatically&&0!==s&&"defaultProjects"!==e&&P.isBiggerThan(u.plannedTime.start,a.startTime,!1,!0))for(var d=0;d<r.length;d++)r[d].autodetected&&P.areIdentical(u.plannedTime.start,r[d].endTime)&&(r[d].endTime=a.startTime);if("defaultProjects"!==e&&(i=parseInt(u.estimatedDuration)!==parseInt(a.duration),l=!P.areIdentical(u.plannedTime.start,a.startTime)),u.name=a.name,u.estimatedDuration=a.duration,"defaultProjects"!==e&&(u.plannedTime.start=a.startTime),n.splice(s,0,u),this.props.data.settings.updateTimesAfterEdit&&(i||l)){for(var p=s+1;p<n.length;p++)n[p]=Object.assign({},n[p]),n[p].plannedTime=Object.assign({},n[p].plannedTime);var h=0===s?a.startTime:Object.assign({},this.props.data.startTime);n=D(n,o,r,h)}else c=Object(m.a)({},e,t),"defaultProjects"!==e&&(n[s].plannedTime.end=P.add(n[s].plannedTime.start,n[s].estimatedDuration));var f=Object(m.a)({},e,n);0!==s||"defaultProjects"===e||P.areIdentical(this.props.data.startTime,u.plannedTime.start)||(f.startTime=u.plannedTime.start),this.props.update(f,c)}}},{key:"handleProjectStateChange",value:function(e,t,a){var n=this.props.data.projects.slice(),r=n.findIndex(function(t){return t.id===parseInt(e)}),o=Object.assign({},n[r]);n.splice(r,1),o.state=t,"paused"!==t||isNaN(parseInt(a))||(o.progress=a),"workingOnIt"===t&&(o.startedWorkingOnIt=this.props.currentTime);var s={projects:[e]};n.map(function(a,r){return"workingOnIt"===t&&"workingOnIt"===a.state&&a.id!==e?(n[r]=Object(i.a)({},a,{state:"paused"}),s.projects.push(a.id),n[r]):a}),n.splice(r,0,o),this.props.update({projects:n},s)}},{key:"changeView",value:function(e,t,a){if(t){var n="/"+e;if(a&&"function"!==typeof a.stopPropagation){n+="?";for(var r=!0,o=Object.entries(a),s=0;s<o.length;s++){var i=o[s],l=Object(g.a)(i,2);r?r=!1:n+="&",n+=l[0]+"="+l[1]}}this.props.history.push(n)}else{var c=this.props.history.location.pathname.split("/");c.splice(-1,1),this.props.history.push(c.join("/"))}}},{key:"handleDoneEditingBreak",value:function(e,t){var a=this.props.data.breaks.slice(),n=a.findIndex(function(t){return t.id===parseInt(e)});if(!(n<0)){var r=JSON.parse(JSON.stringify(a[n]));r.name=t.name,r.startTime=t.startTime,r.endTime=t.endTime,a.splice(n,1,r),this.props.update({breaks:a},{breaks:e})}}},{key:"deleteBreak",value:function(e){var t=this.props.data.breaks,a=t.findIndex(function(t){return t.id===parseInt(e)});t.splice(a,1),this.props.update({breaks:t},{breaks:e})}},{key:"render",value:function(){var e=this;if("/add"===this.props.history.location.pathname){var t,a,n,o,s=Bt(this.props.location.search);switch(s.type){case"default":a="defaultProjects",t="Add a repetitive project",n=this.changeView.bind(this,"defaultProjects",!0),o=this.props.data.defaultColorIndexDefaultProjects;break;case"break":a="breaks",t="Add a break",n=this.changeView.bind(this,"breaks",!0);break;default:a="projects",n=this.changeView.bind(this,"add",!1),o=this.props.data.defaultColorIndex}return r.a.createElement(ee,{settings:this.props.data.settings,defaultColorIndex:o,showErrors:this.state.showErrors,currentTime:this.props.currentTime,lastProject:this.props.data.projects[this.props.data.projects.length-1],onAddProject:this.addProject.bind(this,a),onAddBreak:this.addBreak,type:s.type,close:n,title:t})}if("/edit"===this.props.history.location.pathname&&this.props.data.breaks){var l,c,u=Bt(this.props.location.search),d=u.type;switch(d){case"default":l="defaultProjects",c=this.changeView.bind(this,"defaultProjects",!0);break;case"break":l="breaks",c=this.changeView.bind(this,"breaks",!0);break;default:l="projects",c=this.changeView.bind(this,"edit",!1)}var p=u.id,m=this.props.data[l],f=m.findIndex(function(e){return e.id.toString()===p}),g=m[f];if(g){var E,b,v={name:g.name};return"default"!==d&&(v.startTime=g.plannedTime?g.plannedTime.start:g.startTime),"break"===d?v.endTime=g.endTime:(v.duration=g.estimatedDuration,v.color=g.color),"break"===d?(E=this.deleteBreak.bind(this,p),b=this.handleDoneEditingBreak.bind(this,p)):(E=this.deleteProject.bind(this,l,p),b=this.handleDoneEditingProject.bind(this,l,p)),r.a.createElement(ne,{settings:this.props.data.settings,inputValues:v,delete:E,onDoneEditing:b,close:c,type:d})}}if("/breaks"===this.props.history.location.pathname&&this.props.data.breaks)return r.a.createElement(je,{breaks:this.props.data.breaks,changeView:this.changeView.bind(this)});if("/defaultProjects"===this.props.history.location.pathname&&this.props.data.defaultProjects)return r.a.createElement(at,{projects:this.props.data.defaultProjects,settings:this.props.data.settings,defaultColorIndex:this.props.data.defaultColorIndexDefaultProjects,useDefaultProjects:this.props.data.useDefaultProjects,onColorChange:this.handleColorChange.bind(this,"defaultProjects"),onDoneEditing:this.handleDoneEditingProject.bind(this,"defaultProjects"),onAddProject:this.addProject.bind(this,"defaultProjects"),onDeleteProject:this.deleteProject.bind(this,"defaultProjects"),onDragEnd:this.handleDragEnd.bind(this,"defaultProjects"),onUseDefaultProjectsChange:function(t){e.props.update({useDefaultProjects:t.target.checked})},startEditingMobile:function(t){e.changeView("edit",!0,{type:"default",id:t})},changeView:this.changeView.bind(this)});var T=this.state,j=T.allProjectsDone,k=T.totalTimeWorkedString,y=this.props.data.productivityPercentage,w=Object(i.a)({},this.props.showErrors,this.state.showErrors);return r.a.createElement(L.Consumer,null,function(t){return r.a.createElement(W.a,{className:"container",onKeyDown:e.handleRootKeyDown,tabIndex:"0"},!t&&r.a.createElement(nt,{mode:e.props.data.mode,onModeChange:e.props.changeMode},r.a.createElement(pt,{currentTime:e.props.currentTime,onCurrentTimeChange:e.handleCurrentTimeChange,endTime:e.props.data.endTime,projects:e.props.data.projects,breaks:e.props.data.breaks,settings:e.props.data.settings,startTime:e.props.data.startTime})),r.a.createElement(W.a,{container:!0},r.a.createElement(x.Provider,{value:e.props.data.settings},r.a.createElement(rt,{mode:e.props.data.mode,projects:e.props.data.projects,settings:e.props.data.settings,currentTime:e.props.currentTime,defaultColorIndex:e.props.data.defaultColorIndex,showErrors:w,onColorChange:e.handleColorChange.bind(e,"projects"),onDoneEditing:e.handleDoneEditingProject.bind(e,"projects"),onAddProject:e.addProject.bind(e,"projects"),onProjectStateChange:e.handleProjectStateChange.bind(e),onDeleteProject:e.deleteProject.bind(e,"projects"),onDragEnd:e.handleDragEnd.bind(e,"projects"),startEditingMobile:function(t){e.changeView("edit",!0,{id:t})}}),"planning"===e.props.data.mode?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"setEndTime"},r.a.createElement("label",{htmlFor:"endTimeHoursInput"},t?"End time":"Time when you want to stop working",":"),r.a.createElement(R,{onChange:e.handleEndTimeChange,value:e.props.data.endTime,firstInputId:"endTimeHoursInput",showError:w.endTime})),r.a.createElement(W.a,{container:!0,justify:"space-around"},!t&&r.a.createElement(W.a,null,r.a.createElement(G.a,{className:"planningSecondaryButton",onClick:function(){e.setState({temp:Object(i.a)({},e.state.temp,{openBreaksDrawer:!0})})},style:{marginBottom:"1rem"}},r.a.createElement(Ie.a,{color:"primary"}),"Edit breaks")),r.a.createElement(W.a,null,r.a.createElement(G.a,{onClick:function(){e.props.changeMode("working")},variant:"contained",color:"primary"},r.a.createElement(We.a,null),"Let's get to work!")),!t&&r.a.createElement(W.a,null,r.a.createElement(G.a,{className:"planningSecondaryButton",onClick:e.openDefaultProjectsDrawer,style:{marginBottom:"1rem"}},r.a.createElement(Nt.a,{color:"primary"}),"Repetitive projects"))),r.a.createElement(Ot.a,{id:"BreaksDrawer",anchor:"bottom",open:e.state.temp.openBreaksDrawer&&!t,onClose:function(){e.closeDrawer("BreaksDrawer","breaks")}},r.a.createElement(ht,{breaks:e.props.data.breaks,currentTime:e.props.currentTime,onSave:e.saveBreaks,onClose:function(){e.closeDrawer("BreaksDrawer","breaks")}})),r.a.createElement(Ot.a,{className:e.state.temp.defaultProjectsDrawerRemoveTransform?"defaultProjectsDrawerRemoveTransform":null,anchor:"bottom",open:e.state.temp.openDefaultProjectsDrawer&&!t,onClose:function(){e.closeDrawer("DefaultProjectsDrawer","projects")}},r.a.createElement(tt,{projects:e.props.data.defaultProjects,settings:e.props.data.settings,defaultColorIndex:e.props.data.defaultColorIndexDefaultProjects,useDefaultProjects:e.props.data.useDefaultProjects,onClose:function(){e.closeDrawer("DefaultProjectsDrawer","projects")},onColorChange:e.handleColorChange.bind(e,"defaultProjects"),onDoneEditing:e.handleDoneEditingProject.bind(e,"defaultProjects"),onAddProject:e.addProject.bind(e,"defaultProjects"),onDeleteProject:e.deleteProject.bind(e,"defaultProjects"),onDragEnd:e.handleDragEnd.bind(e,"defaultProjects"),onUseDefaultProjectsChange:function(t){e.props.update({useDefaultProjects:t.target.checked})},startEditingMobile:function(t){e.changeView("edit",!0,{id:t})}}))):j&&r.a.createElement("div",{id:"congratsDiv"},r.a.createElement("span",{id:"congrats"},"CONGRATULATIONS!"),r.a.createElement("br",null),"You got ",k," worth of work done",r.a.createElement("br",null),y>=0&&y<=100&&r.a.createElement("span",null,"You were productive ",y,"% of the time")),e.state.showResetButton&&r.a.createElement(W.a,{container:!0,justify:"flex-end",alignItems:"flex-end",style:{marginTop:"2rem"}},r.a.createElement(G.a,{id:"resetButton",onClick:e.resetState,variant:"contained"},"Reset")))),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.Link,{id:"linkToSettings",to:"/settings","aria-label":"Settings",title:"Settings"},r.a.createElement(It.a,null)),r.a.createElement(wt,{connect:e.props.connect,disconnect:e.props.disconnect,history:e.props.history,loggedIn:e.props.loggedIn})),r.a.createElement(Pt.a,{direction:"right",in:!e.props.loggedIn&&!e.state.temp.dontShowSignInYet&&!e.state.temp.signInDissmissed&&!localStorage.dontShowSignInPanelAgain&&!e.props.disconnected,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(kt,{connect:e.props.connect,dismiss:e.handleSignInDismiss,showDontRemindMeAgain:localStorage.userHasDismissedSignInBefore,dontRemindMeAgain:e.handleSignInDontRemindMeAgain})),t&&"planning"===e.props.data.mode&&r.a.createElement(le,{onClick:e.changeView.bind(e,"add",!0)}))})}}]),t}(n.Component),xt=function(e){return function(t){function a(t){var n;return Object(l.a)(this,a),(n=Object(u.a)(this,Object(d.a)(a).call(this,t))).addDefaultColor=function(){var e=n.state.defaultColors,t="#"+(16777216*Math.random()).toString(16).substr(0,6);e.push(t),n.setState({defaultColors:e})},n.save=function(){"function"===typeof n.props.save&&n.props.save(n.state.defaultColors)},n.render=function(){return r.a.createElement(e,Object.assign({},n.props,{onDefaultColorChange:n.handleDefaultColorChange.bind(Object($.a)(Object($.a)(n))),addDefaultColor:n.addDefaultColor,removeDefaultColor:n.removeDefaultColor.bind(Object($.a)(Object($.a)(n))),save:n.save}))},n.state={},n}return Object(p.a)(a,t),Object(c.a)(a,[{key:"componentDidUpdate",value:function(){"undefined"===typeof this.state.defaultColors&&this.props.settings&&this.setState({defaultColors:this.props.settings.defaultColors})}},{key:"handleDefaultColorChange",value:function(e,t){var a=this.state.defaultColors;a[e]=t,this.setState({defaultColors:a})}},{key:"removeDefaultColor",value:function(e){var t=this.state.defaultColors;t.splice(e,1),this.setState({defaultColors:t})}}]),a}(n.Component)},Lt=(a(617),{general:{order:0,label:"General settings",icon:"settings"},detection:{order:1,label:"Automatic detection",icon:"search"},misc:{order:2,label:"Miscellaneous",icon:"menu"}}),Rt={timeFormat24H:{label:"Use the 24-hour time format",type:"boolean",section:"general",order:0,icon:"timer"},bufferTimePercentage:{label:"Bufffer time percentage",type:"percentage",max:1,tooltip:"Buffer times are short breaks inserted after each project. Their length depends on the length of the project before them. This field determines what percentage of the previous project's duration the buffer will be.",section:"general",order:1,icon:"view_week"},showResetButtonAfter:{label:"Show reset button after (hours)",type:"int",section:"misc",order:3,icon:"restore"},defaultColors:{label:"Default colors:",type:"colors",section:"misc",order:0,icon:"invert_colors"},updateTimesAfterDrag:{label:"Adjust planned times after changing the order of projects",type:"boolean",section:"detection",order:0,icon:"swap_vert"},updateTimesAfterEdit:{label:"Adjust planned times after editing a project",type:"boolean",section:"detection",order:1,icon:"edit"},updateTimesAfterDelete:{label:"Adjust planned times after deleting a project",type:"boolean",section:"detection",order:2,icon:"delete"},roundTo:{label:"Round to (minutes)",type:"int",section:"misc",order:2,icon:"access_time"},changeModeOnTab:{label:"Change mode when the Tab key is pressed",type:"boolean",section:"misc",order:1,icon:"redo"},detectBreaksAutomatically:{label:"Detect breaks automatically",type:"boolean",section:"detection",order:3,icon:"pause"}},Ft=xt(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).save=function(){for(var e=a.state.inputs,t=Object.keys(e),n=0;n<t.length;n++)if(Rt[t[n]]&&"percentage"===Rt[t[n]].type&&"%"===e[t[n]]){var r=a.state.showErrors;return r[t[n]]=!0,void a.setState({showErrors:r})}a.props.update({settings:e}),a.props.history.push("/")},a.resetToDefault=function(){window.confirm("Are you sure you want to reset your settings back to default?")&&(a.setState({inputs:a.props.defaultSettings}),a.props.update({settings:a.props.defaultSettings}))},a.state={inputs:a.props.settings,showErrors:{}},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){!Object.keys(this.state.inputs).length&&this.props.settings&&this.setState({inputs:this.props.settings})}},{key:"handleInputChange",value:function(e,t){var a="boolean"===Rt[e].type?t.target.checked:t.target.value;switch(Rt[e].type){case"int":if(isNaN(a)&&""!==a)return;break;case"percentage":var n=a.split("%")[0];if(""!==n&&(a=n/100),isNaN(a)&&"%"!==a)return}if(!("undefined"!==typeof Rt[e].max&&a>Rt[e].max)){var r={inputs:this.state.inputs,showErrors:this.state.showErrors};r.inputs[e]=a,r.showErrors[e]=!1,this.setState({newState:r})}}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.inputs).sort(function(e,t){var a=Rt[e].section,n=Rt[t].section,r=Lt[a].order,o=Lt[n].order;return r!==o?r>o?1:-1:Rt[e].order>Rt[t].order?1:-1}),a=t.map(function(a,n){var o;if("defaultColors"===a)o=r.a.createElement(ge.a,{key:n},r.a.createElement(be.a,{className:"iconCell"},r.a.createElement(Ge.a,null,Rt[a].icon)),r.a.createElement(be.a,null,"Default colors:"),r.a.createElement(L.Consumer,null,function(t){return t?r.a.createElement(be.a,{className:"value"},r.a.createElement(h.Link,{to:"/settings/defaultColors","aria-label":"Set default colors"},r.a.createElement(G.a,{variant:"outlined"},"Set"))):r.a.createElement(be.a,{id:"defaultColorsCell",className:"value"},e.state.inputs.defaultColors.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(F,{value:t,onChange:e.props.onDefaultColorChange.bind(e,a)}),r.a.createElement("div",{className:"removeDefaultColorDiv"},r.a.createElement(b.a,{"aria-label":"Remove the color",className:"removeDefaultColor",disableRipple:!0,onClick:e.props.removeDefaultColor.bind(e,a)},r.a.createElement(Ge.a,null,"remove"))))}),r.a.createElement(b.a,{id:"addDefaultColor","aria-label":"Add a new default color",onClick:e.props.addDefaultColor},r.a.createElement(Ge.a,null,"add")))}),r.a.createElement(be.a,{className:"rightCell"}));else{if(!Rt[a])return console.warn(a+"is not a property of inputInfo"),r.a.createElement("div",null);o=r.a.createElement(ge.a,{key:n},r.a.createElement(be.a,{className:"iconCell"},r.a.createElement(Ge.a,null,Rt[a].icon)),r.a.createElement(be.a,null,Rt[a].label,Rt[a].tooltip&&r.a.createElement(Ze.a,{title:Rt[a].tooltip,disableFocusListener:!0,disableTouchListener:!0},r.a.createElement(Ge.a,{className:"tooltipIcon"},"help")),":"),r.a.createElement(be.a,{className:"value"},"boolean"===Rt[a].type?r.a.createElement(et.a,{color:"primary",checked:e.state.inputs[a],onChange:e.handleInputChange.bind(e,a),"aria-label":Rt[a].label}):r.a.createElement(y.a,{value:"percentage"===Rt[a].type&&"%"!==e.state.inputs[a]?100*e.state.inputs[a]+"%":e.state.inputs[a],onChange:e.handleInputChange.bind(e,a),error:e.state.showErrors[a],"aria-label":Rt[a].label})),r.a.createElement(be.a,{className:"rightCell"}))}return n&&Rt[a].section===Rt[t[n-1]].section?o:r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(ge.a,null,r.a.createElement(be.a,{className:"sectionIconCell"},r.a.createElement(Ge.a,null,Lt[Rt[a].section].icon)),r.a.createElement(be.a,{colSpan:3},r.a.createElement(U.a,{variant:"h5",style:{paddingTop:"2.5rem"}},Lt[Rt[a].section].label,":"))),o)});return r.a.createElement("div",{className:"Settings container"},r.a.createElement(ue.a,null,r.a.createElement(pe.a,null,a.map(function(e){return e}),r.a.createElement(ge.a,null,r.a.createElement(be.a,{colSpan:4},r.a.createElement(W.a,{container:!0,alignItems:"baseline",justify:"space-around"},r.a.createElement(W.a,null,r.a.createElement(G.a,{onClick:this.save,variant:"contained",color:"primary"},"Save")),r.a.createElement(W.a,null,r.a.createElement(G.a,{onClick:this.resetToDefault,variant:"contained"},"Reset to default"))))))))}}]),t}(n.Component)),Vt=(a(619),function(e){return r.a.createElement("div",{className:"container"},r.a.createElement(U.a,{variant:"h4",className:"h-1"},"Welcome to Mind Your Time"),r.a.createElement("p",{className:"summary"},"Mind Your Time is a platform that aims to tackle a complex issue in a simplistic way"),r.a.createElement("p",null,"Do you ever have trouble realistically planning out your day and then actually executing the plan?",r.a.createElement("br",null),"Mind Your Time is here to help."),r.a.createElement("p",null,"The idea here is simple. Plan your day and then check if you're still on schedule. Write down when you're gonna do what and how long it's gonna take. Then periodically check if you're making the progress you should be making."),r.a.createElement("p",null,"Like I said, the idea is simple but if you truly follow it, I promise your productivity will skyrocket. Starting right now."),r.a.createElement("p",null,"It seems easy but if you've ever really tried doing it, you probably know it isn't. There are a ton of distractions. All the time. That is why we're introducing buffer times."),r.a.createElement("div",{id:"#bufferTimes"},r.a.createElement(U.a,{variant:"h5",className:"h-2"},"Buffer Times"),r.a.createElement("p",{className:"summary"},"Buffer times are essential to making a realistic plan"),r.a.createElement("p",null,"You may have noticed that whenever you set out to do something, something else always comes up and requires your full attention. Like your cat walking over your keyboard. Or your coffee mug spilling. Or a billion other things that you simply cannot foresee. By the time you come back, your entire day's plan is thrown into disarray."),r.a.createElement("p",null,"In order to be truly productive, you need to expect the unexpected. We take care of that for you."),r.a.createElement("p",null,"Buffer times are the solution. They are short breaks that we automatically insert after each planned project. Their length is proportional to the length of the previous project - about 20% of the project's length by default. (Note that this can be changed in the settings) These little breaks in your schedule aren't primarily meant as breaks though. Instead, their job is to compansate for the distractions that happen while you're working on the previous project. Ideally when you actually execute your plan, these little breaks should disappear. However, if they don't feel free to rest for a little while - whatever works for you."),r.a.createElement("p",null,"Of course if you feel like you need more breaks in your schedule, you can insert them in using our breaks editor. You could also increase the buffer time percentage in the settings but note that this comes at a price - a slight but measurable decrease in productivity. On the other hand, if you want to aim for even higher productivity, you can decrease the percentage but then you run the risk of your plan being too ideallistic and falling apart."),r.a.createElement("p",null,"At the end of the day, your buffer times need to be balanced and that balance can only be accomplished by trial and error. So feel free to experiment with the percentage if you feel it can make the app work better for you.")),r.a.createElement("div",{id:"#aboutMe"},r.a.createElement(U.a,{variant:"h5",className:"h-2"},"About me"),r.a.createElement("p",null,"I've experimented with a lot of different productivity/time-management systems over the years. At the end I developed a fairly simple system - writing down what I want to do today and when exactly I wanna do it. Sounds simple, I know, but it truly improved my productivity by a lot. The problem was that I couldn't find an app to use for this so I just had write it down on my whiteboard. (Yes, I actually have a whiteboard in my bedroom. Go ahead, judge me.)"),r.a.createElement("p",null,"This was pretty annoying so of course: I'm the kind of guy that needs everything on a screen so I didn't do it every day. And so a while later, I decided to create Mind Your Time. At first, it was just as a way off to show my skills to employers and organize my own time, only later did I realize that it could actually be really useful to other people as well."),r.a.createElement("p",null,"I really hope you find this app useful and that it helps you with whatever you set out to do. If you find any problems, get an idea for a new feature you'd like to see or just want to send me anything at all, here's my contact info:"),r.a.createElement("div",{id:"#contact"},r.a.createElement(U.a,{variant:"h6"},"Contact"),r.a.createElement("a",{href:"https://goo.gl/forms/jdesExEMegbkLPjp2",target:"_blank",rel:"noopener noreferrer"},"Feedback form")," (you can submit feedback here or via email, whichever you prefer)",r.a.createElement("br",null),"Email: ",r.a.createElement("a",{href:"mailto:michaelfarnik@gmail.com"},"michaelfarnik@gmail.com"),r.a.createElement("br",null),"GitHub: ",r.a.createElement("a",{href:"https://github.com/michaloslav"},"Michael Farn\xedk"),r.a.createElement("br",null),"LinkedIn: ",r.a.createElement("a",{href:"https://www.linkedin.com/in/michael-farn%C3%ADk-13002b168/"},"Michael Farn\xedk"))))}),Wt=a(256),Ht=a.n(Wt),Kt=xt(function(e){return r.a.createElement("div",{className:"SettingsDefaultColors container"},r.a.createElement(j,{onClick:function(){e.history.push("/settings/")}}),r.a.createElement(ue.a,null,r.a.createElement(he.a,null,r.a.createElement(ge.a,null,r.a.createElement(be.a,{colSpan:2},r.a.createElement(U.a,{variant:"h6"},"Default colors:")))),r.a.createElement(pe.a,null,e.settings.defaultColors&&e.settings.defaultColors.map(function(t,a){return r.a.createElement(ge.a,{key:a},r.a.createElement(be.a,null,r.a.createElement(F,{value:t,onChange:e.onDefaultColorChange.bind(void 0,a),xl:!0})),r.a.createElement(be.a,null,r.a.createElement(G.a,{"aria-label":"Remove the color",className:"removeDefaultColor",disableRipple:!0,onClick:e.removeDefaultColor.bind(void 0,a)},r.a.createElement(Ht.a,null),"Remove")))}),r.a.createElement(ge.a,null,r.a.createElement(be.a,{colSpan:2},r.a.createElement(W.a,{container:!0,justify:"space-around"},r.a.createElement(G.a,{onClick:e.addDefaultColor,variant:"outlined",color:"primary"},r.a.createElement(ie.a,null),"Add"),r.a.createElement(G.a,{onClick:function(){e.save(),e.history.push("/settings/")},variant:"outlined",color:"primary"},"Save")))))))}),_t=function(e){return r.a.createElement(h.Link,{className:"LinkToRoot",to:"/","aria-label":"Back"},r.a.createElement(T.a,null))},Ut=a(77),Yt=a.n(Ut),Jt=a(76),Gt=a.n(Jt),zt=a(260),Zt=a.n(zt),qt=a(257),$t=a.n(qt),Qt=a(261),Xt=a.n(Qt),ea=a(258),ta=a.n(ea),aa=a(259),na=a.n(aa),ra=(a(621),function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).signIn=function(e){a.props.close(),a.props.connect(e)},a.signOut=function(){a.props.close(),a.props.disconnect()},a.togglePlanningCollapse=function(e){e.stopPropagation(),a.setState({planningCollapseOpen:!a.state.planningCollapseOpen}),a.props.setNavbarState({planningCollapseOpenExplicit:!0})},a.checkActive=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("/"===a.props.location.pathname)e=a.props.mode;else{var n=a.props.location.pathname.split("/")[1];if("add"===n||"edit"===n)switch(Bt(a.props.location.search).type){case"default":e="defaultProjects";break;case"break":e="breaks";break;default:e="planning"}else e=n}var r="planning"===e||"breaks"===e||"defaultProjects"===e;if(t)return{active:e,planningCollapseOpen:r};var o={};e!==a.state.active&&(o.active=e),r===a.state.planningCollapseOpen||a.props.planningCollapseOpenExplicit||(o.planningCollapseOpen=r),Object.keys(o).length&&a.setState(o)},a.render=function(){return r.a.createElement(Be.a,null,r.a.createElement(xe.a,{button:!0,onClick:a.modeSwitch.bind(Object($.a)(Object($.a)(a)),"planning")},r.a.createElement(Gt.a,null,r.a.createElement($t.a,{color:"planning"===a.state.active?"primary":void 0})),r.a.createElement(Yt.a,{primary:"Planning"}),r.a.createElement(b.a,{onClick:a.togglePlanningCollapse,style:{padding:0}},a.state.planningCollapseOpen?r.a.createElement(ta.a,null):r.a.createElement(na.a,null))),r.a.createElement(Zt.a,{in:a.state.planningCollapseOpen,timeout:"auto",unmountOnExit:!0},r.a.createElement(Be.a,{component:"div",disablePadding:!0},[{title:"Breaks",icon:r.a.createElement(Ie.a,{color:"breaks"===a.state.active?"primary":void 0}),onClick:a.navigate.bind(Object($.a)(Object($.a)(a)),"breaks")},{title:"Repetitive projects",icon:r.a.createElement(Nt.a,{color:"defaultProjects"===a.state.active?"primary":void 0}),onClick:a.navigate.bind(Object($.a)(Object($.a)(a)),"defaultProjects")}].map(function(e){return r.a.createElement(xe.a,{key:e.title,button:!0,onClick:e.onClick,style:{paddingLeft:"2rem"}},r.a.createElement(Gt.a,{children:e.icon}),r.a.createElement(Yt.a,{inset:!0,primary:e.title}))}))),[{title:"Working",icon:r.a.createElement(Xt.a,{color:"working"===a.state.active?"primary":void 0}),onClick:a.modeSwitch.bind(Object($.a)(Object($.a)(a)),"working")},{title:"Settings",icon:r.a.createElement(It.a,{color:"settings"===a.state.active?"primary":void 0}),onClick:a.navigate.bind(Object($.a)(Object($.a)(a)),"settings")},{title:"About",icon:r.a.createElement(st.a,{color:"about"===a.state.active?"primary":void 0}),onClick:a.navigate.bind(Object($.a)(Object($.a)(a)),"about")}].map(function(e){return r.a.createElement(xe.a,{key:e.title,button:!0,onClick:e.onClick},r.a.createElement(Gt.a,{children:e.icon}),r.a.createElement(Yt.a,{primary:e.title}))}),a.props.loggedIn?r.a.createElement(xe.a,{button:!0,onClick:a.signOut},r.a.createElement(Gt.a,null,r.a.createElement(jt.a,null)),r.a.createElement(Yt.a,{primary:"Sign Out"})):r.a.createElement(Et,{connect:a.signIn,render:function(e){return r.a.createElement(xe.a,{button:!0,onClick:e.onClick},r.a.createElement(Gt.a,null,r.a.createElement(yt,null)),r.a.createElement(Yt.a,{primary:"Sign In"}))}}))};var n=a.checkActive(!0);return a.state=Object(i.a)({planningCollapseOpen:!1},n),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;this.state.checkActiveTimeout||this.setState({checkActiveTimeout:setTimeout(function(){e.checkActive(),e.setState({checkActiveTimeout:null})},500)})}},{key:"componentWillUnmount",value:function(){var e=this.state.checkActiveTimeout;clearTimeout(e),this.setState({checkActiveTimeout:e})}},{key:"navigate",value:function(e){this.props.history.push("/"+e),this.props.close()}},{key:"modeSwitch",value:function(e){this.props.changeMode(e),"/"!==this.props.location.pathname&&this.props.history.push("/"),this.props.close()}}]),t}(n.Component)),oa=Object(f.k)(ra),sa=a(262),ia=a.n(sa),la=a(263),ca=a.n(la),ua=a(264),da=a.n(ua),pa=(a(626),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).open=function(){a.setState({drawerOpen:!0})},a.close=function(){a.setState({drawerOpen:!1,planningCollapseOpenExplicit:!1})},a.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ia.a,{id:"Navbar"},r.a.createElement(ca.a,null,r.a.createElement(b.a,{id:"openDrawerMenuButton","aria-label":"Menu",onClick:a.state.drawerOpen?a.close:a.open},r.a.createElement(Re.a,null)),r.a.createElement(W.a,{id:"TimeStatsContainer",container:!0,alignItems:"baseline",justify:"space-between"},r.a.createElement(pt,{currentTime:a.props.currentTime,onCurrentTimeChange:a.props.onCurrentTimeChange,endTime:a.props.data.endTime,projects:a.props.data.projects,breaks:a.props.data.breaks,settings:a.props.data.settings,startTime:a.props.data.startTime,shortLabels:!0})))),r.a.createElement(da.a,{id:"DrawerMenu",open:a.state.drawerOpen,onOpen:a.open,onClose:a.close},r.a.createElement(oa,{connect:a.props.connect,disconnect:a.props.disconnect,loggedIn:a.props.loggedIn,mode:a.props.data.mode,changeMode:a.props.changeMode,setNavbarState:a.setState.bind(Object($.a)(Object($.a)(a))),close:a.close,planningCollapseOpenExplicit:a.state.planningCollapseOpenExplicit})))},a.state={drawerOpen:!1,planningCollapseOpenExplicit:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){setTimeout(this.checkActive,500)}}]),t}(n.Component)),ma=a(265),ha=function(e){return r.a.createElement("footer",null,"Created by ",r.a.createElement("a",{href:"https://github.com/michaloslav"},"Michael Farn\xedk"),r.a.createElement("span",null," | "),r.a.createElement("a",{href:"https://goo.gl/forms/jdesExEMegbkLPjp2",target:"_blank",rel:"noopener noreferrer"},"Feedback"),r.a.createElement("span",null," | "),r.a.createElement(ma.HashLink,{to:"/about#contact"},"Contact"),r.a.createElement("div",null,"Icon made by ",r.a.createElement("a",{href:"https://www.flaticon.com/authors/kiranshastry",title:"Kiranshastry",target:"_blank",rel:"noopener noreferrer"},"Kiranshastry")," from ",r.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon",target:"_blank",rel:"noopener noreferrer"},"www.flaticon.com")," is licensed by ",r.a.createElement("a",{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank",rel:"noopener noreferrer"},"CC 3.0 BY")))},fa={timeFormat24H:!1,bufferTimePercentage:.2,showResetButtonAfter:16,defaultColors:["#4BFFD1","#39FF00","#E8A60C","#FF4848","#290CE8"],updateTimesAfterDrag:!0,updateTimesAfterEdit:!0,updateTimesAfterDelete:!0,roundTo:5,changeModeOnTab:!1,detectBreaksAutomatically:!0},ga=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).AppWithProps=function(e){return r.a.createElement(At,Object.assign({data:a.props.data,connect:a.props.connect,changeMode:a.changeMode,update:a.props.update,disconnect:a.props.disconnect,loggedIn:a.props.loggedIn,disconnected:a.props.disconnected,currentTime:a.state.currentTime,showErrors:a.state.showErrors,changeRouterShowErrors:a.changeShowErrors,onCurrentTimeChange:function(e){a.setState({currentTime:e})}},e))},a.SettingsWithProps=function(e){return r.a.createElement(Ft,Object.assign({settings:Object.assign({},a.props.data.settings),defaultSettings:fa,update:a.props.update},e))},a.SettingsDefaultColorsWithProps=function(e){return r.a.createElement(Kt,Object.assign({settings:Object.assign({},a.props.data.settings),save:function(e){a.props.update({settings:Object(i.a)({},a.props.data.settings,{defaultColors:e})})}},e))},a.changeMode=function(e){if("working"===e){if(""===a.props.data.endTime.h||""===a.props.data.endTime.m)return void a.changeShowErrors("endTime",!0);if(!a.props.data.projects.length)return void a.changeShowErrors("noProjects",!0)}a.props.update({mode:e})},a.changeShowErrors=function(e,t){a.setState({showErrors:Object(i.a)({},a.state.showErrors,Object(m.a)({},e,t))})},a.state={width:window.innerWidth,currentTime:{h:0,m:0,pm:!0,defaultVal:!0},showErrors:{}},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;window.addEventListener("resize",function(){e.setState({width:window.innerWidth})})}},{key:"render",value:function(){var e=this,t=this.state.width<660;return r.a.createElement(h.BrowserRouter,null,r.a.createElement("div",null,t?r.a.createElement(pa,{data:this.props.data,connect:this.props.connect,changeMode:this.changeMode,disconnect:this.props.disconnect,loggedIn:this.props.loggedIn,currentTime:this.state.currentTime,onCurrentTimeChange:function(t){e.setState({currentTime:t})}}):r.a.createElement(f.g,null,r.a.createElement(f.d,{path:"/(|add|edit|breaks|defaultProjects)",exact:!0}),r.a.createElement(f.d,{component:_t})),r.a.createElement(L.Provider,{value:t},r.a.createElement(f.g,null,r.a.createElement(f.d,{path:"/settings/defaultColors/",render:this.SettingsDefaultColorsWithProps}),r.a.createElement(f.d,{path:"/settings/",render:this.SettingsWithProps}),r.a.createElement(f.d,{path:"/about/",component:Vt}),r.a.createElement(f.d,{path:"/robots.txt",target:"_self"}),r.a.createElement(f.d,{path:"/(|add|edit|breaks|defaultProjects)",exact:!0,render:this.AppWithProps}),r.a.createElement(f.d,{render:function(){return r.a.createElement(f.c,{to:"/"})}}))),t?r.a.createElement(f.d,{path:"/about/",component:ha}):r.a.createElement(ha,null)))}}]),t}(n.Component),Ea=a(268),ba=a.n(Ea),va=a(160),Ta=a.n(va),ja=a(266),ka=a(270),ya=a(61),wa=a(267),Ca=a.n(wa),Oa=new ka.a,Sa=Object(ya.createMuiTheme)({palette:{primary:{main:"#039be5"},secondary:Ca.a},typography:{useNextVariants:!0}}),Pa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).connect=function(e){if(a.io.disconnected)a.setState({temp:Object(i.a)({},a.state.temp,{showDisconnectedError:!0})});else{var t=a.state,n={projects:t.projects,breaks:t.breaks,defaultProjects:t.defaultProjects,settings:t.settings,startTime:t.startTime,endTime:t.endTime,mode:t.mode,defaultColorIndex:t.defaultColorIndex,defaultColorIndexDefaultProjects:t.defaultColorIndexDefaultProjects,lastReset:t.lastReset,useDefaultProjects:t.useDefaultProjects,lastModified:t.lastModified};a.state.productivityPercentage&&(n.productivityPercentage=a.state.productivityPercentage),a.idToken=e,a.io.emit("connectInit",{type:"OAuth",idToken:e,localData:n})}},a.disconnect=function(){if(window.confirm("Are you sure you want to sign out?")){if(a.io.disconnected)return void a.setState({temp:Object(i.a)({},a.state.temp,{showDisconnectedError:!0})});a.io.emit("disconnectU",{accessToken:Oa.get("accessToken")})}},a.update=function(e,t){if(e.projects&&!e.projects.length&&a.state.projects.length){if(e.useDefaultProjects||a.state.useDefaultProjects){e.projects=a.state.defaultProjects;var n=e.settings||a.state.settings,r=P.add(60*(new Date).getHours()+(new Date).getMinutes(),10);r=P.round(r,n.roundTo),e.projects=D(e.projects,n,[],r),e.projects.forEach(function(t){t.id=mt(e.projects,"projects")}),e.startTime=r}else e.projects=[];e.breaks=[],e.lastReset=new Date,e.productivityPercentage=void 0,a.setState({lastModified:Object(i.a)({},a.state.lastModified,{projects:{},breaks:{}})}),a.deleteObjectsLocalStorage("lastModified_projects_"),a.deleteObjectsLocalStorage("lastModified_breaks_")}for(var o=["projects","defaultProjects"],s=0;s<o.length;s++){var l=o[s];e[l]&&e[l].forEach(function(e,t){e.order=t})}var c={};Object.keys(e).forEach(function(n){switch(n){case"projects":c.projects=a.setMultipleLastModified(e.projects,t?t.projects:void 0,"projects");break;case"breaks":c.breaks=a.setMultipleLastModified(e.breaks,t?t.breaks:void 0,"breaks");break;case"defaultProjects":c.defaultProjects=a.setMultipleLastModified(e.defaultProjects,t?t.defaultProjects:void 0,"defaultProjects");break;case"settings":c.settings=a.state.lastModified&&a.state.lastModified.settings?a.state.lastModified.settings:{},Object.keys(e.settings).forEach(function(t){e.settings[t]!==a.state.settings[t]&&(c.settings[t]=new Date,localStorage["lastModified_settings_"+t]=c.settings[t])});break;default:c[n]=new Date,localStorage["lastModified_"+n]=c[n]}}),e.lastModified=Object(i.a)({lastReset:a.state.lastModified.lastReset},c),a.setState(e);for(var u=Object.keys(e),d=0;d<u.length;d++){var p=u[d];"lastModified"!==p&&("object"===typeof e[p]&&"lastReset"!==p?localStorage[p]=JSON.stringify(e[p]):localStorage[p]=e[p])}a.state.accessToken&&(a.io.disconnected?a.setState({temp:Object(i.a)({},a.state.temp,{updatedWhileDisconnected:!0})}):a.io.emit("update",{accessToken:a.state.accessToken,data:e}))},a.closeSnackbar=function(){a.setState({temp:Object(i.a)({},a.state.temp,{showDisconnectedError:!1})})},a.setLastModified=function(e,t,n,r){if(!e){r={id:new Date};var o=["lastModified",n,t,"id"].join("_");return localStorage[o]=r.id,a.deleteObjectsLocalStorage(["lastModified",n,t,""].join("_"),o),r}r||(r={});var s=a.state[n].findIndex(function(e){return e.id===t});return Object.keys(e).forEach(function(o){if(!a.state[n][s]||("object"===typeof e[o]?!a.areIdenticalObjects(e[o],a.state[n][s][o]):e[o]!==a.state[n][s][o])){r[o]=new Date;var i=["lastModified",n,t,o].join("_");localStorage[i]=r[o]}}),r},a.setMultipleLastModified=function(e,t,n){var r=a.state.lastModified[n];return r||(r={}),t?("object"!==typeof t&&(t=[t]),t.forEach(function(t){var o=e.findIndex(function(e){return e.id===parseInt(t)}),s=e[o];r[t]=a.setLastModified(s,t,n,r[t])})):e.forEach(function(e,t){var o=e.id;r[o]=a.setLastModified(e,o,n,r[o])}),r},a.deleteObjectsLocalStorage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=Object.keys(localStorage),n=[];a.forEach(function(a){a.startsWith(e)&&a!==t&&n.push(a)}),n.forEach(function(e){localStorage.removeItem(e)})},a.handleUpdateFromServer=function(e){console.log(e),a.setState(Object(i.a)({},e,{lastModified:Object(i.a)({},a.state.lastModified,e.lastModified)})),Object.keys(e).forEach(function(t){"lastModified"===t?Object.keys(e.lastModified).forEach(function(t){"projects"===t||"breaks"===t||"defaultProjects"===t?Object.keys(e.lastModified[t]).forEach(function(a){Object.keys(e.lastModified[t][a]).forEach(function(n){var r=["lastModified",t,a,n].join("_");localStorage[r]=e.lastModified[t][a][n]})}):localStorage["lastModified_"+t]=e.lastModified[t]}):"object"===typeof e[t]?localStorage[t]=JSON.stringify(e[t]):localStorage[t]=e[t]})},a.areIdenticalObjects=function(e,t){if(!t)return!1;var n;n=Array.isArray(e)?Array.keys(e):Object.keys(e);var r=!0,o=!1,s=void 0;try{for(var i,l=n[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value;if("object"===typeof e[c]){if(!a.areIdenticalObjects(e[c],t[c]))return!1;if(e[c]!==t[c])return!1}}}catch(u){o=!0,s=u}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}return!0},a.state={projects:[],settings:{},lastModified:{},temp:{}},a.io=ja.connect("https://mind-your-time-server.herokuapp.com"),setTimeout(function(){if(a.io.disconnected){console.warn("Can't connect to server");var e=a.state.temp;e.disconnected=!0,a.state.accessToken&&(e.showDisconnectedError=!0),a.setState({temp:e})}},100),a.io.on("connect",function(e){if(!a.state.temp.successfulConnectInit&&a.state.temp.disconnected&&a.state.accessToken){var t=a.state.temp.updatedWhileDisconnected?a.getData():{};a.io.emit("connectInit",{type:"accessToken",accessToken:a.state.accessToken,localData:t})}var n=a.state.temp;n.disconnected=!1,n.showDisconnectedError=!1,clearTimeout(n.showDisconnectedErrorTimeout),a.setState({temp:n})}),a.io.on("disconnect",function(e){var t=a.state.temp;t.disconnected=!0,a.state.accessToken&&(t.showDisconnectedErrorTimeout=setTimeout(function(){a.setState({temp:Object(i.a)({},a.state.temp,{showDisconnectedError:!0})})},1500)),a.setState({temp:t})}),a.io.on("success",function(e){"connectInsert"!==e.type&&"connectUpdate"!==e.type||(Oa.set("accessToken",e.accessToken,{path:"/"}),a.setState({accessToken:e.accessToken,temp:Object(i.a)({},a.state.temp,{successfulConnectInit:!0})})),"disconnect"===e.type&&(Oa.remove("accessToken"),a.setState({accessToken:void 0}))}),a.io.on("errorU",function(e){console.warn("error",e),"invalidAccessToken"===e.type&&(Oa.remove("accessToken"),a.setState({accessToken:void 0}))}),a.io.on("connectUpdate",a.handleUpdateFromServer),a.io.on("update",a.handleUpdateFromServer),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={projects:[],breaks:[],defaultProjects:[],settings:fa,startTime:{h:2,m:"00",pm:!0},endTime:{h:9,m:"00",pm:!0},mode:"planning",defaultColorIndex:0,defaultColorIndexDefaultProjects:0,productivityPercentage:void 0,useDefaultProjects:!0},a={};["projects","breaks","defaultProjects","settings","startTime","endTime"].forEach(function(e){try{a[e]=JSON.parse(localStorage[e])}catch(n){a[e]=t[e]}}),["mode","defaultColorIndex","defaultColorIndexDefaultProjects","productivityPercentage","useDefaultProjects"].forEach(function(e){a[e]=localStorage[e]?localStorage[e]:t[e]});for(var n=Object.keys(localStorage),r=0;r<n.length;r++){var o=n[r];if(o.startsWith("lastModified_")){for(var s=o.split("_"),i=s.length,l=a,c=0;c<i-1;c++)s[c]in l||(l[s[c]]={}),l=l[s[c]];l[s[i-1]]=new Date(localStorage[o])}}this.setState(a),function(t){setTimeout(function(){var a=Oa.get("accessToken");a&&(e.io.disconnected?e.setState({accessToken:a}):e.io.emit("connectInit",{type:"accessToken",accessToken:a,localData:t}))},5)}.call(this,a)}},{key:"getData",value:function(){var e=this,t={};return Object.keys(this.state).forEach(function(a){"accessToken"!==a&&"temp"!==a&&"lastModified"!==a&&(t[a]=e.state[a])}),t}},{key:"render",value:function(){var e=this.getData();return r.a.createElement(ya.MuiThemeProvider,{theme:Sa},r.a.createElement(ga,{data:e,connect:this.connect,update:this.update,disconnect:this.disconnect,loggedIn:Boolean(this.state.accessToken),disconnected:this.state.temp.disconnected}),r.a.createElement(ba.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.temp.showDisconnectedError,autoHideDuration:6e3,onClose:this.closeSnackbar},r.a.createElement(Ta.a,{style:{backgroundColor:"#d32f2f"},"aria-describedby":"disconnectedErrorSnackbar",message:r.a.createElement("span",{id:"disconnectedErrorSnackbar"},"We're having trouble reaching our server"),action:[r.a.createElement(b.a,{key:"close","aria-label":"Close",color:"inherit",styles:{padding:".5rem"},onClick:this.closeSnackbar},r.a.createElement(jt.a,null))]})))}}]),t}(n.Component),Da=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ia(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(r.a.createElement(Pa,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Da?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ia(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Ia(t,e)})}}()}},[[272,2,1]]]);
//# sourceMappingURL=main.a849aae6.chunk.js.map
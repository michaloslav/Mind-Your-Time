{"version":3,"sources":["util/TimeCalc.js","LoadingFallback.js","_Context.js","util/makeNewId.js","util/defaultValues.js","ErrorBoundary.js","Router.js","util/objectUtil.js","util/correctDataStructure.js","util/dataValidation.js","DataSync.js","serviceWorker.js","index.js"],"names":["TimeCalc","time","result","keepPositiveIfCrossingMidnight","arguments","length","undefined","parseInt","isNaN","console","warn","parsedH","h","m","pm","s","this","isBiggerThan","minutes","setPm","Number","isInteger","Math","round","times","Array","isArray","resultInMinutes","i","toMinutesSinceMidnight","toTimeObject","addToMinutes","apply","time1","time2","subtractToMinutes","showPmOrAm","convert0To12EvenIfNotShowingPmOrAm","timeFormat24H","string","precision","timeInMinutes","orEqual","difference","temp","argument","toString","previousEndTime","previousDuration","settings","exactStartTime","add","bufferTimePercentage","roundTo","sum","average","setTimesForProjects","projects","breaks","startTime","JSON","parse","stringify","middleTimes","plannedTime","start","end","endTime","suggestStartTime","estimatedDuration","j","projectOverlapAreaStart","breakIsInFirstHalf","lengthOfBreak","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_md_spinner__WEBPACK_IMPORTED_MODULE_1__","LoadingFallback","props","a","createElement","singleColor","d","__webpack_exports__","SettingsContext","IsMobileContext","React","createContext","makeNewId","objects","key","newId","haveFoundUniqueId","floor","random","pow","id","localStorageKey","join","localStorage","defaultSettings","defaultDataValues","showResetButtonAfter","defaultColors","updateTimesAfterDrag","updateTimesAfterEdit","updateTimesAfterDelete","changeModeOnTab","detectBreaksAutomatically","adjustDurationOnPause","offerToAdjustDurationOnDone","darkTheme","defaultProjects","mode","defaultColorIndex","defaultColorIndexDefaultProjects","productivityPercentages","useDefaultProjects","lastReset","lastModified","realEndTime","ErrorBoundary","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","hasError","error","Sentry","dsn","react_default","style","textAlign","color","className","href","target","rel","Fragment","children","Component","App","lazy","Promise","all","e","then","bind","Settings","About","SettingsDefaultColors","LinkToRoot","Navbar","Footer","_default","AppWithProps","assign","data","connect","changeMode","update","disconnect","loggedIn","disconnected","currentTime","showErrors","changeRouterShowErrors","changeShowErrors","onCurrentTimeChange","setState","SettingsWithProps","SettingsDefaultColorsWithProps","save","objectSpread","val","defineProperty","width","window","innerWidth","defaultVal","_this2","addEventListener","_this3","isMobile","react_router_dom","Suspense","fallback","devUnlocked","react_router","path","exact","component","_Context","Provider","value","render","to","mergeObjects","oldData","newData","mergedData","_arr","entries","_i","_ref3","_ref2","slicedToArray","getTime","oldVal","numberOptional","type","number","required","boolean","timeObjectOptional","properties","timeObject","date","isDate","array","elements","object","projectBaseline","name","order","settingsStructure","correctDataStructure_i","correctDataStructure_arr","_ref5","correctDataStructure_ref2","typeofVal","lastModifiedStructure","primitivesInLastModified","projectBaselineKeys","keys","objectsInLastModified","toConsumableArray","concat","correctDataStructure_i2","correctDataStructure_i3","correctDataStructure_arr2","correctDataStructure_ref6","correctDataStructure_ref4","correctDataStructure_iteratorNormalCompletion","correctDataStructure_didIteratorError","correctDataStructure_iteratorError","correctDataStructure_step","correctDataStructure_iterator","Symbol","iterator","next","done","property","err","return","__any__","correctDataStructure","startedWorkingOnIt","progress","autodetected","days","getCorrectDataStructureSection","warningMessage","reduce","section","validatePrimitive","correctDataStructureSection","expectedType","actualType","Date","parseFloat","validateObject","correctedVal","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","el","push","_ref7","_ref4","objKey","objVal","keyToPass","__lastModifiedSysNote","_arr2","_i2","_ref8","_ref6","propertyKey","propertyValToSet","log","dataValidation","correctedData","_arr3","_i3","_ref11","_ref10","newLastModifiedItems","lastModifiedSysNoteToDates","sysNote","forEach","_ref","lightTheme","createMuiTheme","palette","primary","main","secondary","green","typography","useNextVariants","DataSync","idToken","io","showDisconnectedError","_this$state","localData","accessToken","objectWithoutProperties","emit","confirm","changes","dayOfTheWeek","getDay","defProj","projectToInsert","getHours","getMinutes","project","setLastModifiedOfAllProjects","toISOString","deleteObjectsLocalStorage","arrId","setMultipleLastModified","updatedWhileDisconnected","lastModifiedToSend","closeSnackbar","setLastModified","objectId","stateObjectIndex","findIndex","areIdenticalObjects","obj1","obj2","changedIds","changedId","index","changedObject","startsWithString","except","localStorageKeys","relevantKeys","startsWith","removeItem","handleUpdateFromServer","lastModifiedKey","_arr4","_loop","objectIdKey","_i4","dateString","_arr5","_i5","settingsKey","checkForUpdates","SocketIOClient","setTimeout","on","successfulConnectInit","_this$state2","clearTimeout","showDisconnectedErrorTimeout","_arr6","_i6","pathArray","split","pathLength","lastModifiedObj","_this$state3","styles","theme","position","onFocus","CssBaseline_default","Router_default","Boolean","Snackbar_default","anchorOrigin","vertical","horizontal","open","autoHideDuration","onClose","SnackbarContent_default","backgroundColor","aria-describedby","message","action","IconButton_default","aria-label","padding","onClick","Close_default","isLocalhost","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","ErrorBoundary_ErrorBoundary","DataSync_DataSync","document","getElementById","URL","process","origin","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.80edbc7c.chunk.js","sourcesContent":["export default class TimeCalc {\r\n  static toMinutesSinceMidnight(time, keepPositiveIfCrossingMidnight = false){\r\n    let result\r\n\r\n    switch(typeof time){\r\n      // if it's a number, simply return it\r\n      case \"number\":\r\n        result = time\r\n        break;\r\n      // if it's a string, try to parse it\r\n      case \"string\":\r\n        result = parseInt(time)\r\n        if(isNaN(result)){\r\n          console.warn(\"Unexpected input: \", time)\r\n          return\r\n        }\r\n        break;\r\n      case \"object\":\r\n        // handle time.h === 12 (only if pm is set - allows us to count with an amout of time too)\r\n        let parsedH = parseInt(time.h)\r\n        if(parsedH === 12 && \"pm\" in time) parsedH -= 12\r\n\r\n        result = parsedH * 60 + parseInt(time.m)\r\n        if(time.pm) result += 12 * 60\r\n\r\n        if(time.s) result += time.s / 60\r\n\r\n        break;\r\n      // if the typeof is none of the above, throw a warning\r\n      default:\r\n        console.warn(\"Unexpected input: \", time)\r\n        return\r\n    }\r\n\r\n    if(keepPositiveIfCrossingMidnight &&\r\n      this.isBiggerThan(time, 0, true) &&\r\n      this.isBiggerThan(5*60, time, true)\r\n    ) result += 24*60\r\n\r\n    return result\r\n  }\r\n\r\n  // TimeObject is an object with properties h, m, and pm\r\n  static toTimeObject(minutes, setPm = true){\r\n    if(!Number.isInteger(minutes)) minutes = Math.round(minutes) // handle floats\r\n\r\n    // check for am/pm\r\n    let pm = false\r\n    if(setPm){\r\n      while(minutes >= 24 * 60){\r\n        minutes -= 24*60\r\n      }\r\n      if(minutes >= 12 * 60){\r\n        pm = true\r\n        minutes -= 12*60\r\n      }\r\n    }\r\n\r\n    // split hours and minutes\r\n    let m = minutes % 60\r\n    let h = (minutes - m) / 60\r\n\r\n    if(isNaN(h) || isNaN(m)) console.warn(\"NaN result: \", {h, m, pm}) // check for NaN\r\n\r\n    if(setPm) return {h, m, pm}\r\n    else return {h, m}\r\n  }\r\n\r\n  // add and return resultInMinutes\r\n  // used internally\r\n  static addToMinutes(){\r\n    // make both an array input and a spread input acceptable\r\n    let times = Array.isArray(arguments[0]) ? arguments[0] : arguments\r\n\r\n    // convert to minutes and add them up\r\n    let resultInMinutes = 0\r\n    for(let i = 0; i < times.length; i++){\r\n      resultInMinutes += this.toMinutesSinceMidnight(times[i])\r\n    }\r\n\r\n    // accept floats but only return ints\r\n    if(Number.isInteger(resultInMinutes)) return resultInMinutes\r\n    else return Math.round(resultInMinutes)\r\n  }\r\n\r\n  static add(){\r\n    return this.toTimeObject(this.addToMinutes(...arguments))\r\n  }\r\n\r\n  // subtract and return resultInMinutes\r\n  // used internally in subtract and isBiggerThan\r\n  static subtractToMinutes(time1, time2, keepPositiveIfCrossingMidnight = false){\r\n    let mins1 = this.toMinutesSinceMidnight(time1, keepPositiveIfCrossingMidnight)\r\n    let mins2 = this.toMinutesSinceMidnight(time2, keepPositiveIfCrossingMidnight)\r\n    let resultInMinutes = mins1 - mins2\r\n\r\n    // accept floats but return ints\r\n    if(Number.isInteger(resultInMinutes)) return resultInMinutes\r\n    else return Math.round(resultInMinutes)\r\n  }\r\n\r\n  static subtract(time1, time2, keepPositiveIfCrossingMidnight = false){\r\n    let resultInMinutes = this.subtractToMinutes(time1, time2, keepPositiveIfCrossingMidnight)\r\n\r\n    return this.toTimeObject(resultInMinutes, false)\r\n  }\r\n\r\n  // creates a string representation of time (in minutes or as a TimeObject)\r\n  static makeString(time, showPmOrAm = true, convert0To12EvenIfNotShowingPmOrAm = false, timeFormat24H = false){\r\n\r\n    // handle a number input\r\n    if(typeof time === \"number\") time = this.toTimeObject(time, showPmOrAm)\r\n\r\n    let h, m\r\n\r\n    if(timeFormat24H) showPmOrAm = false\r\n\r\n    if(typeof time.m === \"string\") time.m = parseInt(time.m) // handle string input\r\n    if(time.s && time.s > 29) time.m = parseInt(time.m) + 1 // hande time.s\r\n    m = time.m >= 10 ? time.m : \"0\" + time.m // show eg. 6:05, not 6:5\r\n\r\n    // show eg. 12:30, not 0:30 (not applicable for durations)\r\n    h = ((showPmOrAm || convert0To12EvenIfNotShowingPmOrAm) && time.h === 0) ? 12 : parseInt(time.h)\r\n\r\n    // if the user wants a 24-hour time format, use it\r\n    if(timeFormat24H && time.pm) h += 12\r\n\r\n    // handle NaN\r\n    if(isNaN(m)){\r\n      console.warn(\"Wrong input to makeString: \", time);\r\n      return\r\n    }\r\n\r\n    // create and return the actual string\r\n    let string = h + \":\" + m\r\n    if(typeof time.pm !== \"undefined\" && showPmOrAm){\r\n      let pmOrAm = time.pm ? \"PM\" : \"AM\"\r\n      string += \" \" + pmOrAm\r\n    }\r\n    return string\r\n  }\r\n\r\n  static round(time, precision){\r\n    let timeInMinutes = this.toMinutesSinceMidnight(time)\r\n\r\n    // round the minutes\r\n    timeInMinutes = Math.round(timeInMinutes / precision) * precision\r\n\r\n    return this.toTimeObject(timeInMinutes)\r\n  }\r\n\r\n  static isBiggerThan(time1, time2, orEqual = true, keepPositiveIfCrossingMidnight = false){\r\n    let difference = this.subtractToMinutes(time1, time2, keepPositiveIfCrossingMidnight)\r\n    if(orEqual) return difference >= 0\r\n    else return difference > 0\r\n  }\r\n\r\n  // check if all the arguments are identical\r\n  static areIdentical(){\r\n    let temp\r\n\r\n    for(let i = 0; i < arguments.length; i++){\r\n      let argument = arguments[i]\r\n\r\n      // handle NaN\r\n      if(isNaN(argument.h)) argument.h = argument.h.toString()\r\n      if(isNaN(argument.m)) argument.m = argument.m.toString()\r\n\r\n      // handle string input\r\n      if(typeof argument.h === \"string\") argument.h = parseInt(argument.h)\r\n      if(typeof argument.m === \"string\") argument.m = parseInt(argument.m)\r\n\r\n      // if temp is empty -> this is the first argument, store the first temp\r\n      if(!temp){\r\n        temp = argument\r\n        continue\r\n      }\r\n\r\n      // if the temp and the current argument are not identical, return false\r\n      if(argument.h !== temp.h || argument.m !== temp.m || argument.pm !== temp.pm) return false\r\n\r\n      // store the current argument as the new temp\r\n      temp = argument\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  // suggest a start time based on the previous project and the bufferTimePercentage\r\n  static suggestStartTime(previousEndTime, previousDuration, settings){\r\n    let exactStartTime = this.add(previousEndTime, previousDuration * settings.bufferTimePercentage)\r\n\r\n    // round the startTime to the nearest 5 and return\r\n    return this.round(exactStartTime, settings.roundTo)\r\n  }\r\n\r\n  static average(){\r\n    let sum = this.addToMinutes(...arguments)\r\n\r\n    let average = Math.round(sum / arguments.length)\r\n\r\n    return this.toTimeObject(average)\r\n  }\r\n\r\n  // turns eg. {h: 6, m: 30} into \"6 hours and 30 minutes\"\r\n  static makeFullLengthDurationString(time){\r\n    let h = parseInt(time.h)\r\n    let m = parseInt(time.m)\r\n    if(time.pm) h += 12\r\n\r\n    let string = \"\"\r\n    if(h) string += h + \" hour\"\r\n    if(h > 1) string += \"s\"\r\n    if(h && m) string += \" and \"\r\n    if(m) string += m + \" minute\"\r\n    if(m > 1) string += \"s\"\r\n    if(!h && !m) string = \"0 minutes\"\r\n\r\n    return string\r\n  }\r\n}\r\n\r\n// takes ordered projects and sets appropriate times for each of them\r\nexport function setTimesForProjects(projects, settings, breaks, startTime){\r\n\r\n  // PSEUDO CODE: //\r\n  // determine if a project and a break overlay\r\n    // project.startTime < break.startTime && project.endTime > break.startTime\r\n  // prioritize perserving break length or start and end times?\r\n  // project 9:30-11:00, break 10:30-11:00 -> move break to 11:00-11:30\r\n  // project 9:30-10:30, break 9:50-10:00 -> move break to 9:30-9:40, move project to 9:40-10:40\r\n  // first determine if the break is in the first or second half of the project\r\n    // compare the middle of the break to the middle of the project\r\n  // if in the first, move the break to before the project, set project startTime = break[i].endTime\r\n  // if the second, move the break to after the project, set startTime of the next project to break[i].endTime\r\n\r\n  // break the reference to this.state.breaks\r\n  breaks = JSON.parse(JSON.stringify(breaks))\r\n\r\n  // calculate middleTimes beforehand to avoid multiple executions of the same code (-> improves performance)\r\n  if(breaks.length){\r\n    var middleTimes = {projects: [], breaks: []}\r\n    for(let i = 0; i < projects.length; i++) middleTimes.projects[i] = TimeCalc.average(projects[i].plannedTime.start, projects[i].plannedTime.end)\r\n    for(let i = 0; i < breaks.length; i++) middleTimes.breaks[i] = TimeCalc.average(breaks[i].startTime, breaks[i].endTime)\r\n  }\r\n\r\n  for(let i = 0; i < projects.length; i++){\r\n\r\n    if(!projects[i].plannedTime) projects[i].plannedTime = {}\r\n\r\n    // unless this is the first project, adjust the startTime\r\n    if(i !== 0){\r\n      projects[i].plannedTime.start = TimeCalc.suggestStartTime(\r\n        projects[i - 1].plannedTime.end,\r\n        projects[i - 1].estimatedDuration,\r\n        settings\r\n      )\r\n    }\r\n\r\n    // if it is the first project then startTime must equal the one from the state\r\n    else projects[i].plannedTime.start = startTime\r\n\r\n    // set the appropriate endTime\r\n    projects[i].plannedTime.end = TimeCalc.add(projects[i].plannedTime.start, projects[i].estimatedDuration)\r\n\r\n    // loop through the breaks, adjust if one of them overlays with the project\r\n    for(let j = 0; j < breaks.length; j++){\r\n      // if breaks[j] and projects[i] overlay...\r\n      // (we only care about breaks[j].startTime, the endTime is irrelevant here)\r\n      // (projectOverlapAreaStart is a way to handle the scenario of the break starting in the buffer, it also handles i === 0)\r\n      let projectOverlapAreaStart = i === 0 ? projects[i].plannedTime.start : projects[i - 1].plannedTime.end\r\n      if(\r\n        TimeCalc.isBiggerThan(projects[i].plannedTime.end, breaks[j].startTime, true, true) &&\r\n        TimeCalc.isBiggerThan(breaks[j].startTime, projectOverlapAreaStart, true, true)\r\n      ){\r\n        // determine if the break is in the first or second half of the project\r\n        let breakIsInFirstHalf = TimeCalc.isBiggerThan(middleTimes.projects[i], middleTimes.breaks[j], true, true)\r\n\r\n        // get the length of the break\r\n        let lengthOfBreak = TimeCalc.subtractToMinutes(breaks[j].endTime, breaks[j].startTime, true)\r\n\r\n        // if the break is in the first half of the project...\r\n        if(breakIsInFirstHalf){\r\n          // move the break before the project\r\n          // (if it's the first project, there is no, projects[i - 1] -> handles undefined with ternary statement)\r\n          breaks[j].startTime = (i === 0 ? projects[i].plannedTime.start : projects[i - 1].plannedTime.end)\r\n\r\n          // adjust the endTime of the break\r\n          breaks[j].endTime = TimeCalc.add(breaks[j].startTime, lengthOfBreak)\r\n\r\n          // move the project after the break\r\n          if(i === 0) projects[i].plannedTime.start = breaks[j].endTime // if it's the first project, move the startTime after the break\r\n          // else add the buffer\r\n          else projects[i].plannedTime.start = TimeCalc.suggestStartTime(breaks[j].endTime, projects[i-1].estimatedDuration, settings)\r\n          projects[i].plannedTime.end = TimeCalc.add(projects[i].plannedTime.start, projects[i].estimatedDuration)\r\n        }\r\n\r\n        // if the break is in the second half of the project...\r\n        else{\r\n          // move the break after the project\r\n          breaks[j].startTime = projects[i].plannedTime.end\r\n          breaks[j].endTime = TimeCalc.add(breaks[j].startTime, lengthOfBreak)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return projects\r\n}\r\n","import React from 'react';\r\nimport Spinner from 'react-md-spinner';\r\n\r\nconst LoadingFallback = props => <Spinner singleColor=\"#039be5\"/>\r\n\r\nexport default LoadingFallback\r\n","import React from 'react';\r\n\r\nexport const SettingsContext = React.createContext({})\r\nexport const IsMobileContext = React.createContext({})\r\n","// objects is an array of projects or breaks, key is either \"projecs\" or \"breaks\"\r\nexport default function makeNewId(objects, key){\r\n  // make a new unique ID\r\n  let newId\r\n  let haveFoundUniqueId = false\r\n\r\n  // if the ID isn't unique (in other words if it already exists in the state or local storage), try again\r\n  while(!haveFoundUniqueId){\r\n    newId = Math.floor(Math.random() * 10**8)\r\n    haveFoundUniqueId = true\r\n\r\n    // make sure the ID is unique within the state\r\n    for(let i = 0; i < objects.length; i++){\r\n      if(objects[i].id === newId){\r\n        haveFoundUniqueId = false\r\n        break\r\n      }\r\n    }\r\n    // make sure there aren't any lastModified fields in the localStorage either\r\n    if(haveFoundUniqueId){\r\n      let localStorageKey = [\"lastModified\", key, newId, \"id\"].join(\"_\")\r\n      if(!isNaN(localStorage[localStorageKey])) haveFoundUniqueId = false\r\n    }\r\n  }\r\n\r\n  return newId\r\n}\r\n","export const defaultSettings = {\r\n  timeFormat24H: false,\r\n  bufferTimePercentage: .2,\r\n  showResetButtonAfter: 16, // in hours\r\n  defaultColors: [\r\n    \"#4BFFD1\",\r\n    \"#39FF00\",\r\n    \"#E8A60C\",\r\n    \"#FF4848\",\r\n    \"#290CE8\",\r\n  ],\r\n  updateTimesAfterDrag: true,\r\n  updateTimesAfterEdit: true,\r\n  updateTimesAfterDelete: true,\r\n  roundTo: 5,\r\n  changeModeOnTab: false,\r\n  detectBreaksAutomatically: true,\r\n  adjustDurationOnPause: true,\r\n  offerToAdjustDurationOnDone: true,\r\n  darkTheme: false\r\n}\r\n\r\n\r\nexport const defaultDataValues = {\r\n  projects: [],\r\n  breaks: [],\r\n  defaultProjects: [],\r\n  settings: defaultSettings,\r\n  startTime: {h: 2, m: \"00\", pm: true},\r\n  endTime: {h: 9, m: \"00\", pm: true},\r\n  mode: \"planning\",\r\n  defaultColorIndex: 0,\r\n  defaultColorIndexDefaultProjects: 0,\r\n  productivityPercentages: {},\r\n  useDefaultProjects: true,\r\n  lastReset: undefined,\r\n  lastModified: {},\r\n  realEndTime: undefined\r\n}\r\n","import React, { Component } from 'react';\r\nimport * as Sentry from '@sentry/browser';\r\n\r\nexport default class ErrorBoundary extends Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      hasError: false,\r\n      error: null\r\n    }\r\n\r\n    // init Sentry (error logging) if in production\r\n    if(process.env.NODE_ENV === 'production'){\r\n      Sentry.init({ dsn: 'https://4ff9b4a95e3d4694b3191e745dc529ff@sentry.io/1480676' })\r\n    }\r\n  }\r\n\r\n  static getDerivedStateFromError(error){\r\n    return {\r\n      hasError: true,\r\n      error\r\n    }\r\n  }\r\n\r\n  render(){\r\n    if(this.state.hasError) return (\r\n      <div style={{textAlign: \"center\"}}>\r\n        <h3 style={{color: \"red\"}}>Oops, something went wrong</h3>\r\n        Please, try <b>reloading</b> the page\r\n        <br/><br/><br/>\r\n        If you keep seeing this message, <b>\r\n          send us a bug report{\" \"}\r\n          <a className=\"noStyling\" href=\"https://goo.gl/forms/jdesExEMegbkLPjp2\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            here\r\n          </a>\r\n        </b>\r\n        <br/>\r\n        While doing that, make sure you <b>tell us what you were trying to do</b>. This helps us a lot when fixing issues.\r\n        <br/>\r\n        {this.state.error && (\r\n          <>\r\n            Please also <b>include the following information</b> in the bug report:\r\n            <p><code>{this.state.error.toString()}</code></p>\r\n          </>\r\n        )}\r\n      </div>\r\n    )\r\n\r\n    return this.props.children\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route, Redirect } from \"react-router-dom\";\r\nimport LoadingFallback from './LoadingFallback'\r\nimport { defaultSettings } from './util/defaultValues'\r\nimport { IsMobileContext } from './_Context'\r\nconst App = React.lazy(() => import('./App'))\r\nconst Settings = React.lazy(() => import('./Settings'))\r\nconst About = React.lazy(() => import('./About'))\r\nconst SettingsDefaultColors = React.lazy(() => import('./MobileViews/SettingsDefaultColors'))\r\nconst LinkToRoot = React.lazy(() => import('./LinkToRoot'))\r\nconst Navbar = React.lazy(() => import('./Navbar'))\r\nconst Footer = React.lazy(() => import('./Footer'))\r\n\r\nexport default class extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      width: window.innerWidth, // used to determine if we should show the desktop or mobile UI\r\n      currentTime: {\r\n        h: 0,\r\n        m: 0,\r\n        pm: true,\r\n        defaultVal: true // this means this isn't a real value, just a placeholder\r\n      },\r\n      showErrors: {}\r\n    }\r\n  }\r\n  componentWillMount(){\r\n    // when the user resizes the window, we need to check if we should still use the desktop/mobile UI or switch to the other one\r\n    window.addEventListener(\"resize\", () => {\r\n      this.setState({width: window.innerWidth})\r\n    })\r\n  }\r\n\r\n  // these methods are necessary for letting these child components access props\r\n  AppWithProps = props => (\r\n    <App\r\n      data={this.props.data}\r\n      connect={this.props.connect}\r\n      changeMode={this.changeMode}\r\n      update={this.props.update}\r\n      disconnect={this.props.disconnect}\r\n      loggedIn={this.props.loggedIn}\r\n      disconnected={this.props.disconnected}\r\n      currentTime={this.state.currentTime}\r\n      showErrors={this.state.showErrors}\r\n      changeRouterShowErrors={this.changeShowErrors}\r\n      onCurrentTimeChange={currentTime => {this.setState({currentTime})}}\r\n      {...props}\r\n    />\r\n  )\r\n\r\n  SettingsWithProps = props => (\r\n    <Settings\r\n      settings={Object.assign({}, this.props.data.settings)}\r\n      defaultSettings={defaultSettings}\r\n      update={this.props.update}\r\n      {...props}\r\n    />\r\n  )\r\n\r\n  SettingsDefaultColorsWithProps = props => (\r\n    <SettingsDefaultColors\r\n      settings={Object.assign({}, this.props.data.settings)}\r\n      save={defaultColors => {\r\n        this.props.update({settings: {...this.props.data.settings, defaultColors}})\r\n      }}\r\n      {...props}\r\n    />\r\n  )\r\n\r\n  // go from \"planning\" to \"working\" and back\r\n  changeMode = val => {\r\n    // don't let the user go into work mode if there isn't an endTime or if projects are empty (+ show an error)\r\n    if(val === \"working\"){\r\n      if(this.props.data.endTime.h === \"\" || this.props.data.endTime.m === \"\"){\r\n        this.changeShowErrors(\"endTime\", true)\r\n        return\r\n      }\r\n      if(!this.props.data.projects.length){\r\n        this.changeShowErrors(\"noProjects\", true)\r\n        return\r\n      }\r\n    }\r\n\r\n    this.props.update({mode: val})\r\n  }\r\n\r\n  // an util function to DRY the code\r\n  changeShowErrors = (id, val) => {\r\n    this.setState({showErrors: {...this.state.showErrors, [id]: val}})\r\n  }\r\n\r\n  render(){\r\n    let isMobile = this.state.width < 660\r\n\r\n    return (\r\n      <Router>\r\n        <React.Suspense fallback={<LoadingFallback/>}>\r\n          {\r\n            isMobile ? (\r\n                <Navbar\r\n                  data={this.props.data}\r\n                  connect={this.props.connect}\r\n                  changeMode={this.changeMode}\r\n                  disconnect={this.props.disconnect}\r\n                  loggedIn={this.props.loggedIn}\r\n                  currentTime={this.state.currentTime}\r\n                  onCurrentTimeChange={currentTime => {this.setState({currentTime})}}\r\n                  update={localStorage.devUnlocked ? this.props.update : {}}\r\n                />\r\n              ) : (\r\n                <Switch>\r\n                  <Route path=\"/(|add|edit|breaks|defaultProjects)\" exact />\r\n                  <Route component={LinkToRoot} />\r\n                </Switch>\r\n            )\r\n          }\r\n        </React.Suspense>\r\n        <IsMobileContext.Provider value={isMobile}>\r\n          <React.Suspense fallback={<LoadingFallback/>}>\r\n            <Switch>\r\n              <Route path=\"/settings/defaultColors/\" render={this.SettingsDefaultColorsWithProps}/>\r\n              <Route path=\"/settings/\" render={this.SettingsWithProps}/>\r\n              <Route path=\"/about/\" component={About}/>\r\n              <Route path=\"/robots.txt\" target=\"_self\" />\r\n              <Route path=\"/(|add|edit|breaks|defaultProjects)\" exact render={this.AppWithProps}/>\r\n              <Route render={() => <Redirect to=\"/\" />} />\r\n            </Switch>\r\n          </React.Suspense>\r\n        </IsMobileContext.Provider>\r\n        <React.Suspense fallback={<LoadingFallback/>}>\r\n          {\r\n            isMobile ? (\r\n              <Route path=\"/about/\" component={Footer} />\r\n            ) : (\r\n              <Footer />\r\n            )\r\n          }\r\n        </React.Suspense>\r\n      </Router>\r\n    )\r\n  }\r\n}\r\n","// simple util function for checking if objects are identical\r\nexport function areIdenticalObjects(obj1, obj2){\r\n  if(!obj2) return false\r\n\r\n  let keys\r\n  if(Array.isArray(obj1)) keys = obj1.keys()\r\n  else keys = Object.keys(obj1)\r\n\r\n  for(let key of keys){\r\n    if(typeof obj1[key] === \"object\"){\r\n      if(!areIdenticalObjects(obj1[key], obj2[key])) return false\r\n    }\r\n    else if(obj1[key] !== obj2[key]) return false\r\n  }\r\n\r\n  return true\r\n}\r\n\r\n// uses oldData first, then rewrites it using the properties of newData to make sure all the properties are represented\r\n// (in other words the newData value is always used but if a property of oldData isn't present in newData, that value is used too)\r\n// usually oldData is considerably larger, hence the algorithm design\r\nexport function mergeObjects(oldData, newData){\r\n  let mergedData = JSON.parse(JSON.stringify(oldData))\r\n  for(let [key, val] of Object.entries(newData)){\r\n    if(typeof val === \"object\" && typeof val.getTime !== \"function\"){\r\n      let oldVal = oldData[key]\r\n      if(!oldVal) oldVal = {} // handle undefined\r\n      mergedData[key] = mergeObjects(oldVal, val)\r\n    }\r\n    else mergedData[key] = val\r\n  }\r\n  return mergedData\r\n}\r\n","// shows the proper structure of the data, used for validating data to make sure nothing gets corrupted\r\n\r\nimport {defaultSettings} from './defaultValues'\r\n\r\n// define types\r\nconst numberOptional = {type: \"number\"}\r\nconst number = {type: \"number\", required: true}\r\nconst string = {type: \"string\", required: true}\r\nconst booleanOptional = {type: \"boolean\"}\r\nconst boolean = {type: \"boolean\", required: true}\r\nconst timeObjectOptional = {type: \"object\", properties: {h: number, m: number, pm: boolean, s: numberOptional}}\r\nconst timeObject = {...timeObjectOptional, required: true}\r\nconst date = {type: \"string\", isDate: true}\r\nconst array = elements => ({type: \"object\", isArray: true, elements})\r\nconst object = properties => ({type: \"object\", properties})\r\n\r\nconst projectBaseline = { // what projects and defaultProjects have in common\r\n  id: number,\r\n  name: string,\r\n  color: string,\r\n  estimatedDuration: number,\r\n  state: string,\r\n  order: numberOptional,\r\n  plannedTime: {type: \"object\", properties: {\r\n    start: timeObject,\r\n    end: timeObject\r\n  }}\r\n}\r\n\r\n// create the settings structure based on defaultSettings\r\n// the settings object only contains primitives and arrays\r\nvar settingsStructure = {}\r\nfor(let [key, val] of Object.entries(defaultSettings)){\r\n  let typeofVal = typeof val\r\n\r\n  if(typeofVal === \"object\"){\r\n    if(Array.isArray(val)){\r\n      settingsStructure[key] = array({type: typeof val[0], required: true})\r\n    }\r\n    else console.warn(\"Unhandled scenraio, settings contains an object that isn't an array\")\r\n  }\r\n  else{\r\n    settingsStructure[key] = {type: typeofVal, required: true}\r\n  }\r\n}\r\n\r\n// create the lastModifiedStructure\r\n// (each primitive has its own field, each object has its own nested object)\r\nvar lastModifiedStructure = {}\r\nconst primitivesInLastModified = [\"startTime\", \"endTime\", \"mode\", \"defaultColorIndex\",\r\n  \"defaultColorIndexDefaultProjects\", \"lastReset\", \"useDefaultProjects\"]\r\nconst projectBaselineKeys = Object.keys(projectBaseline)\r\nconst objectsInLastModified = {\r\n  projects: [...projectBaselineKeys, \"startedWorkingOnIt\", \"progress\"],\r\n  breaks: [\"id\", \"name\", \"startTime\", \"endTime\", \"autodetected\"],\r\n  defaultProjects: [...projectBaselineKeys, \"days\"],\r\n  settings: Object.keys(defaultSettings)\r\n}\r\nfor(let primitive of primitivesInLastModified){\r\n  lastModifiedStructure[primitive] = date\r\n}\r\nfor(let [key, val] of Object.entries(objectsInLastModified)){\r\n  let properties = {}\r\n\r\n  for(let property of val){\r\n    // id is required\r\n    if(property === \"id\") properties.id = {...date, required: true}\r\n    // other fields are optional\r\n    else properties[property] = date\r\n  }\r\n\r\n  if(key === \"settings\") lastModifiedStructure[key] = object(properties)\r\n  else{\r\n    lastModifiedStructure[key] = object({\r\n      __any__: object(properties)\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const correctDataStructure = {\r\n  projects: array(object({\r\n    ...projectBaseline,\r\n    startedWorkingOnIt: timeObjectOptional,\r\n    progress: numberOptional\r\n  })),\r\n  breaks: array(object({\r\n    id: number,\r\n    name: string,\r\n    startTime: timeObject,\r\n    endTime: timeObject,\r\n    autodetected: booleanOptional\r\n  })),\r\n  defaultProjects: array(object({\r\n    ...projectBaseline,\r\n    days: array(boolean)\r\n  })),\r\n  settings: object(settingsStructure),\r\n  startTime: timeObject,\r\n  endTime: timeObject,\r\n  mode: string,\r\n  defaultColorIndex: number,\r\n  defaultColorIndexDefaultProjects: number,\r\n  lastReset: string,\r\n  useDefaultProjects: boolean,\r\n  productivityPercentages: object({__any__: numberOptional}),\r\n  realEndTime: date,\r\n  lastModified: object(lastModifiedStructure)\r\n}\r\n","import {mergeObjects} from './objectUtil'\r\nimport {correctDataStructure} from './correctDataStructure'\r\nimport {defaultSettings} from './defaultValues'\r\n\r\n// since we are using recursive functions, the lastModified property usually isn't available\r\n// these sysNotes let the algorithm create notes for itself as to which fields were updated and therefore need a new lastModified field\r\n// since sysNotes can be nested, the function needs to work recursively\r\nfunction lastModifiedSysNoteToDates(sysNote){\r\n  var lastModified = {}\r\n  Object.entries(sysNote).forEach(([key, val]) => {\r\n    if(typeof val === \"object\") lastModified[key] = lastModifiedSysNoteToDates(val)\r\n    else lastModified[key] = new Date()\r\n  })\r\n  return lastModified\r\n}\r\n\r\n// in each function call, we only need a certain setion of the correctDataStructure\r\n// this function finds and returns that section\r\nfunction getCorrectDataStructureSection(keys){\r\n  if(typeof keys === \"string\") console.warn(\"Keys must be an array!\")\r\n\r\n  // this error message is used if the section cannot be found\r\n  var warningMessage = `Incorrect property detected in data: ${keys.join(\".\")} should not be defined`\r\n\r\n  try{\r\n    var result = keys.reduce((section, key) => section[key], correctDataStructure)\r\n  }\r\n  catch(e){\r\n    console.warn(warningMessage)\r\n    console.warn(e)\r\n  }\r\n  if(!result) console.warn(warningMessage)\r\n\r\n  return result\r\n}\r\n\r\n// esentially just checks if the given primitive is the type it's supposed to be\r\nfunction validatePrimitive(keys, val){\r\n  var correctDataStructureSection = getCorrectDataStructureSection(keys)\r\n  if(!correctDataStructureSection) return\r\n\r\n  let expectedType = correctDataStructureSection.type\r\n  let actualType = typeof val\r\n\r\n  if(correctDataStructureSection.isDate){\r\n    if(\r\n      (actualType === \"string\" && !isNaN(new Date(val).getTime())) ||\r\n      (actualType === \"object\" && !isNaN(val.getTime()))\r\n    ) return val\r\n    else{\r\n      if(actualType === \"undefined\") return\r\n      console.warn(`Incorrect type or invalid date detected: ${keys.join(\".\")} is '${val}' (of type ${actualType}) which isn't a valid date`)\r\n      return\r\n    }\r\n  }\r\n\r\n  if(expectedType === actualType ||\r\n    (// allow numbers to be in the form of a string\r\n      expectedType === \"number\" &&\r\n      actualType === \"string\" &&\r\n      !isNaN(parseFloat(val))\r\n    ) ||\r\n    ( // dates can be objects too\r\n      expectedType === \"string\" &&\r\n      correctDataStructureSection.isDate &&\r\n      actualType === \"object\" &&\r\n      val instanceof Date\r\n    )\r\n  ) return val\r\n  else{\r\n    if(actualType === \"undefined\") return // if the value is undefined and we're returning undefined, there's no need for a warning\r\n    console.warn(`Incorrect type detected in data: ${keys.join(\".\")} is '${val}' which is of type ${actualType}, should be of type ${expectedType}`)\r\n  }\r\n}\r\n\r\n// is used recursively for nested objects, eventually calls validatePrimitive to handle the actual type checking\r\nfunction validateObject(keys, val){\r\n  var correctedVal\r\n\r\n  var correctDataStructureSection = getCorrectDataStructureSection(keys)\r\n  if(!correctDataStructureSection) return\r\n\r\n  if(correctDataStructureSection.isArray){\r\n    correctedVal = []\r\n\r\n    // if it's supposed to be an array and isn't, something went wrong\r\n    if(!Array.isArray(val)) return\r\n\r\n    for(let el of val){\r\n      if(typeof el === \"object\"){\r\n        correctedVal.push(validateObject([...keys, \"elements\"], el))\r\n      }\r\n      else{\r\n        correctedVal.push(validatePrimitive([...keys, \"elements\"], el))\r\n      }\r\n    }\r\n  }\r\n  else{\r\n    correctedVal = {}\r\n\r\n    for(let [objKey, objVal] of Object.entries(val)){\r\n\r\n      // get the expectedType (first try the key, then __any__, if both fails, throw an error)\r\n      // (__any__ is used for objects that can have any property names)\r\n      let expectedType, keyToPass\r\n      if(correctDataStructureSection.properties[objKey]){\r\n        expectedType = correctDataStructureSection.properties[objKey].type\r\n        keyToPass = objKey // gets passed down to the next validateObject call to let it get the correctDataStructureSection\r\n      }\r\n      else{\r\n        if(correctDataStructureSection.properties.__any__){\r\n          expectedType = correctDataStructureSection.properties.__any__.type\r\n          keyToPass = \"__any__\"\r\n        }\r\n        else{\r\n          console.warn(`Incorrect property in data: ${keys.join(\".\")}.${objKey} should not be defined `)\r\n          continue\r\n        }\r\n      }\r\n\r\n      // if we're dealing with an object, call the function again recursively\r\n      // else validate the types via validatePrimitive\r\n      if(expectedType === \"object\"){\r\n        correctedVal[objKey] = validateObject([...keys, \"properties\", keyToPass], objVal)\r\n\r\n        // after the object is validated, check if it has a sysNote (explained above)\r\n        // if so, pass it up\r\n        // (in other word take it from the validated object and put it into the object that will eventually be returned\r\n        // to make sure all the sysNotes are in 1 place)\r\n        if(correctedVal[objKey] && correctedVal[objKey].__lastModifiedSysNote){\r\n          if(!correctedVal.__lastModifiedSysNote) correctedVal.__lastModifiedSysNote = {}\r\n          correctedVal.__lastModifiedSysNote[objKey] = correctedVal[objKey].__lastModifiedSysNote\r\n          delete correctedVal[objKey].__lastModifiedSysNote\r\n        }\r\n      }\r\n      else{\r\n        correctedVal[objKey] = validatePrimitive([...keys, \"properties\", keyToPass], objVal)\r\n      }\r\n    }\r\n\r\n    // check for missing required values\r\n    for(let [propertyKey, propertyVal] of Object.entries(correctDataStructureSection.properties)){\r\n      if(propertyVal.required && typeof val[propertyKey] === \"undefined\"){\r\n        console.warn(`Property missing in data: ${keys.join(\".\")}.${propertyKey} is not defined`)\r\n\r\n        // figure out what property to use\r\n        // (currently only used if the missing property is in the settings, then the default value gets used)\r\n        let propertyValToSet\r\n        if(keys.length === 1 && keys[0] === \"settings\") propertyValToSet = defaultSettings[propertyKey]\r\n\r\n        if(typeof propertyValToSet !== \"undefined\"){\r\n          console.log(`${keys.join(\".\")}.${propertyKey} automatically set to ${propertyValToSet}`)\r\n          correctedVal[propertyKey] = propertyValToSet\r\n\r\n          if(!correctedVal.__lastModifiedSysNote) correctedVal.__lastModifiedSysNote = {}\r\n          correctedVal.__lastModifiedSysNote[propertyKey] = true\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return correctedVal\r\n}\r\n\r\n// the validator itself only calls the other functions, all functionality is handled in a function-oriented fashion\r\nexport default function dataValidation(data){\r\n  var correctedData = {}\r\n\r\n  for(let [key, val] of Object.entries(data)){\r\n    if(!correctDataStructure[key]){\r\n      console.warn(`Incorrect key in data: ${key}`)\r\n      continue\r\n    }\r\n    if(correctDataStructure[key].type === \"object\"){\r\n      correctedData[key] = validateObject([key], val)\r\n\r\n      // the sysNotes (see lastModifiedSysNoteToDates) are passed up the same way as in validateObject (see above)\r\n      if(correctedData[key].__lastModifiedSysNote){\r\n        if(!correctedData.__lastModifiedSysNote) correctedData.__lastModifiedSysNote = {}\r\n        correctedData.__lastModifiedSysNote[key] = correctedData[key].__lastModifiedSysNote\r\n        delete correctedData[key].__lastModifiedSysNote\r\n      }\r\n    }\r\n    else correctedData[key] = validatePrimitive([key], val)\r\n  }\r\n\r\n  // finally convert the sysNotes (see lastModifiedSysNoteToDates) are converted into dates in lastModified\r\n  if(correctedData.__lastModifiedSysNote){\r\n    let newLastModifiedItems = lastModifiedSysNoteToDates(correctedData.__lastModifiedSysNote)\r\n    delete correctedData.__lastModifiedSysNote\r\n\r\n    if(!correctedData.lastModified) correctedData.lastModified = newLastModifiedItems\r\n    else correctedData.lastModified = mergeObjects(correctedData.lastModified, newLastModifiedItems)\r\n  }\r\n\r\n  return correctedData\r\n}\r\n","import React, { Component } from 'react';\r\nimport Router from './Router'\r\nimport TimeCalc, { setTimesForProjects } from './util/TimeCalc'\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport * as SocketIOClient from 'socket.io-client'\r\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport green from '@material-ui/core/colors/green';\r\nimport { defaultDataValues } from './util/defaultValues'\r\nimport makeNewId from './util/makeNewId'\r\nimport dataValidation from './util/dataValidation'\r\nimport {areIdenticalObjects, mergeObjects} from './util/objectUtil'\r\nimport './css/themes.css'\r\n\r\nconst lightTheme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#039be5',\r\n    },\r\n    secondary: green\r\n  },\r\n  typography: {\r\n    useNextVariants: true\r\n  }\r\n})\r\n\r\nconst darkTheme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#039be5',\r\n    },\r\n    secondary: green,\r\n    type: \"dark\"\r\n  },\r\n  typography: {\r\n    useNextVariants: true\r\n  }\r\n})\r\n\r\n// takes care of all data operations (loading, saving, syncing) as well as signing in/out\r\nexport default class DataSync extends Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      projects: [],\r\n      settings: {},\r\n      lastModified: {},\r\n      temp: {}\r\n    }\r\n\r\n    /*this.io = SocketIOClient.connect('localhost:3000')\r\n    console.warn(\"connecting to localhost\");*/\r\n    this.io = SocketIOClient.connect('https://mind-your-time-server.herokuapp.com')\r\n\r\n    // check if the user is offline (first give the sockets enough time to try to connect)\r\n    setTimeout(() => {\r\n      if(this.io.disconnected){ // if connection failed\r\n        console.warn(\"Can't connect to server\");\r\n\r\n        let temp = this.state.temp\r\n        temp.disconnected = true\r\n        // show an error if the user is logged in\r\n        if(this.state.accessToken) temp.showDisconnectedError = true\r\n\r\n        this.setState({temp})\r\n      }\r\n    }, 500)\r\n\r\n    // the SocketIO init event\r\n    this.io.on(\"connect\", data => {\r\n      // if the user was previously disconnected and they're logged in, connect them\r\n      if(!this.state.temp.successfulConnectInit && this.state.temp.disconnected && this.state.accessToken){\r\n        let localData\r\n\r\n        // if the initil connection wasn't successful or if there have been updates while the user was disconnected...\r\n        if(!this.state.temp.successfulConnectInit || this.state.temp.updatedWhileDisconnected){\r\n          // gather all the relevant data\r\n          let {accessToken, temp, ...data} = this.state\r\n          localData = data\r\n        }\r\n        else localData = {}\r\n\r\n        // send the initial connect event to the server\r\n        this.io.emit(\"connectInit\", {\r\n          type: \"accessToken\", accessToken: this.state.accessToken, localData\r\n        })\r\n      }\r\n\r\n      // hide the errors\r\n      let temp = this.state.temp\r\n      temp.disconnected = false\r\n      temp.showDisconnectedError = false\r\n      clearTimeout(temp.showDisconnectedErrorTimeout)\r\n\r\n      this.setState({temp})\r\n    })\r\n\r\n    // if the user goes offline/server stops responding\r\n    this.io.on(\"disconnect\", data => {\r\n      let temp = this.state.temp\r\n      temp.disconnected = true\r\n      // show an error if the user is logged in\r\n      // (after a reasonable amount of time so that the client can try to reconnect)\r\n      if(this.state.accessToken) temp.showDisconnectedErrorTimeout = setTimeout(() => {\r\n        this.setState({temp: {...this.state.temp, showDisconnectedError: true}})\r\n      }, 1500)\r\n      this.setState({temp})\r\n    })\r\n\r\n    // this event simply lets the client side know that everything went ok on the server\r\n    // in the case of the login events, it also sends along an accessToken which is used the next time when connecting to the server\r\n    this.io.on(\"success\", data => {\r\n      // login\r\n      if(data.type === \"connectInsert\" || data.type === \"connectUpdate\"){\r\n        // store the accessToken (in the localStorage for lack of a better place)\r\n        localStorage.accessToken = data.accessToken\r\n\r\n        this.setState({\r\n          accessToken: data.accessToken,\r\n          temp: {...this.state.temp, successfulConnectInit: true}\r\n        })\r\n      }\r\n\r\n      // logout\r\n      if(data.type === \"disconnect\"){\r\n        // remove the accessToken\r\n        delete localStorage.accessToken\r\n        this.setState({accessToken: undefined})\r\n      }\r\n    })\r\n\r\n    // if there was an error, show a warning in the console\r\n    this.io.on(\"errorU\", data => {\r\n      console.warn(\"error\", data);\r\n\r\n      // if the accessToken is invalid, we should remove it to sign out the user\r\n      // (we don't want the client side thinking it's still logged in if it's credentials are invalid)\r\n      if(data.type === \"invalidAccessToken\"){\r\n        delete localStorage.accessToken\r\n        this.setState({accessToken: undefined})\r\n      }\r\n    })\r\n\r\n    // if the server sent new data, use the handleUpdateFromServer method to store the new data locally\r\n    this.io.on('connectUpdate', this.handleUpdateFromServer)\r\n    this.io.on('update', this.handleUpdateFromServer)\r\n  }\r\n\r\n  componentDidMount(){\r\n    // load all the data from localStorage\r\n    // these are all the keys that need to be loaded:\r\n    let objectsToLoad = [\"projects\", \"breaks\", \"defaultProjects\", \"settings\", \"startTime\", \"endTime\", \"productivityPercentages\"]\r\n    let propertiesToLoad = [\"mode\", \"defaultColorIndex\", \"defaultColorIndexDefaultProjects\", \"useDefaultProjects\", \"lastReset\", \"realEndTime\"]\r\n\r\n    let data = {}\r\n\r\n    // for objects, parse the JSON and catch any errors\r\n    objectsToLoad.forEach(el => {\r\n      try{\r\n        data[el] = JSON.parse(localStorage[el])\r\n      }\r\n      catch(e){\r\n        // set default (if data from localStorage can't be used)\r\n        data[el] = defaultDataValues[el]\r\n      }\r\n    })\r\n\r\n    // for primitives, simply load the data\r\n    propertiesToLoad.forEach(el => {\r\n      data[el] = localStorage[el] ? localStorage[el] : defaultDataValues[el]\r\n    })\r\n\r\n    // load lastModified\r\n    for(let localStorageKey of Object.keys(localStorage)){\r\n      if(localStorageKey.startsWith(\"lastModified_\")){\r\n        // set the value for an arbitrarily long path\r\n        let pathArray = localStorageKey.split(\"_\")\r\n        let pathLength = pathArray.length\r\n        let lastModifiedObj = data\r\n        for(let i = 0; i < pathLength - 1; i++){\r\n          if(!(pathArray[i] in lastModifiedObj)) lastModifiedObj[pathArray[i]] = {}\r\n          lastModifiedObj = lastModifiedObj[pathArray[i]]\r\n        }\r\n        lastModifiedObj[pathArray[pathLength - 1]] = new Date(localStorage[localStorageKey])\r\n      }\r\n    }\r\n\r\n    this.setState(data);\r\n\r\n    // if the user's logged in, connect to the server using the gathered data\r\n    (data => {\r\n      setTimeout(() => {\r\n        let {accessToken} = localStorage\r\n        if(accessToken){\r\n          if(this.io.disconnected) this.setState({accessToken})\r\n          else this.io.emit(\"connectInit\", {type: \"accessToken\", accessToken, localData: data})\r\n        }\r\n      }, 5)\r\n    }).call(this, data)\r\n  }\r\n\r\n  // logging in\r\n  connect = idToken => {\r\n    // if the user is offline or the server is down...\r\n    if(this.io.disconnected){\r\n      this.setState({temp: {...this.state.temp, showDisconnectedError: true}})\r\n      return\r\n    }\r\n\r\n    // gather localData\r\n    var {accessToken, temp, ...localData} = this.state\r\n\r\n    this.idToken = idToken\r\n\r\n    // log in\r\n    this.io.emit(\"connectInit\", {type: \"OAuth\", idToken, localData})\r\n  }\r\n\r\n  // log out\r\n  disconnect = (dontConfirm = false) => {\r\n    if(dontConfirm || window.confirm(\"Are you sure you want to sign out?\")){\r\n      // if the user is offline or the server is down...\r\n      if(this.io.disconnected){\r\n        this.setState({temp: {...this.state.temp, showDisconnectedError: true}})\r\n        return\r\n      }\r\n\r\n      this.io.emit(\"disconnectU\", {accessToken: localStorage.accessToken})\r\n    }\r\n  }\r\n\r\n  // if any data changes in the app, update the state and if logged in, send an update to the server\r\n  update = (data, changes) => {\r\n    // handle a reset\r\n    if(data.projects && !data.projects.length && this.state.projects.length){\r\n      if(data.useDefaultProjects || this.state.useDefaultProjects){\r\n        // get the current dayOfTheWeek\r\n        // (defaultProjects have the option of only being applied on certain days of the week)\r\n        let dayOfTheWeek = new Date().getDay()\r\n        // in getDay(), 0 means Sunday -> convert it so that 0 means Monday\r\n        dayOfTheWeek--\r\n        if(dayOfTheWeek < 0) dayOfTheWeek = 6\r\n\r\n        // insert the defaultProjects into projects\r\n        // (don't insert the days array, break the object reference at the same time)\r\n        data.projects = []\r\n        this.state.defaultProjects.forEach(defProj => {\r\n          let {days, ...projectToInsert} = defProj\r\n          if(!days || days[dayOfTheWeek]) data.projects.push(projectToInsert)\r\n        })\r\n\r\n        // suggest a new startTime and set the project times\r\n        let settings = data.settings || this.state.settings\r\n        let startTime = TimeCalc.add(new Date().getHours() * 60 + new Date().getMinutes(), 10)\r\n        startTime = TimeCalc.round(startTime, settings.roundTo)\r\n        data.projects = setTimesForProjects(data.projects, settings, [], startTime)\r\n\r\n        // generate a new unique ID for each project\r\n        data.projects.forEach(project => {\r\n          project.id = makeNewId(data.projects, \"projects\")\r\n        })\r\n\r\n        // set the startTime\r\n        data.startTime = startTime\r\n\r\n        var setLastModifiedOfAllProjects = true\r\n      }\r\n      else data.projects = []\r\n\r\n      // reset certain fields\r\n      data.breaks = []\r\n      data.lastReset = new Date().toISOString()\r\n      data.realEndTime = undefined\r\n\r\n      // reset lastModified\r\n      if(!data.lastModified) data.lastModified = {}\r\n      data.lastModified.projects = {}\r\n      data.lastModified.breaks = {}\r\n\r\n      // delete the project/break lastModified fields in localStorage\r\n      this.deleteObjectsLocalStorage(\"lastModified_projects_\")\r\n      this.deleteObjectsLocalStorage(\"lastModified_breaks_\")\r\n    }\r\n\r\n    // data validation (to prevent corrupted data from entering the system)\r\n    data = dataValidation(data)\r\n\r\n    // assign order to projects\r\n    for(let arrId of [\"projects\", \"defaultProjects\"]){\r\n      if(data[arrId]){\r\n        data[arrId].forEach((project, i) => {\r\n          project.order = i\r\n        })\r\n      }\r\n    }\r\n\r\n    // convert dates\r\n    if(data.realEndTime) data.realEndTime = data.realEndTime.toISOString()\r\n\r\n    // generate lastModified (used for deciding which data to use on the server side)\r\n    let lastModified = {}\r\n    Object.keys(data).forEach(el => {\r\n      switch (el) {\r\n        case \"projects\":\r\n          lastModified.projects = this.setMultipleLastModified(\r\n            data.projects,\r\n            changes && !setLastModifiedOfAllProjects ? changes.projects : undefined,\r\n            \"projects\"\r\n          )\r\n          break;\r\n        case \"breaks\":\r\n          lastModified.breaks = this.setMultipleLastModified(\r\n            data.breaks,\r\n            changes ? changes.breaks : undefined,\r\n            \"breaks\"\r\n          )\r\n          break;\r\n        case \"defaultProjects\":\r\n          lastModified.defaultProjects = this.setMultipleLastModified(\r\n            data.defaultProjects,\r\n            changes ? changes.defaultProjects : undefined,\r\n            \"defaultProjects\"\r\n          )\r\n          break;\r\n        case \"settings\":\r\n          lastModified.settings = this.state.lastModified && this.state.lastModified.settings ? this.state.lastModified.settings : {}\r\n          Object.keys(data.settings).forEach(el => {\r\n            if(data.settings[el] !== this.state.settings[el]){\r\n              lastModified.settings[el] = new Date()\r\n              localStorage[\"lastModified_settings_\" + el] = lastModified.settings[el].toISOString()\r\n            }\r\n          })\r\n          break;\r\n        case \"lastReset\":\r\n        case \"realEndTime\":\r\n          break\r\n        default:\r\n          lastModified[el] = new Date()\r\n          localStorage[\"lastModified_\" + el] = lastModified[el].toISOString()\r\n      }\r\n    })\r\n\r\n    // merge the new lastModified with the one in the state\r\n    data.lastModified = mergeObjects(this.state.lastModified, lastModified)\r\n\r\n    // set the state (merge with the current state)\r\n    this.setState(data)\r\n\r\n    // save to localStorage\r\n    for(let [key, val] of Object.entries(data)){\r\n      if(key === \"lastModified\") continue // lastModified was already saved to localStorage above\r\n\r\n      if(typeof val === \"undefined\"){\r\n        delete localStorage[key]\r\n        continue\r\n      }\r\n      if(typeof val === \"object\" && key !== \"lastReset\") localStorage[key] = JSON.stringify(val)\r\n      else localStorage[key] = val\r\n    }\r\n\r\n    // send an update to the server (if the user is logged in and online)\r\n    if(this.state.accessToken){\r\n      if(!this.io.disconnected){\r\n        // always send the lastReset along\r\n        if(!data.lastReset) data.lastReset = this.state.lastReset\r\n\r\n        // only use the relevant part of lastModified\r\n        let lastModifiedToSend = {}\r\n        for(let key of Object.keys(lastModified)) lastModifiedToSend[key] = data.lastModified[key]\r\n        data.lastModified = lastModifiedToSend\r\n\r\n        this.io.emit(\"update\", {accessToken: this.state.accessToken, data})\r\n      }\r\n      else{\r\n        this.setState({temp: {...this.state.temp, updatedWhileDisconnected: true}})\r\n      }\r\n    }\r\n  }\r\n\r\n  closeSnackbar = () => {\r\n    this.setState({\r\n      temp: {...this.state.temp, showDisconnectedError: false}\r\n    })\r\n  }\r\n\r\n  // determine which properties of a project or a break were modified, save lastModified to localStorage and return it too\r\n  /*\r\n    object = project or break\r\n    key = \"projects\" or \"breaks\"\r\n    lastModified is only the project's/break's last modified (from the state)\r\n  */\r\n  setLastModified = (object, objectId, key, lastModified) => {\r\n    // if the user deleted the object\r\n    if(!object){\r\n      lastModified = {id: new Date()}\r\n      let localStorageKey = [\"lastModified\", key, objectId, \"id\"].join(\"_\")\r\n      localStorage[localStorageKey] = lastModified.id.toISOString()\r\n\r\n      this.deleteObjectsLocalStorage([\"lastModified\", key, objectId, \"\"].join(\"_\"), localStorageKey)\r\n\r\n      return lastModified\r\n    }\r\n\r\n    // handle undefined\r\n    if(!lastModified) lastModified = {}\r\n\r\n    // find the object in the state\r\n    let stateObjectIndex = this.state[key].findIndex(el => el.id === objectId)\r\n\r\n    // loop through the properties we want to keep track of\r\n    Object.keys(object).forEach(property => {\r\n      // if it was changed...\r\n      let propertyChanged\r\n      // (if the user created a new project/break, it won't be in the state yet)\r\n      if(this.state[key][stateObjectIndex]){\r\n        if(typeof object[property] === \"object\"){\r\n          propertyChanged = !areIdenticalObjects(\r\n            object[property],\r\n            this.state[key][stateObjectIndex][property]\r\n          )\r\n        }\r\n        else propertyChanged = object[property] !== this.state[key][stateObjectIndex][property]\r\n      }\r\n      else propertyChanged = true\r\n\r\n      if(propertyChanged){\r\n        lastModified[property] = new Date()\r\n\r\n        let localStorageKey = [\"lastModified\", key, objectId, property].join(\"_\")\r\n        localStorage[localStorageKey] = lastModified[property].toISOString()\r\n      }\r\n    })\r\n\r\n    return lastModified\r\n  }\r\n\r\n  // determine which projects/breaks were modified, call setLastModified on them\r\n  /*\r\n    array = array of projects or breaks from the update method's args\r\n    lastModified is only lastModified.projects or .breaks\r\n    changedIds can be undefined\r\n    key = \"projects\" or \"breaks\"\r\n  */\r\n  setMultipleLastModified = (array, changedIds, key) => {\r\n    let lastModified = this.state.lastModified[key] // init\r\n    if(!lastModified) lastModified = {} // handle undefined\r\n\r\n    // if only a specific project/break was modified, check its fields\r\n    if(changedIds){\r\n      // handle an input with just 1 id\r\n      if(typeof changedIds !== \"object\") changedIds = [changedIds]\r\n\r\n      changedIds.forEach(changedId => {\r\n        let index = array.findIndex(object => object.id === parseInt(changedId))\r\n        let changedObject = array[index]\r\n\r\n        lastModified[changedId] = this.setLastModified(\r\n          changedObject,\r\n          changedId,\r\n          key,\r\n          lastModified[changedId]\r\n        )\r\n      })\r\n    }\r\n    // else check all projects\r\n    else{\r\n      array.forEach((object, i) => {\r\n        let objectId = object.id\r\n\r\n        lastModified[objectId] = this.setLastModified(\r\n          object,\r\n          objectId,\r\n          key,\r\n          lastModified[objectId]\r\n        )\r\n      })\r\n    }\r\n\r\n    return lastModified\r\n  }\r\n\r\n  // a util method for deleting localStorage entries tha fulfill certain criteria\r\n  deleteObjectsLocalStorage = (startsWithString, except = \"\") => {\r\n    let localStorageKeys = Object.keys(localStorage)\r\n    let relevantKeys = []\r\n    localStorageKeys.forEach(key => {\r\n      if(key.startsWith(startsWithString) && key !== except) relevantKeys.push(key)\r\n    })\r\n    relevantKeys.forEach(key => {\r\n      localStorage.removeItem(key)\r\n    })\r\n  }\r\n\r\n  // if the server sends an update, insert it into the state and save it to localStorage\r\n  handleUpdateFromServer = data => {\r\n    // merge lastModified when saving to state\r\n    this.setState({\r\n      ...data,\r\n      lastModified: {\r\n        ...this.state.lastModified,\r\n        ...data.lastModified\r\n      }\r\n    })\r\n\r\n    // save to localStorage\r\n    Object.keys(data).forEach(key => {\r\n      if(key === \"lastModified\"){\r\n        // since lastModified is a nested object, it needs to be stored more carefully\r\n        // we want to be able to modify differnt fields quickly which is why...\r\n        // it is stored as many different entries, eg. \"lastModified_project_{id}_name\"\r\n        // this part of the code handles the nested nature of the object and also converts the dates into ISO strings\r\n        Object.keys(data.lastModified).forEach(lastModifiedKey => {\r\n          if(\r\n            lastModifiedKey === \"projects\" ||\r\n            lastModifiedKey === \"breaks\" ||\r\n            lastModifiedKey ===\"defaultProjects\"\r\n          ){\r\n            for(let objectIdKey of Object.keys(data.lastModified[lastModifiedKey])){\r\n              if(\r\n                !data.lastModified[lastModifiedKey][objectIdKey] ||\r\n                typeof data.lastModified[lastModifiedKey][objectIdKey] !== \"object\"\r\n              ) continue\r\n              Object.keys(data.lastModified[lastModifiedKey][objectIdKey]).forEach(propertyKey => {\r\n                let localStorageKey = [\"lastModified\", lastModifiedKey, objectIdKey, propertyKey].join(\"_\")\r\n                let dateString = data.lastModified[lastModifiedKey][objectIdKey][propertyKey]\r\n                if(typeof dateString !== \"string\") dateString = dateString.toISOString()\r\n                localStorage[localStorageKey] = dateString\r\n              })\r\n            }\r\n          }\r\n          else{\r\n            if(lastModifiedKey === \"settings\"){\r\n              for(let settingsKey of Object.keys(data.lastModified.settings)){\r\n                let dateString = data.lastModified.settings[settingsKey]\r\n                if(!dateString) continue\r\n                let localStorageKey = \"lastModified_settings_\" + settingsKey\r\n                if(typeof dateString !== \"string\") dateString = dateString.toISOString()\r\n                localStorage[localStorageKey] = dateString\r\n              }\r\n            }\r\n            else{\r\n              let dateString = data.lastModified[lastModifiedKey]\r\n              if(dateString){\r\n                if(typeof dateString !== \"string\") dateString = dateString.toISOString()\r\n                localStorage[\"lastModified_\" + lastModifiedKey] = dateString\r\n              }\r\n            }\r\n          }\r\n        })\r\n      }\r\n      else{\r\n        // store the actual values\r\n        if(typeof data[key] === \"object\") localStorage[key] = JSON.stringify(data[key])\r\n        else localStorage[key] = data[key]\r\n      }\r\n    })\r\n  }\r\n\r\n  checkForUpdates = () => {\r\n    if(this.state.accessToken && !this.io.disconnected){\r\n      this.io.emit(\"checkForUpdates\", {accessToken: this.state.accessToken})\r\n    }\r\n  }\r\n\r\n  render(){\r\n    var {accessToken, temp, lastModified, ...data} = this.state\r\n\r\n    return (\r\n      <MuiThemeProvider theme={data.settings.darkTheme ? darkTheme : lightTheme}>\r\n        <div style={{position: \"relative\"}} onFocus={this.checkForUpdates}\r\n          className={data.settings.darkTheme ? \"darkRoot\" : \"lightRoot\"}\r\n        >\r\n          <CssBaseline />\r\n          <Router\r\n            data={data}\r\n            connect={this.connect}\r\n            update={this.update}\r\n            disconnect={this.disconnect}\r\n            loggedIn={Boolean(this.state.accessToken)}\r\n            disconnected={this.state.temp.disconnected}\r\n            checkForUpdates={this.checkForUpdates}\r\n          />\r\n          <Snackbar\r\n            anchorOrigin={{\r\n              vertical: 'bottom',\r\n              horizontal: 'left',\r\n            }}\r\n            open={this.state.temp.showDisconnectedError}\r\n            autoHideDuration={6000}\r\n            onClose={this.closeSnackbar}\r\n          >\r\n            <SnackbarContent\r\n              style={{backgroundColor: \"#d32f2f\"}}\r\n              aria-describedby=\"disconnectedErrorSnackbar\"\r\n              message={<span id=\"disconnectedErrorSnackbar\">We're having trouble reaching our server</span>}\r\n              action={[\r\n                <IconButton\r\n                  key=\"close\"\r\n                  aria-label=\"Close\"\r\n                  color=\"inherit\"\r\n                  styles={{padding: \".5rem\"}}\r\n                  onClick={this.closeSnackbar}\r\n                >\r\n                  <CloseIcon />\r\n                </IconButton>\r\n              ]}\r\n            />\r\n          </Snackbar>\r\n        </div>\r\n      </MuiThemeProvider>\r\n    )\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import 'core-js'; // polyfill\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './css/index.css';\r\nimport ErrorBoundary from './ErrorBoundary'\r\nimport DataSync from './DataSync';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <ErrorBoundary>\r\n    <DataSync />\r\n  </ErrorBoundary>\r\n    , document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}
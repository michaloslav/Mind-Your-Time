(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1094:function(e,t,a){},1096:function(e,t,a){},1098:function(e,t,a){},1100:function(e,t,a){},1104:function(e,t,a){},1107:function(e,t,a){},1109:function(e,t,a){},1111:function(e,t,a){},1123:function(e,t,a){},1125:function(e,t,a){},1127:function(e,t,a){},1130:function(e,t,a){},1136:function(e,t,a){},1163:function(e,t){},1166:function(e,t,a){},1169:function(e,t,a){"use strict";a.r(t);a(443);var n=a(0),r=a.n(n),o=a(57),s=a.n(o),i=(a(769),a(62)),l=a(118),c=a(10),u=a(11),d=a(24),p=a(15),m=a(13),h=a(14),f=a(49),g=a(90),b=a(212),E=a(23),v=a.n(E),y=a(214),j=a.n(y),T=(a(771),function(e){return r.a.createElement(v.a,{onClick:e.onClick,className:"BackButton","aria-label":"Back"},r.a.createElement(j.a,null))}),k=a(48),w=a.n(k),C=a(162),S=a.n(C),O=a(42),D=a.n(O),I=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"toMinutesSinceMidnight",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(typeof e){case"number":t=e;break;case"string":if(t=parseInt(e),isNaN(t))return void console.warn("Unexpected input: ",e);break;case"object":var n=parseInt(e.h);12===n&&"pm"in e&&(n-=12),t=60*n+parseInt(e.m),e.pm&&(t+=720),e.s&&(t+=e.s/60);break;default:return void console.warn("Unexpected input: ",e)}return a&&this.isBiggerThan(e,0,!0)&&this.isBiggerThan(300,e,!0)&&(t+=1440),t}},{key:"toTimeObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Number.isInteger(e)||(e=Math.round(e));var a=!1;if(t){for(;e>=1440;)e-=1440;e>=720&&(a=!0,e-=720)}var n=e%60,r=(e-n)/60;return(isNaN(r)||isNaN(n))&&console.warn("NaN result: ",{h:r,m:n,pm:a}),t?{h:r,m:n,pm:a}:{h:r,m:n}}},{key:"addToMinutes",value:function(){for(var e=Array.isArray(arguments[0])?arguments[0]:arguments,t=0,a=0;a<e.length;a++)t+=this.toMinutesSinceMidnight(e[a]);return Number.isInteger(t)?t:Math.round(t)}},{key:"add",value:function(){return this.toTimeObject(this.addToMinutes.apply(this,arguments))}},{key:"subtractToMinutes",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.toMinutesSinceMidnight(e,a)-this.toMinutesSinceMidnight(t,a);return Number.isInteger(n)?n:Math.round(n)}},{key:"subtract",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.subtractToMinutes(e,t,a);return this.toTimeObject(n,!1)}},{key:"makeString",value:function(e){var t,a,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("number"===typeof e&&(e=this.toTimeObject(e,n)),o&&(n=!1),"string"===typeof e.m&&(e.m=parseInt(e.m)),e.s&&e.s>29&&(e.m=parseInt(e.m)+1),a=e.m>=10?e.m:"0"+e.m,t=(n||r)&&0===e.h?12:parseInt(e.h),o&&e.pm&&(t+=12),!isNaN(a)){var s=t+":"+a;if("undefined"!==typeof e.pm&&n)s+=" "+(e.pm?"PM":"AM");return s}console.warn("Wrong input to makeString: ",e)}},{key:"round",value:function(e,t){var a=this.toMinutesSinceMidnight(e);return a=Math.round(a/t)*t,this.toTimeObject(a)}},{key:"isBiggerThan",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.subtractToMinutes(e,t,n);return a?r>=0:r>0}},{key:"areIdentical",value:function(){for(var e,t=0;t<arguments.length;t++){var a=arguments[t];if(isNaN(a.h)&&(a.h=a.h.toString()),isNaN(a.m)&&(a.m=a.m.toString()),"string"===typeof a.h&&(a.h=parseInt(a.h)),"string"===typeof a.m&&(a.m=parseInt(a.m)),e){if(a.h!==e.h||a.m!==e.m||a.pm!==e.pm)return!1;e=a}else e=a}return!0}},{key:"suggestStartTime",value:function(e,t,a){var n=this.add(e,t*a.bufferTimePercentage);return this.round(n,a.roundTo)}},{key:"average",value:function(){var e=this.addToMinutes.apply(this,arguments),t=Math.round(e/arguments.length);return this.toTimeObject(t)}},{key:"makeFullLengthDurationString",value:function(e){var t=parseInt(e.h),a=parseInt(e.m);e.pm&&(t+=12);var n="";return t&&(n+=t+" hour"),t>1&&(n+="s"),t&&a&&(n+=" and "),a&&(n+=a+" minute"),a>1&&(n+="s"),t||a||(n="0 minutes"),n}}]),e}();function P(e,t,a,n){if((a=JSON.parse(JSON.stringify(a))).length){for(var r={projects:[],breaks:[]},o=0;o<e.length;o++)r.projects[o]=I.average(e[o].plannedTime.start,e[o].plannedTime.end);for(var s=0;s<a.length;s++)r.breaks[s]=I.average(a[s].startTime,a[s].endTime)}for(var i=0;i<e.length;i++){e[i].plannedTime||(e[i].plannedTime={}),e[i].plannedTime.start=0!==i?I.suggestStartTime(e[i-1].plannedTime.end,e[i-1].estimatedDuration,t):n,e[i].plannedTime.end=I.add(e[i].plannedTime.start,e[i].estimatedDuration);for(var l=0;l<a.length;l++){var c=0===i?e[i].plannedTime.start:e[i-1].plannedTime.end;if(I.isBiggerThan(e[i].plannedTime.end,a[l].startTime,!0,!0)&&I.isBiggerThan(a[l].startTime,c,!0,!0)){var u=I.isBiggerThan(r.projects[i],r.breaks[l],!0,!0),d=I.subtractToMinutes(a[l].endTime,a[l].startTime,!0);u?(a[l].startTime=0===i?e[i].plannedTime.start:e[i-1].plannedTime.end,a[l].endTime=I.add(a[l].startTime,d),e[i].plannedTime.start=0===i?a[l].endTime:I.suggestStartTime(a[l].endTime,e[i-1].estimatedDuration,t),e[i].plannedTime.end=I.add(e[i].plannedTime.start,e[i].estimatedDuration)):(a[l].startTime=e[i].plannedTime.end,a[l].endTime=I.add(a[l].startTime,d))}}}return e}function M(e,t,a){return""===e||!isNaN(e)&&e>=t&&e<=a}var N=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleKeyPress=function(e){"Enter"===e.key&&a.props.onEnterPress&&a.props.onEnterPress()},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"handleInputChange",value:function(e,t){var a;a="number"===typeof t?t:"pm"===e?"PM"===t.target.value:t.target.value;var n=this.props.settings.timeFormat24H?24:12;"h"===e&&!M(a,1,n)||"m"===e&&!M(a,0,59)||(this.props.settings.timeFormat24H&&"h"===e&&(a>=12?(a-=12,this.props.onChange("pm",!0)):this.props.onChange("pm",!1)),this.props.onChange(e,a))}},{key:"handleKeyDown",value:function(e,t){var a;if("ArrowUp"===t.key&&(a="up"),"ArrowDown"===t.key&&(a="down"),a){var n=this.props.value;n&&!isNaN(n.m)||(n=0);var r="m"===e?this.props.settings.roundTo:60;n="up"===a?I.add(n,r):I.toTimeObject(I.subtractToMinutes(n,r),!0),I.isBiggerThan(0,n,!1)&&(n=I.add(n,1440)),this.props.onChange("object",n)}}},{key:"render",value:function(){var e=this.props.value.h;e=0===e?12:e;var t=this.props.value.m;return t=0===t?"0"+t:t,r.a.createElement("div",{className:"TimeSetterDesktop"+(this.props.showError?" timeSetterError":""),style:{display:"inline"}},r.a.createElement(w.a,{onChange:this.handleInputChange.bind(this,"h"),value:this.props.settings.timeFormat24H&&this.props.value.pm?e+12:e,id:this.props.firstInputId,placeholder:"Hours","aria-label":"Hours",autoComplete:"off",error:this.props.hError,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown.bind(this,"h")}),":",r.a.createElement(w.a,{onChange:this.handleInputChange.bind(this,"m"),value:t,placeholder:"Minutes","aria-label":"Minutes",autoComplete:"off",error:this.props.mError,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown.bind(this,"m")}),!this.props.settings.timeFormat24H&&r.a.createElement(S.a,{onChange:this.handleInputChange.bind(this,"pm"),value:this.props.value.pm?"PM":"AM"},r.a.createElement(D.a,{value:"AM"},"AM"),r.a.createElement(D.a,{value:"PM"},"PM")))}}]),t}(n.Component),B=a(420),A=a.n(B),x=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=60*e.getHours()+e.getMinutes(),n=I.toTimeObject(t);a.props.onChange("object",n)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=new Date,t=this.props.value.h;return this.props.value.pm&&(t+=12),e.setHours(t),e.setMinutes(this.props.value.m),r.a.createElement(A.a,{className:"TimeSetterMobile",mode:this.props.mode,value:e,onChange:this.handleChange,error:this.props.error})}}]),t}(n.Component),L=r.a.createContext({}),_=r.a.createContext({}),F=(a(903),function(e){return r.a.createElement(L.Consumer,null,function(t){return r.a.createElement(_.Consumer,null,function(a){return a?r.a.createElement(x,{mode:t.timeFormat24H?"24h":"12h",value:e.value,onChange:e.onChange,error:e.hError||e.mError||e.showErrorProp}):r.a.createElement(N,{onChange:e.onChange,value:e.value,firstInputId:e.firstInputId,hError:e.hError,mError:e.mError,onEnterPress:e.onEnterPress,settings:t})})})}),R=(a(905),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).render=function(){return r.a.createElement("span",{className:"ColorPicker"},r.a.createElement("input",{className:"colorInput",ref:function(e){return a.colorInput=e},type:"color","aria-label":"Color",value:a.props.value,onChange:function(e){a.props.onChange(e.target.value)}}),r.a.createElement("svg",{width:a.props.xl?50:20,height:a.props.xl?30:20,onClick:function(){a.colorInput.click()}},a.props.xl?r.a.createElement("rect",{width:"50",height:"30",rx:"5",ry:"5",style:{fill:a.props.value}}):r.a.createElement("circle",{cx:"10",cy:"10",r:".5rem",fill:a.props.value})))},a.state={},a.colorInput=r.a.createRef(),a}return Object(h.a)(t,e),t}(n.Component)),V=a(17),W=a.n(V),U=a(285),H=a.n(U),K=a(41),Y=a.n(K),J=a(27),G=a.n(J),q=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],z=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function Z(e){var t="",a=e.length;return e.forEach(function(e,n){t+=e,n===a-2&&(t+=" & "),n<a-2&&(t+=", ")}),t}function $(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"Every day";var a=e.filter(function(e){return e}).length;if(7===a)return"Every day";if(0===a)return"Never";var n=t?z:q;if(a>=5){var r=[];e.forEach(function(e,t){e||r.push(n[t])});var o=t?"All":"Every day";return o+=" except "+Z(r)}var s=[];return e.forEach(function(e,t){e&&s.push(n[t])}),Z(s)}a(907);var Q=function(e){return r.a.createElement(W.a,{className:"MobileInputFields container"},r.a.createElement(T,{onClick:e.close}),r.a.createElement(W.a,{className:"buttonTop"},e.buttonTop),e.title&&r.a.createElement(Y.a,{className:"title",variant:"h6",children:e.title}),r.a.createElement(W.a,{style:e.title?{}:{paddingTop:"1.5rem"}},r.a.createElement(H.a,{value:e.inputValues.name,onChange:e.onInputChange.bind(void 0,"name"),onKeyDown:e.onKeyDown,placeholder:"Name","aria-label":"Name",error:e.showErrors.name||e.showErrorProp,fullWidth:!0,margin:"normal",autoFocus:!0})),r.a.createElement(W.a,{className:"durationAndStartTimeDiv",container:!0,justify:"space-between"},"break"!==e.type&&r.a.createElement(W.a,{item:!0,xs:"default"===e.type?12:6,className:"item"},r.a.createElement("label",null,"Duration:"),r.a.createElement(H.a,{type:"number",value:e.inputValues.duration,onChange:e.onInputChange.bind(void 0,"duration"),onKeyDown:e.onKeyDown,placeholder:"Duration","aria-label":"Duration",error:e.showErrors.duration||e.showErrorProp})),"default"!==e.type&&r.a.createElement(W.a,{item:!0,xs:6,className:"item"},r.a.createElement("label",null,"Start:"),r.a.createElement(F,{value:e.inputValues.startTime,onChange:e.onTimeInputChange.bind(void 0,"startTime"),firstInputId:"newProjectStartTimeInput",hError:e.showErrors.startTimeH||e.showErrorProp,mError:e.showErrors.startTimeM||e.showErrorProp,showErrors:e.showErrors,onEnterPress:e.add})),"break"===e.type&&r.a.createElement(W.a,{item:!0,xs:6,className:"item"},r.a.createElement("label",null,"End:"),r.a.createElement(F,{value:e.inputValues.endTime,onChange:e.onTimeInputChange.bind(void 0,"endTime"),firstInputId:"newProjectEndTimeInput",hError:e.showErrors.endTimeH||e.showErrors.endTime||e.showErrorProp,mError:e.showErrors.endTimeM||e.showErrors.endTime||e.showErrorProp,showErrors:e.showErrors,onEnterPress:e.add}))),"break"!==e.type&&r.a.createElement(W.a,null,"Color:",r.a.createElement(R,{xl:!0,value:e.inputValues.color,onChange:e.onColorChange})),"default"===e.type&&r.a.createElement(W.a,{className:"days",container:!0,alignItems:"baseline",justify:"space-between"},r.a.createElement(W.a,{item:!0,xs:9},"Days:",r.a.createElement("br",null),$(e.inputValues.days)),r.a.createElement(W.a,{item:!0,xs:3},r.a.createElement(G.a,{onClick:e.openDaysDialog,variant:"outlined"},"Edit"))),r.a.createElement(W.a,{className:"confirmDiv",container:!0,justify:"center"},e.button))},X=/[{}[\]"':;`]/;function ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];return""===e.name&&a.push("name"),(""===e.duration||isNaN(e.duration)||e.duration>1440||e.duration<=0)&&a.push("duration"),t||((""===e.startTime.h||isNaN(e.startTime.h))&&a.push("startTimeH"),(""===e.startTime.m||isNaN(e.startTime.m))&&a.push("startTimeM")),a.length?{valid:!1,errors:a}:{valid:!0}}function te(e){var t=[];return""===e.name&&t.push("name"),(""===e.startTime.h||isNaN(e.startTime.h)||e.startTime.h<0)&&t.push("startTimeH"),(""===e.startTime.m||isNaN(e.startTime.m)||e.startTime.m<0)&&t.push("startTimeM"),(""===e.endTime.h||isNaN(e.endTime.h)||e.endTime.h<0)&&t.push("endTimeH"),(""===e.endTime.m||isNaN(e.endTime.m)||e.endTime.m<0)&&t.push("endTimeM"),I.isBiggerThan(e.startTime,e.endTime,!1,!0)&&t.push("endTime"),t.length?{valid:!1,errors:t}:{valid:!0}}var ae=a(9),ne=a(215),re=a.n(ne),oe=a(216),se=a.n(oe),ie=a(164),le=a.n(ie),ce=a(217),ue=a.n(ce),de=a(218),pe=a.n(de),me=a(219),he=a.n(me),fe=function(e){function t(e){var a,n;if(Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{id:"DefaultProjectsDaysDialogTitle"},"Days",a.props.project.name&&" - "+a.props.project.name),r.a.createElement(se.a,null,r.a.createElement(ue.a,null,["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(function(e,t){return r.a.createElement(pe.a,{key:t,control:r.a.createElement(he.a,{checked:a.state.days[t],onChange:a.handleChange.bind(Object(ae.a)(Object(ae.a)(a)),t)}),label:e})}))),r.a.createElement(le.a,null,r.a.createElement(G.a,{color:"primary",onClick:function(){return a.props.close()}},"Save")))},a.props.project&&a.props.project.days)n=a.props.project.days;else{n=[];for(var o=0;o<7;o++)n.push(!0)}return a.state={days:n},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.days;a[e]=t.currentTarget.checked,this.setState({days:a}),this.props.save(a)}}]),t}(n.Component),ge=a(117),be=a.n(ge),Ee=function(e){return function(t){function a(t){var n,o;if(Object(u.a)(this,a),(n=Object(p.a)(this,Object(m.a)(a).call(this,t))).handleColorChange=function(e){n.setState({inputValues:Object(c.a)({},n.state.inputValues,{color:e})})},n.toggleDaysDialog=function(e){return n.setState({temp:Object(c.a)({},n.state.temp,{dialogProjectId:e})})},n.handleDaysChange=function(e){n.setState({inputValues:Object(c.a)({},n.state.inputValues,{days:e})})},n.render=function(){var t=r.a.createElement(e,Object.assign({},n.props,{inputValues:n.state.inputValues,showErrors:n.state.showErrors,showErrorProp:!!n.props.showErrors&&n.props.showErrors.noProjects,onInputChange:n.handleInputChange.bind(Object(ae.a)(Object(ae.a)(n))),onTimeInputChange:n.handleTimeInputChange.bind(Object(ae.a)(Object(ae.a)(n))),onColorChange:n.handleColorChange,setState:n.setState.bind(Object(ae.a)(Object(ae.a)(n))),openDaysDialog:n.toggleDaysDialog.bind(Object(ae.a)(Object(ae.a)(n)),!0)}));if("default"===n.props.type){var a=n.state.temp.dialogProjectId;return r.a.createElement(r.a.Fragment,null,t,r.a.createElement(be.a,{open:a,onClose:n.toggleDaysDialog.bind(Object(ae.a)(Object(ae.a)(n)),!1),"aria-labelledby":"DefaultProjectsDaysDialogTitle"},r.a.createElement(fe,{project:n.state.inputValues,close:n.toggleDaysDialog.bind(Object(ae.a)(Object(ae.a)(n)),!1),save:n.handleDaysChange})))}return t},n.props.inputValues)o=n.props.inputValues;else{o={name:""};var s,i=n.props.type,l=n.props.settings.roundTo||5;if("default"===i){o.days=[];for(var d=0;d<7;d++)o.days.push(!0)}else{var h,f=n.props.lastProject;h=f&&f.plannedTime?I.suggestStartTime(f.plannedTime.end,f.estimatedDuration,n.props.settings):n.props.currentTime&&!n.props.currentTime.defaultVal?I.round(I.add(n.props.currentTime,15),l):{h:12,m:0,pm:!0,lastResortValue:!0},o.startTime=h}"break"===n.props.type?o.endTime=I.round(I.add(o.startTime,30),l):(o.duration="",s="undefined"!==typeof n.props.defaultColorIndex?n.props.settings.defaultColors[n.props.defaultColorIndex]:"#000000",o.color=s)}return n.state={inputValues:o,userHasntChangedStartTime:!0,defaultColorIndex:n.props.defaultColorIndex,showErrors:{},temp:{dialogProjectId:!1}},n}return Object(h.a)(a,t),Object(d.a)(a,[{key:"componentDidUpdate",value:function(){if("default"!==this.props.type&&""!==this.state.inputValues.h&&this.state.userHasntChangedStartTime&&this.props.settings.bufferTimePercentage&&this.props.lastProject&&!this.props.isDefaultProjects){var e=I.suggestStartTime(this.props.lastProject.plannedTime.end,this.props.lastProject.estimatedDuration,this.props.settings);if(""===this.state.inputValues.startTime.h||!I.areIdentical(e,this.state.inputValues.startTime)){var t=Object(c.a)({},this.state.inputValues,{startTime:e});if("break"===this.props.type){var a=I.round(I.add(e,30),this.props.settings.roundTo);t.endTime=a}this.setState({inputValues:t})}}if("break"!==this.props.type&&!this.props.inputValues&&"undefined"===typeof this.state.defaultColorIndex&&"undefined"!==typeof this.props.defaultColorIndex&&this.props.settings.defaultColors){var n=this.state.inputValues,r=this.props.settings.defaultColors,o=this.props.defaultColorIndex;r.length<=o&&(o=0),n.color=r[o],n.color=n.color?n.color:"#000000",this.setState({inputValues:n,defaultColorIndex:o})}if("default"!==this.props.type&&this.state.inputValues.startTime.lastResortValue&&this.props.currentTime&&this.props.settings.roundTo){var s=this.state.inputValues,i=this.props.settings.roundTo;s.startTime=I.round(I.add(this.props.currentTime,15),i),"break"===this.props.type&&(s.endTime=I.round(I.add(s.startTime,30),i)),this.setState({inputValues:s})}}},{key:"handleInputChange",value:function(e,t){var a=t.target.value;(function(e,t){return!("name"===e&&t.length>30)&&("duration"!==e||!(isNaN(t)&&""!==t||t<0))&&!X.test(t)})(e,a)&&this.setState({inputValues:Object(c.a)({},this.state.inputValues,Object(f.a)({},e,a)),showErrors:Object(c.a)({},this.state.showErrors,Object(f.a)({},e,!1))})}},{key:"handleTimeInputChange",value:function(e,t,a){var n={inputValues:this.state.inputValues,showErrors:this.state.showErrors};"object"===t?n.inputValues[e]=a:n.inputValues[e][t]=a,n.showErrors[e+t.toUpperCase()]=!1,n.userHasntChangedStartTime=!1,this.setState(n)}}]),a}(n.Component)},ve=function(e){return Ee(function(t){function a(){var t,n;Object(u.a)(this,a);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return(n=Object(p.a)(this,(t=Object(m.a)(a)).call.apply(t,[this].concat(s)))).add=function(e){var t,a=n.props,r=a.inputValues,o=a.type;if(!(t="break"===o?te(r):ee(r,"default"===o)).valid){var s=n.props.showErrors;return t.errors.forEach(function(e){s[e]=!0}),void n.setState(s)}var i,l={name:""};if("default"!==o&&(l.startTime={h:"",m:"",pm:!0}),"break"===o)l.endTime={h:"",m:"",pm:!0},n.props.onAddBreak(n.props.inputValues);else{l.duration="",l.color=r.color;var c=n.props.settings.defaultColors,u=n.props.defaultColorIndex;i=u>=c.length-1?0:++u,l.color=c[i],n.props.onAddProject(n.props.inputValues,i)}var d={inputValues:l};"break"!==o&&(d.defaultColorIndex=i),n.props.setState(d),"function"===typeof e&&e()},n.handleKeyPress=function(e){"Enter"===e.key&&n.add()},n.render=function(){return r.a.createElement(e,Object.assign({},n.props,{add:n.add,onKeyPress:n.handleKeyPress}))},n}return Object(h.a)(a,t),a}(n.Component))},ye=ve(function(e){return r.a.createElement(Q,Object.assign({},e,{button:r.a.createElement(G.a,{onClick:function(){e.add(e.close)},color:"primary",variant:"contained"},"Add")}))}),je=a(98),Te=a.n(je),ke=function(e){return Ee(function(t){function a(){var t,n;Object(u.a)(this,a);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return(n=Object(p.a)(this,(t=Object(m.a)(a)).call.apply(t,[this].concat(s)))).save=function(){var e,t=n.props,a=t.inputValues,r=t.type;if(!(e="break"===r?te(a):ee(a,"default"===r)).valid){var o=n.props.showErrors;return e.errors.forEach(function(e){o[e]=!0}),void n.props.setState(o)}n.props.onDoneEditing(n.props.inputValues),n.props.close()},n.handleKeyPress=function(e){"Enter"===e.key&&n.save()},n.render=function(){return r.a.createElement(e,Object.assign({},n.props,{save:n.save,onKeyPress:n.handleKeyPress}))},n}return Object(h.a)(a,t),a}(n.Component))},we=ke(function(e){return r.a.createElement(Q,Object.assign({},e,{button:r.a.createElement(G.a,{onClick:e.save,color:"primary",variant:"contained"},"Save"),buttonTop:r.a.createElement(v.a,{onClick:function(){window.confirm("Are you sure you want to delete this?")&&(e.close(),e.delete())}},r.a.createElement(Te.a,null)),title:e.type&&"Edit the "+("break"===e.type?"break":"default"===e.type&&"repetitive project")}))}),Ce=a(220),Se=a.n(Ce),Oe=a(99),De=a.n(Oe),Ie=(a(933),function(e){return r.a.createElement(Se.a,{onClick:e.onClick,color:"primary",className:"AddFab","aria-label":"Add a project"},r.a.createElement(De.a,null))}),Pe=a(67),Me=a.n(Pe),Ne=a(68),Be=a.n(Ne),Ae=a(79),xe=a.n(Ae),Le=a(38),_e=a.n(Le),Fe=a(5),Re=a.n(Fe),Ve=a(221),We=a.n(Ve),Ue=(a(936),function(e){return r.a.createElement(W.a,{className:"BreaksView container"},r.a.createElement(T,{onClick:e.changeView.bind(void 0,"breaks",!1)}),r.a.createElement(Y.a,{variant:"h6",className:"title"},"Breaks"),r.a.createElement(Me.a,null,r.a.createElement(xe.a,null,r.a.createElement(_e.a,null,r.a.createElement(Re.a,null,"Name"),r.a.createElement(Re.a,null,"Time"),r.a.createElement(Re.a,null))),r.a.createElement(Be.a,null,e.breaks.length?e.breaks.map(function(t){return r.a.createElement(_e.a,{key:t.id},r.a.createElement(Re.a,null,t.name),r.a.createElement(Re.a,null,r.a.createElement(L.Consumer,null,function(e){return I.makeString(t.startTime,t.startTime.pm!==t.endTime.pm,!0,e.timeFormat24H)+"-"+I.makeString(t.endTime,!0,!0,e.timeFormat24H)})),r.a.createElement(Re.a,null,r.a.createElement(v.a,{onClick:e.changeView.bind(void 0,"edit",!0,{type:"break",id:t.id})},r.a.createElement(We.a,null))))}):r.a.createElement(_e.a,null,r.a.createElement(Re.a,{colSpan:4},"You haven't set any breaks")))),r.a.createElement(Ie,{onClick:e.changeView.bind(void 0,"add",!0,{type:"break"})}))}),He=function(e){return r.a.createElement(Re.a,{className:"setStartTimeCell"},r.a.createElement("div",{className:"setStartTimeLabelDiv"},r.a.createElement("label",{htmlFor:e.firstInputId},"Start:")),r.a.createElement(F,{onChange:e.onChange,value:e.value,firstInputId:e.firstInputId,hError:e.hError,mError:e.mError,onEnterPress:e.onEnterPress}))},Ke=a(91),Ye=a.n(Ke),Je=(a(267),ke(function(e){return r.a.createElement(_.Consumer,null,function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Re.a,{className:"setNameCell"},r.a.createElement(w.a,{value:e.inputValues.name,onChange:e.onInputChange.bind(void 0,"name"),placeholder:"Name","aria-label":"Name",error:e.showErrors.name,onKeyPress:e.onKeyPress})),(!t||"default"===e.type)&&r.a.createElement(Re.a,{className:"setDurationCell"},r.a.createElement(L.Consumer,null,function(t){var a=t.roundTo;return r.a.createElement(w.a,{value:e.inputValues.duration,onChange:e.onInputChange.bind(void 0,"duration"),placeholder:"Duration","aria-label":"Duration",error:e.showErrors.duration,onKeyPress:e.onKeyPress,type:"number",inputProps:{step:a}})})),"default"!==e.type&&r.a.createElement(He,{value:e.inputValues.startTime,onChange:e.onTimeInputChange.bind(void 0,"startTime"),firstInputId:"changeStartTimeInput"+e.id,hError:e.showErrors.startTimeH,mError:e.showErrors.startTimeM,onEnterPress:e.save}),"default"===e.type&&!t&&r.a.createElement(Re.a,null,r.a.createElement(G.a,{onClick:e.openDaysDialog,variant:"outlined"},"Days")),r.a.createElement(Re.a,null,r.a.createElement(v.a,{"aria-label":"Save changes",onClick:e.save,color:"primary"},r.a.createElement(Ye.a,null)),!t&&r.a.createElement(v.a,{"aria-label":"Delete the project",onClick:e.delete,className:"deleteIconButton"},r.a.createElement(Te.a,null))))})})),Ge=(a(945),function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value;isNaN(t)||a.setState({progress:t})},a.save=function(){a.props.onPause(a.props.row.id,"paused",a.state.progress)},a.render=function(){return r.a.createElement(L.Consumer,null,function(e){var t=e.darkTheme;return r.a.createElement("div",{className:"SetProgressPopoverContent",style:{color:t?"white":"black"}},r.a.createElement("span",null,"I've worked on this for "),r.a.createElement(w.a,{autoFocus:!0,"aria-label":"Progress in minutes",value:a.state.progress||"",onChange:a.handleInputChange,onKeyPress:function(e){"Enter"===e.key&&a.save()}}),r.a.createElement("span",null," minutes"),r.a.createElement(v.a,{"aria-label":"Save the progress and pause the project",onClick:a.save,color:"primary"},r.a.createElement(Ye.a,null)))})};var n=I.subtractToMinutes(Object(c.a)({},e.currentTime,{s:(new Date).getSeconds()}),e.row.startedWorkingOnIt,!0);return e.row.progress&&(n+=parseInt(e.row.progress)),a.state={progress:n},a}return Object(h.a)(t,e),t}(n.Component)),qe=a(163),ze=a.n(qe),Ze=a(92),$e=a.n(Ze),Qe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.close=function(){a.setState({anchorEl:null})},a.state={anchorEl:null},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.anchorEl;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{"aria-label":"Pause the project",onClick:this.handleClick},r.a.createElement($e.a,null)),r.a.createElement(ze.a,{open:Boolean(e),anchorEl:e,onClose:this.close,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(Ge,this.props)))}}]),t}(n.Component),Xe=a(131),et=a.n(Xe),tt=a(73),at=a.n(tt),nt=(a(947),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).open=function(e){a.setState({anchorEl:e.currentTarget})},a.close=function(){a.setState({anchorEl:null}),setTimeout(function(){a.setState({showSetProgress:!1})},500)},a.render=function(){var e=a.state.anchorEl,t=a.props.progressCapped===a.props.row.estimatedDuration;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{"aria-label":"Open the project state dropdown",onClick:a.open,color:"primary"},t?r.a.createElement(Ye.a,{color:"primary"}):r.a.createElement($e.a,{color:"primary"})),r.a.createElement(ze.a,{className:"ChangeProjectStateDropdownMenu",anchorEl:e,open:Boolean(e),onClose:a.close},a.state.showSetProgress?r.a.createElement(Ge,{onPause:a.props.onProjectStateChange,row:a.props.row,currentTime:a.props.currentTime}):r.a.createElement(et.a,null,[{title:"Pause",icon:r.a.createElement($e.a,{color:t?void 0:"primary"}),onClick:a.setState.bind(Object(ae.a)(Object(ae.a)(a)),{showSetProgress:!0},null)},{title:"Done",icon:r.a.createElement(Ye.a,{color:t?"primary":void 0}),onClick:a.props.onProjectStateChange.bind(Object(ae.a)(Object(ae.a)(a)),a.props.row.id,"done")}].map(function(e){return r.a.createElement(at.a,{key:e.title,button:!0,onClick:e.onClick},e.icon,e.title)}))))},a.state={anchorEl:null,showSetProgress:!1},a}return Object(h.a)(t,e),t}(n.Component)),rt=a(222),ot=a.n(rt),st=a(421),it=a.n(st);a(949);function lt(e){var t=[];return"done"===e.row.state?(e.isMobile||t.push(r.a.createElement("span",{key:"doneSpan",className:"done"},"DONE")),t.push(r.a.createElement(v.a,{key:"undo","aria-label":"Mark project as undone",onClick:e.onProjectStateChange.bind(this,e.row.id,"paused")},r.a.createElement(it.a,null)))):("workingOnIt"===e.row.state?e.isMobile?t.push(r.a.createElement(nt,{key:"dropdown",row:e.row,currentTime:e.currentTime,onProjectStateChange:e.onProjectStateChange,progressCapped:e.progressCapped})):t.push(r.a.createElement(Qe,{key:"pause",row:e.row,currentTime:e.currentTime,onPause:e.onProjectStateChange})):t.push(r.a.createElement(v.a,{key:"start","aria-label":"Start working on the project",onClick:e.onProjectStateChange.bind(this,e.row.id,"workingOnIt"),color:"primary"},r.a.createElement(ot.a,null))),e.isMobile||t.push(r.a.createElement(v.a,{key:"done","aria-label":"Mark the project as done",onClick:e.onProjectStateChange.bind(this,e.row.id,"done"),color:"workingOnIt"===e.row.state?"primary":void 0},r.a.createElement(Ye.a,null)))),r.a.createElement(Re.a,{className:"ChangeProjectStateCell"},t.map(function(e){return e}))}var ct=a(72),ut=a.n(ct),dt=function(e){var t=r.a.createElement("div",null,r.a.createElement("span",{className:e.startIsTooLate&&"stateClassTooLate"===e.stateClass?e.stateClass:null},I.makeString(e.row.plannedTime.start,e.row.plannedTime.start.pm!==e.row.plannedTime.end.pm,!0,e.timeFormat24H)),r.a.createElement("span",{className:e.startIsTooLate&&e.endIsTooLate&&"stateClassTooLate"===e.stateClass?e.stateClass:null},"-"),r.a.createElement("span",{className:e.endIsTooLate&&"stateClassDone"!==e.stateClass?"stateClassTooLate":null},I.makeString(e.row.plannedTime.end,!0,!1,e.timeFormat24H)));return r.a.createElement(Re.a,{className:e.showEditing?"setStartTimeCell":null},e.isMobile?r.a.createElement(ut.a,{title:e.progress+"/"+e.row.estimatedDuration+" done",disableFocusListener:!0,disableTouchListener:!0,children:t}):t)},pt=function(e){var t,a,n,o,s=e.progress,i=e.progressCapped;if(!e.isDefaultProjects){o=parseInt(e.row.estimatedDuration)-i,a=!I.isBiggerThan(I.add(e.row.plannedTime.start,i),e.currentTime,!0,!0);var l=I.toMinutesSinceMidnight(e.row.plannedTime.end,!0),c=e.row.estimatedDuration*e.settings.bufferTimePercentage;n=!I.isBiggerThan(l+c,e.currentTime,!0,!0),"done"===e.row.state?t="stateClassDone":a&&"workingOnIt"!==e.row.state&&(t="stateClassTooLate")}return r.a.createElement(_.Consumer,null,function(l){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Re.a,{className:t,children:e.row.name}),(!l||e.isDefaultProjects)&&r.a.createElement(Re.a,null,s&&"done"!==e.row.state?r.a.createElement(ut.a,{title:s+"/"+e.row.estimatedDuration+" done"},r.a.createElement("span",null,o," minutes left")):e.row.estimatedDuration+" minutes"),!e.isDefaultProjects&&r.a.createElement(L.Consumer,null,function(o){return r.a.createElement(dt,{showEditing:!1,startIsTooLate:a,endIsTooLate:n,stateClass:t,row:e.row,timeFormat24H:o.timeFormat24H,isMobile:l,progress:s})}),e.isDefaultProjects&&!l&&r.a.createElement(Re.a,null,$(e.row.days,window.innerWidth<950)),"planning"===e.mode?r.a.createElement(Re.a,null,r.a.createElement(v.a,{"aria-label":"Edit the project",onClick:l?e.startEditingMobile.bind(void 0,e.row.id):e.startEditing},r.a.createElement(We.a,null)),!l&&r.a.createElement(v.a,{"aria-label":"Delete the project",onClick:e.onDeleteProject.bind(void 0,e.row.id),className:"deleteIconButton"},r.a.createElement(Te.a,null))):r.a.createElement(lt,{row:e.row,onProjectStateChange:e.onProjectStateChange,currentTime:e.currentTime,isMobile:l,progressCapped:i}))})},mt=a(97),ht=a.n(mt),ft=a(93),gt=a.n(ft),bt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={editing:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t,a,n,o=this,s=this.state.editing&&"planning"===this.props.mode,i=this.props.isDefaultProjects,l={};i||(e=this.props.row.progress?parseInt(this.props.row.progress):0,"workingOnIt"===this.props.row.state&&(e+=I.subtractToMinutes(Object(c.a)({},this.props.currentTime,{s:(new Date).getSeconds()}),this.props.row.startedWorkingOnIt,!0)),(t=e)>this.props.row.estimatedDuration&&(t=this.props.row.estimatedDuration),a="done"===this.props.row.state?100:100*t/this.props.row.estimatedDuration,l={backgroundImage:"linear-gradient(to right, #00c8002e, #00c8002e ".concat(a,"%, transparent ").concat(a,"%, transparent 100%)")});if(s){var u,d=this.props,p=d.row,m=d.settings,h=p.id,f={name:p.name,duration:p.estimatedDuration,color:p.color},g=this.props.onDeleteProject.bind(this,h),b=this.props.onDoneEditing.bind(this,h);i?(u="default",f.days=p.days):f.startTime=p.plannedTime.start,n={settings:m,inputValues:f,delete:g,onDoneEditing:b,type:u,id:h}}else{var E=this.props;n={row:E.row,mode:E.mode,isDefaultProjects:E.isDefaultProjects,settings:E.settings,currentTime:E.currentTime,startEditingMobile:E.startEditingMobile,onDeleteProject:E.onDeleteProject,onProjectStateChange:E.onProjectStateChange}}return r.a.createElement(ht.a,{rootRef:this.props.provided.innerRef},r.a.createElement(_e.a,Object.assign({},this.props.provided.draggableProps,{style:Object(c.a)({},this.props.provided.draggableProps.style,l)}),r.a.createElement(Re.a,null,r.a.createElement(gt.a,Object.assign({className:"dragIcon"},this.props.provided.dragHandleProps),"drag_indicator"),r.a.createElement(R,{value:this.props.row.color,onChange:this.props.onColorChange.bind(this,this.props.row.id)})),s?r.a.createElement(Je,Object.assign({close:function(){return o.setState({editing:!1})}},n)):r.a.createElement(pt,Object.assign({progress:e,progressCapped:t,startEditing:function(){return o.setState({editing:!0})}},n))))}}]),t}(n.Component),Et=(a(956),ve(function(e){return r.a.createElement(_e.a,{id:"addProjectRow"},r.a.createElement(Re.a,null,r.a.createElement(R,{value:e.inputValues.color,onChange:e.onColorChange})),r.a.createElement(Re.a,{className:"setNameCell"},r.a.createElement("div",{id:"addProjectLabelDiv"},r.a.createElement("label",{htmlFor:"addProjectNameInput"},"Add a project:")),r.a.createElement(w.a,{onChange:e.onInputChange.bind(void 0,"name"),value:e.inputValues.name,placeholder:"Name","aria-label":"Name",error:e.showErrors.name||e.showErrorProp,onKeyPress:e.onKeyPress,id:"addProjectNameInput",autoFocus:!0})),r.a.createElement(L.Consumer,null,function(t){var a=t.roundTo;return r.a.createElement(Re.a,{className:"setDurationCell"},r.a.createElement(w.a,{onChange:e.onInputChange.bind(void 0,"duration"),value:e.inputValues.duration,placeholder:"Duration","aria-label":"Duration",error:e.showErrors.duration||e.showErrorProp,onKeyPress:e.onKeyPress,type:"number",inputProps:{step:a}})," minutes")}),"default"!==e.type&&r.a.createElement(He,{onChange:e.onTimeInputChange.bind(void 0,"startTime"),value:e.inputValues.startTime,firstInputId:"setStartTimeInput",hError:e.showErrors.startTimeH||e.showErrorProp,mError:e.showErrors.startTimeM||e.showErrorProp,showErrors:e.showErrors,onEnterPress:e.add}),"default"===e.type&&r.a.createElement(Re.a,null,r.a.createElement(G.a,{onClick:e.openDaysDialog,variant:"outlined"},"Days")),r.a.createElement(Re.a,null,r.a.createElement(v.a,{color:"primary",style:{color:e.showErrorProp?"red":null},"aria-label":"Add the new project",onClick:e.add},r.a.createElement(De.a,null))))})),vt=a(102),yt=a(223),jt=a.n(yt),Tt=(a(958),function(e){var t=r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,null,r.a.createElement(Y.a,{variant:"h6",className:"drawerTitle"},"Repetitive projects:")),r.a.createElement(W.a,null,r.a.createElement("label",{style:{color:e.settings.darkTheme?"white":"black"}},"Use repetitive projects",r.a.createElement(jt.a,{color:"primary",checked:e.useDefaultProjects&&"false"!==e.useDefaultProjects,onChange:e.onUseDefaultProjectsChange,"aria-label":"Use default projects"}))));return r.a.createElement(r.a.Fragment,null,e.mobile?t:r.a.createElement(W.a,{container:!0,justify:"space-between"},t),r.a.createElement(Me.a,{className:"projectsTable"},r.a.createElement(xe.a,null,r.a.createElement(_e.a,null,r.a.createElement(Re.a,null),r.a.createElement(Re.a,null,"Name"),r.a.createElement(Re.a,null,"Duration"),!e.mobile&&r.a.createElement(Re.a,null,"Days"),r.a.createElement(Re.a,null))),r.a.createElement(vt.a,{onDragEnd:e.onDragEnd},r.a.createElement(vt.c,{droppableId:"0"},function(t){return r.a.createElement(ht.a,{rootRef:t.innerRef},r.a.createElement(Be.a,t.droppableProps,!e.projects.length&&r.a.createElement(_e.a,null,r.a.createElement(Re.a,null),r.a.createElement(Re.a,{colSpan:e.mobile?2:3},"You haven't set any repetitive projects yet"),r.a.createElement(Re.a,null)),e.projects.map(function(t,a){return r.a.createElement(vt.b,{key:t.id,draggableId:t.id.toString(),index:a},function(a){return r.a.createElement(bt,{mode:"planning",row:t,currentTime:e.currentTime,provided:a,onColorChange:e.onColorChange,onDoneEditing:e.onDoneEditing,onProjectStateChange:e.onProjectStateChange,onDeleteProject:e.onDeleteProject,isDefaultProjects:!0,startEditingMobile:e.startEditingMobile})})}),t.placeholder,!e.mobile&&r.a.createElement(Et,{settings:e.settings,defaultColorIndex:e.defaultColorIndex,showErrors:{},lastProject:e.projects[e.projects.length-1],onAddProject:e.onAddProject,type:"default"})))}))),!e.mobile&&r.a.createElement(W.a,{container:!0,justify:"center"},r.a.createElement(G.a,{onClick:e.onClose,variant:"contained",color:"primary",style:{margin:".5rem"}},"Save")))}),kt=function(e){var t=e.changeView,a=Object(l.a)(e,["changeView"]);return r.a.createElement(W.a,{className:"DefaultProjectsView container"},r.a.createElement(T,{onClick:t.bind(void 0,"defaultProjects",!1)}),r.a.createElement(Tt,Object.assign({},a,{mobile:!0})),r.a.createElement(Ie,{onClick:t.bind(void 0,"add",!0,{type:"default"})}))};a(993);function wt(e){var t=this,a=[{label:"Plan",val:"planning"},{label:"Work",val:"working"}].map(function(a){return r.a.createElement(W.a,{key:a.val},r.a.createElement(Se.a,{onClick:e.onModeChange.bind(t,a.val),color:a.val===e.mode?"primary":null},a.label))});return r.a.createElement(W.a,{className:"ModeSwitch",container:!0,alignItems:"baseline",justify:"space-between"},a[0],e.children,a[1])}a(995);var Ct=function(e){return r.a.createElement(_.Consumer,null,function(t){return r.a.createElement(Me.a,{id:"ProjectsTable",className:"projectsTable"},r.a.createElement(xe.a,null,r.a.createElement(_e.a,null,r.a.createElement(Re.a,null),r.a.createElement(Re.a,null,"Name"),!t&&r.a.createElement(Re.a,null,"Duration estimate"),r.a.createElement(Re.a,null,t?"Time":"Planned time"),r.a.createElement(Re.a,null))),r.a.createElement(vt.a,{onDragEnd:e.onDragEnd},r.a.createElement(vt.c,{droppableId:"0"},function(a){return r.a.createElement(ht.a,{rootRef:a.innerRef},r.a.createElement(Be.a,a.droppableProps,!e.projects.length&&r.a.createElement(_e.a,null,r.a.createElement(Re.a,null),r.a.createElement(Re.a,{colSpan:t?2:3,style:e.showErrors.noProjects?{color:"red",fontWeight:500}:null},"You haven't set any projects yet"),r.a.createElement(Re.a,null)),e.projects.map(function(t,a){return r.a.createElement(vt.b,{key:t.id,draggableId:t.id.toString(),index:a},function(a){return r.a.createElement(bt,{mode:e.mode,row:t,currentTime:e.currentTime,settings:e.settings,provided:a,onColorChange:e.onColorChange,onDoneEditing:e.onDoneEditing,onProjectStateChange:e.onProjectStateChange,onDeleteProject:e.onDeleteProject,startEditingMobile:e.startEditingMobile})})}),a.placeholder,"planning"===e.mode&&!t&&r.a.createElement(Et,{settings:e.settings,defaultColorIndex:e.defaultColorIndex,showErrors:e.showErrors,lastProject:e.projects[e.projects.length-1],onAddProject:e.onAddProject,currentTime:e.currentTime})))})))})},St=a(132),Ot=a.n(St),Dt=a(226);a(1094);function It(e,t,a){e.datasets[0].backgroundColor.push(t.color),e.datasets[0].data.push(a),e.labels.push(t.name),t.estimatedDuration&&(e.datasets[1].backgroundColor.push(t.color),e.datasets[1].data.push(t.estimatedDuration))}var Pt=function(e){var t,a=e.settings,n=a.timeFormat24H,o=a.roundTo,s=a.bufferTimePercentage,i=I.round(I.add(e.currentTime,e.stats.timeNeeded),o),l=I.isBiggerThan(e.endTime,i,!1,!0);t=l?I.round(I.subtract(e.endTime,i,!0),o):I.round(I.subtract(i,e.endTime,!0),o);var u,d=0,p=0,m=0,h={datasets:[{label:"Actual",backgroundColor:[],data:[]},{label:"Planned",backgroundColor:[],data:[]}],labels:[]};if(e.projects.forEach(function(t){var a=parseInt(t.estimatedDuration);if("done"===t.state)d+=a,It(h,t,a);else{var n=0;t.progress&&(n+=parseInt(t.progress)),"workingOnIt"===t.state&&t.startedWorkingOnIt&&(n+=I.subtractToMinutes(Object(c.a)({},e.currentTime,{s:(new Date).getSeconds()}),t.startedWorkingOnIt,!0)),n>a&&(n=a),d+=n,p+=a-n,It(h,t,n)}m+=Math.round(a*s)}),e.breaks.forEach(function(t){var a=I.subtractToMinutes(t.endTime,t.startTime,!0);h.labels.push(t.name),h.datasets[1].backgroundColor.push("#bbb"),h.datasets[1].data.push(a);var n=0;I.isBiggerThan(e.currentTime,t.startTime,!1,!0)&&(n=I.isBiggerThan(e.currentTime,t.endTime,!0,!0)?a:I.subtractToMinutes(e.currentTime,t.startTime,!0)),h.datasets[0].backgroundColor.push("#bbb"),h.datasets[0].data.push(n)}),e.realEndTime){var f=new Date(e.realEndTime),g=f.getHours(),b=f.getMinutes();f.getSeconds()>=30&&b++;var E=!1;g>12&&(g-=12,E=!0),u={h:g,m:b,pm:E}}var v=I.subtractToMinutes(u||e.currentTime,e.startTime,!0),y=I.subtractToMinutes(i,e.currentTime,!0),j=Math.round(100*d/v),T=Math.round(100*(d+p)/(v+y)),k=v-d;k=Math.round(k/o)*o,It(h,{name:"Unproductive time",color:"#aaa"},k);var w=!0,C=!1,S=void 0;try{for(var O,D=e.breaks[Symbol.iterator]();!(w=(O=D.next()).done);w=!0){var P=O.value;m+=I.subtractToMinutes(P.endTime,P.startTime,!0)}}catch(N){C=!0,S=N}finally{try{w||null==D.return||D.return()}finally{if(C)throw S}}m=Math.round(m/o)*o,h.datasets[1].backgroundColor.push("#aaa"),h.datasets[1].data.push(m);var M=e.settings.darkTheme?"white":"black";return r.a.createElement("div",{className:"TimeStatsModal",style:{color:M}},r.a.createElement(Y.a,{variant:"h6"},"You need ",I.makeFullLengthDurationString(e.stats.timeNeeded)),r.a.createElement("b",null,I.makeString(e.stats.totalProjectTime,!1,!1,n))," for projects",r.a.createElement("br",null),I.makeString(e.stats.totalBufferTime,!1,!1,n)," for buffers",r.a.createElement("br",null),I.makeString(e.stats.totalBreakTime,!1,!1,n)," for breaks",r.a.createElement("div",{className:"section"},"At the current pace, you'll be done at ",r.a.createElement("b",null,I.makeString(i,!0,!1,n)),r.a.createElement("br",null),"That's",r.a.createElement("b",null,r.a.createElement("span",null," "),I.makeFullLengthDurationString(t),r.a.createElement("span",null," "),l?"earlier":"later"),r.a.createElement("span",null," "),"than what you planned"),!isNaN(j)&&j>=0&&j<=100&&r.a.createElement("div",{className:"section"},"You've been productive ",r.a.createElement("b",null,j,"%")," of the time so far",r.a.createElement("br",null),"Assuming you're done at ",I.makeString(i,!0,!1,n),",",r.a.createElement("br",null),"your productivity percentage will be",r.a.createElement("span",null," "),T<j?r.a.createElement(ut.a,{disableFocusListener:!0,disableTouchListener:!0,title:"Your predicted productivity percentage is lower then your current one because of buffer times.\n                You can learn more about buffer times in the about section."},r.a.createElement("b",null,T,"%")):r.a.createElement("b",null,T,"%")),r.a.createElement("div",{className:"section"},r.a.createElement(Y.a,{variant:"h6"},"Your day so far:",r.a.createElement(ut.a,{disableFocusListener:!0,disableTouchListener:!0,title:"The inner circle represents your day as you planned it,\n              the outer one represents your day so far\n              (starting at ".concat(I.makeString(e.startTime,!0,!1,n),")")},r.a.createElement(Ot.a,{className:"helperIcon"}))),r.a.createElement("div",null,r.a.createElement(Dt.a,{data:h,width:250,height:200+4*h.datasets[0].data.length,options:{maintainAspectRatio:!1,legend:{position:"bottom",labels:{fontColor:M}}}}))))},Mt=(a(1096),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).updateCurrentTime=function(){var e=new Date,t=e.getMinutes();if(a.state.currentTimeAvailable||a.setState({currentTimeAvailable:!0}),t!==a.props.currentTime.m||0===a.props.currentTime.h){var n=e.getHours(),r=n>=12;n=0===(n%=12)?12:n,a.props.onCurrentTimeChange({h:n,m:t,pm:r})}},a.openModal=function(){a.setState({modalOpen:!0})},a.state={currentTimeAvailable:!1,modalOpen:!1},a.currentTimeUpdateInterval=setInterval(a.updateCurrentTime,1e3),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.updateCurrentTime()}},{key:"componentWillUnmount",value:function(){clearInterval(this.currentTimeUpdateInterval)}},{key:"render",value:function(){var e,t,a,n,o,s,i,l,u=this;if(this.state.currentTimeAvailable&&this.props.settings.bufferTimePercentage){e=t=0,this.props.projects.forEach(function(a,n){if("done"!==a.state){var r=parseInt(a.estimatedDuration),o=parseInt(a.progress);"workingOnIt"===a.state&&a.startedWorkingOnIt&&(o+=I.subtractToMinutes(Object(c.a)({},u.props.currentTime,{s:(new Date).getSeconds()}),a.startedWorkingOnIt,!0)),o&&(o>r?r=0:r-=o),e+=r,n!==u.props.projects.length-1&&(t+=Math.round(r*u.props.settings.bufferTimePercentage))}}),e=Math.round(e/this.props.settings.roundTo)*this.props.settings.roundTo,t=Math.round(t/this.props.settings.roundTo)*this.props.settings.roundTo,a=0;var d=!0,p=!1,m=void 0;try{for(var h,f=this.props.breaks[Symbol.iterator]();!(d=(h=f.next()).done);d=!0){var g=h.value,b=I.toMinutesSinceMidnight(g.endTime,!0),E=I.toMinutesSinceMidnight(this.props.currentTime,!0);if(!I.isBiggerThan(E,b,!1)){var v=I.toMinutesSinceMidnight(g.startTime,!0);I.isBiggerThan(v,E,!0)?a+=I.subtractToMinutes(b,v,!0):a+=I.subtractToMinutes(b,E,!0)}}}catch(y){p=!0,m=y}finally{try{d||null==f.return||f.return()}finally{if(p)throw m}}a=Math.round(a/this.props.settings.roundTo)*this.props.settings.roundTo,n=I.toTimeObject(I.addToMinutes(e,t,a),!1),o=I.subtract(this.props.endTime,this.props.currentTime,!0),s=I.isBiggerThan(n,o,!1,!1),l=(i=!I.isBiggerThan(o,0))&&""!==this.props.endTime.h&&""!==this.props.endTime.m}else e=t=a=0,n=o={h:0,m:0,pm:!1},s=i=l=!1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{item:!0,className:"timeStatsSideGridItem"+(s?" timeStatsWarning":"")},r.a.createElement(ut.a,{title:"Projects: "+I.makeString(e,!1)+",\nBuffers: "+I.makeString(t,!1)+",\nBreaks: "+I.makeString(a,!1)+" (click for more)"},r.a.createElement("div",{onClick:this.openModal},r.a.createElement("div",{className:"timeStatsLabelDiv"},r.a.createElement("label",null,this.props.shortLabels?"N":"Time n","eeded:")),I.makeString(n,!1)))),r.a.createElement(W.a,{item:!0},r.a.createElement("h4",null,I.makeString(this.props.currentTime,!0,!1,this.props.settings.timeFormat24H))),r.a.createElement(W.a,{item:!0,className:"timeStatsSideGridItem"+(l?" timeStatsWarning":"")},r.a.createElement("div",{onClick:this.openModal},r.a.createElement("div",{className:"timeStatsLabelDiv"},r.a.createElement("label",null,this.props.shortLabels?"R":"Time r","emaining:")),i?"0:00":I.makeString(o,!1))),r.a.createElement(be.a,{open:this.state.modalOpen,onClose:function(){u.setState({modalOpen:!1})},"aria-label":"Time Stats Modal"},r.a.createElement(Pt,Object.assign({stats:{timeNeeded:n,totalProjectTime:e,totalBufferTime:t,totalBreakTime:a}},this.props))))}}]),t}(n.Component));function Nt(e,t){for(var a,n=!1;!n;){a=Math.floor(Math.random()*Math.pow(10,8)),n=!0;for(var r=0;r<e.length;r++)if(e[r].id===a){n=!1;break}if(n){var o=["lastModified",t,a,"id"].join("_");isNaN(localStorage[o])||(n=!1)}}return a}a(1098);var Bt=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).validateEndTime=function(e,t,n){var r,o=a.state.temp,s=a.state.showEndTimeErrors;return I.isBiggerThan(n,t,!1,!0)?(r=!0,s[e]=!1,clearTimeout(o.showEndTimeErrors[e])):(r=!1,o.showEndTimeErrors[e]=setTimeout(function(){a.setState({showEndTimeErrors:Object(c.a)({},a.state.showEndTimeErrors,Object(f.a)({},e,!0))})},500)),a.setState({temp:o,showEndTimeErrors:s}),r},a.addBreak=function(){if(!a.state.showEndTimeErrors.new){var e=a.state.breaks,t=a.state.newBreak,n=Nt(e,"breaks");t.id=n,e.push(t),a.setState({breaks:e}),a.props.onSave(e,{breaks:n});var r=a.state.breakDurations;r.new=30,r[n]=I.subtractToMinutes(t.endTime,t.startTime,!0),a.setState({newBreak:{startTime:I.add(t.endTime,90),endTime:I.add(t.endTime,120),name:""},breakDurations:r})}},a.handleSave=function(){a.props.onClose()},a.handleEnterPress=function(e){"Enter"===e.key&&a.addBreak()},a.handleEnterPressNew=function(e){"Enter"===e.key&&a.addBreak()},a.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{variant:"h6",className:"drawerTitle"},"Breaks:"),r.a.createElement(Me.a,{className:"BreaksDrawer"},r.a.createElement(xe.a,null,r.a.createElement(_e.a,null,r.a.createElement(Re.a,null,"Name (optional)"),r.a.createElement(Re.a,null,"Start"),r.a.createElement(Re.a,null,"End"),r.a.createElement(Re.a,null))),r.a.createElement(Be.a,null,a.state.breaks.length?a.state.breaks.map(function(e,t){return r.a.createElement(_e.a,{key:e.id},r.a.createElement(Re.a,null,r.a.createElement(w.a,{value:e.name,onChange:a.handleInputChange.bind(Object(ae.a)(Object(ae.a)(a)),e.id,"name"),onKeyPress:a.handleEnterPress})),r.a.createElement(Re.a,null,r.a.createElement(F,{value:e.startTime,onChange:a.handleTimeInputChange.bind(Object(ae.a)(Object(ae.a)(a)),e.id,"startTime"),onEnterPress:a.handleSave})),r.a.createElement(Re.a,null,r.a.createElement(F,{value:e.endTime,onChange:a.handleTimeInputChange.bind(Object(ae.a)(Object(ae.a)(a)),e.id,"endTime"),onEnterPress:a.handleSave,showError:a.state.showEndTimeErrors[e.id]})),r.a.createElement(Re.a,null,r.a.createElement(v.a,{onClick:a.deleteBreak.bind(Object(ae.a)(Object(ae.a)(a)),e.id)},r.a.createElement(Te.a,null))))}):r.a.createElement(_e.a,null,r.a.createElement(Re.a,{colSpan:4},"You haven't set any breaks")),r.a.createElement(_e.a,null,r.a.createElement(Re.a,null,r.a.createElement(w.a,{value:a.state.newBreak.name,onChange:a.handleInputChange.bind(Object(ae.a)(Object(ae.a)(a)),"new","name"),onKeyPress:a.handleEnterPressNew})),r.a.createElement(Re.a,null,r.a.createElement(F,{value:a.state.newBreak.startTime,onChange:a.handleTimeInputChange.bind(Object(ae.a)(Object(ae.a)(a)),"new","startTime"),onEnterPress:a.addBreak})),r.a.createElement(Re.a,null,r.a.createElement(F,{value:a.state.newBreak.endTime,onChange:a.handleTimeInputChange.bind(Object(ae.a)(Object(ae.a)(a)),"new","endTime"),onEnterPress:a.addBreak,showError:a.state.showEndTimeErrors.new})),r.a.createElement(Re.a,null,r.a.createElement(v.a,{color:"primary",onClick:a.addBreak},r.a.createElement(De.a,null)))))),r.a.createElement(W.a,{container:!0,justify:"center"},r.a.createElement(G.a,{onClick:a.handleSave.bind(Object(ae.a)(Object(ae.a)(a))),variant:"contained",color:"primary",style:{margin:".5rem"}},"Save")))};var n=JSON.parse(JSON.stringify(e.breaks)),o={};n.length?(o.startTime=I.add(n[n.length-1].endTime,90),o.endTime=I.add(o.startTime,60)):(o.startTime=I.round(I.add(e.currentTime,90),15),o.endTime=I.add(o.startTime,60)),o.name="";for(var s={new:30},i=0;i<n.length;i++){s[n[i].id]=I.subtractToMinutes(n[i].endTime,n[i].startTime,!0)}return a.state={breaks:n,newBreak:o,breakDurations:s,errors:{},showEndTimeErrors:{},temp:{showEndTimeErrors:{}}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"handleInputChange",value:function(e,t,a){var n=a.target.value;if(!X.test(n))if("new"===e){var r=this.state.newBreak;r[t]=n,this.setState({newBreak:r})}else{var o=this.state.breaks,s=o.findIndex(function(t){return t.id===e});o[s][t]=n,this.setState({breaks:o}),this.props.onSave(o,{breaks:e})}}},{key:"handleTimeInputChange",value:function(e,t,a,n){if(!X.test(n))if("new"===e){var r=this.state.newBreak,o=this.state.breakDurations;"object"===a?r[t]=n:r[t][a]=n,""!==n&&("startTime"===t&&(r.endTime=I.add(r.startTime,o.new)),"endTime"===t&&(this.validateEndTime(e,r.startTime,r.endTime),o.new=I.subtractToMinutes(r.endTime,r.startTime,!0))),this.setState({newBreak:r,breakDurations:o})}else{var s=this.state.breaks,i=this.state.breakDurations,l=s.findIndex(function(t){return t.id===e});"object"===a?s[l][t]=n:s[l][t][a]=n;var c=!0;""===n?c=!1:("startTime"===t&&(s[l].endTime=I.add(s[l].startTime,i[e])),"endTime"===t&&(c=this.validateEndTime(e,s[l].startTime,s[l].endTime),i[l]=I.subtractToMinutes(s[l].endTime,s[l].startTime,!0),this.setState({breakDurations:i})));var u=this.state.errors;u[e]=!c;var d=Object.values(u).every(function(e){return!e});this.setState({breaks:s,errors:u}),this.props.onSave(s,d,{breaks:e})}}},{key:"deleteBreak",value:function(e){var t=this.state.breaks,a=t.findIndex(function(t){return t.id===e});t.splice(a,1);var n=this.state.errors;delete n[e];var r=Object.values(n).every(function(e){return!e});this.setState({breaks:t,errors:n}),this.props.onSave(t,r,{breaks:e})}}]),t}(n.Component),At=a(427),xt=a.n(At),Lt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).responseGoogle=function(e){e.error?console.log(e):setTimeout(function(){window.confirm("Data syncing is still under beta testing. If you encouter any problems, please send us a bug report. It will only take a minute or two and it helps us a lot with improving the app.")&&a.props.connect(e.tokenId)},50)},a.render=function(){return r.a.createElement(xt.a,{clientId:"1070394852834-4nunul2jqv2pqn9du9ralgd61220d3c1.apps.googleusercontent.com",buttonText:"Sign In",onSuccess:a.responseGoogle,onFailure:a.responseGoogle,render:a.props.render})},a}return Object(h.a)(t,e),t}(n.Component),_t=a(133),Ft=a.n(_t),Rt=a(80),Vt=a.n(Rt),Wt=(a(1100),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleDismiss=function(e){a.props.showDontRemindMeAgain?a.setState({anchorEl:e.currentTarget}):a.props.dismiss()},a.closeDismissMenu=function(){a.setState({anchorEl:null})},a.state={anchorEl:null},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl;return r.a.createElement("div",{className:"signInPanel"},r.a.createElement(W.a,{className:"signInPanelContainer",container:!0,alignItems:"center",justify:"space-evenly"},r.a.createElement(W.a,null,"Sign in to sync your data between all your devices:"),r.a.createElement(W.a,null,r.a.createElement(Lt,{connect:this.props.connect}))),r.a.createElement(v.a,{className:"dismissButton",onClick:this.handleDismiss,"aria-owns":t?"signInPanelDismissMenu":void 0},r.a.createElement(Vt.a,null)),this.props.showDontRemindMeAgain&&r.a.createElement(Ft.a,{id:"signInPanelDismissMenu",anchorEl:t,open:Boolean(t),onClose:this.closeDismissMenu},r.a.createElement(D.a,{onClick:function(){e.closeDismissMenu(),e.props.dismiss()}},"Remind me later"),r.a.createElement(D.a,{onClick:function(){e.closeDismissMenu(),e.props.dontRemindMeAgain()}},"Don't remind me again")))}}]),t}(n.Component)),Ut={timeFormat24H:!1,bufferTimePercentage:.2,showResetButtonAfter:16,defaultColors:["#4BFFD1","#39FF00","#E8A60C","#FF4848","#290CE8"],updateTimesAfterDrag:!0,updateTimesAfterEdit:!0,updateTimesAfterDelete:!0,roundTo:5,changeModeOnTab:!1,detectBreaksAutomatically:!0,adjustDurationOnPause:!0,offerToAdjustDurationOnDone:!0,darkTheme:!1},Ht={projects:[],breaks:[],defaultProjects:[],settings:Ut,startTime:{h:2,m:"00",pm:!0},endTime:{h:9,m:"00",pm:!0},mode:"planning",defaultColorIndex:0,defaultColorIndexDefaultProjects:0,productivityPercentages:{},useDefaultProjects:!0,lastReset:void 0,lastModified:{},realEndTime:void 0},Kt=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){return function(t){return a.setState(Object(f.a)({},e,t.target.checked))}},a.reset=function(){for(var e={},t=Object.keys(a.state),n=0;n<t.length;n++){var r=t[n];a.state[r]&&(e[r]=Ht[r])}a.props.update(e),window.location.reload()},a.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{children:"Reset local data"}),r.a.createElement(se.a,null,r.a.createElement(ue.a,null,a.props.dataItems.map(function(e){return r.a.createElement(pe.a,{key:e,control:r.a.createElement(he.a,{checked:a.state[e],onChange:a.handleChange(e)}),label:e})}))),r.a.createElement(le.a,null,r.a.createElement(G.a,{onClick:a.reset,children:"Reset",color:"primary"})))};var n={},o=!0,s=!1,i=void 0;try{for(var l,c=a.props.dataItems[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){n[l.value]=!0}}catch(d){s=!0,i=d}finally{try{o||null==c.return||c.return()}finally{if(s)throw i}}return a.state=n,a}return Object(h.a)(t,e),t}(n.Component),Yt=a(100),Jt=a.n(Yt),Gt=a(101),qt=a.n(Gt),zt=a(287),Zt=a.n(zt),$t=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).open=function(e){return a.setState({anchorEl:e.currentTarget})},a.close=function(){a.setState({anchorEl:null}),a.props.close&&a.props.close()},a.export=function(){var e=new Date,t=new Blob([JSON.stringify({data:a.props.data,date:e.toLocaleString()})],{type:"application/json"}),n="Mind-Your-Time-data-"+e.toISOString();if(n=n.replace(".","-"),window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(t,n);else{var r=document.createElement("a"),o=URL.createObjectURL(t);r.href=o,r.download=n,document.body.appendChild(r),r.click(),setTimeout(function(){document.body.removeChild(r),window.URL.revokeObjectURL(o)})}},a.import=function(){var e=document.createElement("input");e.type="file",e.style="display: none;",e.accept=".json",e.addEventListener("change",function(e){var t=e.path[0].files[0],n=new FileReader;n.onloadend=function(){var e=JSON.parse(n.result),t=e.data,r=e.date;window.confirm("Are you sure you want to load data from "+r+"? This will permanently delete all your current local data.")&&a.props.update(t)},n.readAsText(t)}),document.body.appendChild(e),e.click(),setTimeout(function(){document.body.removeChild(e)})},a.render=function(){return r.a.createElement(r.a.Fragment,null,a.props.showAsListItem?r.a.createElement(at.a,{button:!0,onClick:a.open},r.a.createElement(Jt.a,{children:r.a.createElement(Zt.a,null)}),r.a.createElement(qt.a,{children:"Stuff for nerds"})):r.a.createElement(D.a,{onClick:a.open},r.a.createElement(Zt.a,null),"Stuff for nerds"),r.a.createElement(Ft.a,{anchorEl:a.state.anchorEl,open:Boolean(a.state.anchorEl),onClose:a.close},r.a.createElement(D.a,{onClick:a.export},"Export"),r.a.createElement(D.a,{onClick:a.import},"Import"),r.a.createElement(D.a,{onClick:function(){return a.setState({resetDialogOpen:!0})}},"Reset"),r.a.createElement(be.a,{open:a.state.resetDialogOpen,onClose:function(){return a.setState({resetDialogOpen:!1})}},r.a.createElement(Kt,{dataItems:Object.keys(a.props.data).sort(),update:a.props.update}))))},a.state={anchorEl:null,resetDialogOpen:!1},a}return Object(h.a)(t,e),t}(n.Component),Qt=a(227),Xt=a.n(Qt),ea=function(e){return r.a.createElement("svg",{width:"23px",height:"23px",viewBox:"11.5 11.5 23 23",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"btn_google_light_normal_ios"),r.a.createElement("desc",null,"Created with Sketch."),r.a.createElement("defs",null,r.a.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"filter-1"},r.a.createElement("feOffset",{dx:"0",dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),r.a.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),r.a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0",in:"shadowBlurOuter1",type:"matrix",result:"shadowMatrixOuter1"}),r.a.createElement("feOffset",{dx:"0",dy:"0",in:"SourceAlpha",result:"shadowOffsetOuter2"}),r.a.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter2",result:"shadowBlurOuter2"}),r.a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0",in:"shadowBlurOuter2",type:"matrix",result:"shadowMatrixOuter2"}),r.a.createElement("feMerge",null,r.a.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),r.a.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),r.a.createElement("feMergeNode",{in:"SourceGraphic"}))),r.a.createElement("rect",{id:"path-2",x:"0",y:"0",width:"40",height:"40",rx:"2"})),r.a.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -160.000000)"}),r.a.createElement("g",{id:"btn_google_light_normal",transform:"translate(-1.000000, -1.000000)"},r.a.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)",filter:"url(#filter-1)"},r.a.createElement("g",{id:"button-bg"},r.a.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd"}),r.a.createElement("use",{fill:"none"}),r.a.createElement("use",{fill:"none"}),r.a.createElement("use",{fill:"none"}))),r.a.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},r.a.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),r.a.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),r.a.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),r.a.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),r.a.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),r.a.createElement("g",{id:"handles_square"}))))},ta=(a(1104),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).close=function(){a.setState({anchorEl:null})},a.about=function(){a.close(),a.props.history.push("/about")},a.signIn=function(e){a.close(),a.props.connect(e)},a.signOut=function(){a.close(),a.props.disconnect()},a.state={anchorEl:null},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{id:"dropdownMenuButton","aria-owns":t?"dropdownMenu":void 0,"aria-haspopup":"true",onClick:function(t){e.setState({anchorEl:t.currentTarget})}},r.a.createElement(Xt.a,null)),r.a.createElement(Ft.a,{id:"dropdownMenu",anchorEl:t,open:Boolean(t),onClose:this.close},r.a.createElement(D.a,{onClick:this.about},r.a.createElement(Ot.a,null),"About"),this.props.loggedIn?r.a.createElement(D.a,{onClick:this.signOut},r.a.createElement(Vt.a,null),"Sign Out"):r.a.createElement(Lt,{connect:this.signIn,render:function(e){return r.a.createElement(D.a,{onClick:e.onClick},r.a.createElement(ea,null),"Sign In")}}),localStorage.devUnlocked&&r.a.createElement($t,{data:this.props.data,update:this.props.update,close:this.close})))}}]),t}(n.Component)),aa=a(428),na=a.n(aa),ra=(a(1107),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).render=function(){return r.a.createElement("div",{className:"ConfettiWrapper"},r.a.createElement("div",null,r.a.createElement(na.a,{active:a.state.fireConfetti,config:{spread:80,startVelocity:90,elementCount:185,dragFriction:.07,duration:1e4}})))},a.state={},setTimeout(function(){return a.setState({fireConfetti:!0})}),a}return Object(h.a)(t,e),t}(n.Component)),oa=a(283),sa=a.n(oa),ia=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={scale:"1w"},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t=this,a={datasets:[{data:[],borderColor:"rgba(00, 208, 83, .5)",label:"Productivity percentage",fill:!1,pointBackgroundColor:"rgba(00, 208, 83, .5)"}],labels:[]},n=0;switch(this.state.scale){case"1w":e=6048e5;break;case"1m":e=2592e6;break;case"3m":e=7776e6;break;case"6m":e=15552e6;break;case"1y":e=31536e6}e&&(n=new Date((new Date).getTime()-e));var o=[],s=!0,i=!1,l=void 0;try{for(var c,u=this.props.prodPercArr[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value,p=d.date,m=d.perc;(p=new Date(p))>=n&&o.push({date:p,perc:m})}}catch(w){i=!0,l=w}finally{try{s||null==u.return||u.return()}finally{if(i)throw l}}var h;o.forEach(function(e,t){var a=e.date;e.perc;if(a=new Date(a),h&&a.getTime()>h.getTime()+864e5)for(var n=h;a.getTime()>n.getTime()+864e5;){var r=new Date(n.getTime()+864e5);o.splice(t,0,{date:r.toLocaleDateString(),perc:null}),n=r}h=a});var f=Math.round(window.innerWidth/50),g=Math.round(o.length/f);g||(g=1);for(var b=0,E=0,v=0;v<o.length;v++){var y=o[v],j=y.date;if(E+=y.perc,!(++b<g)){var T=E/g;b=E=0;var k=1===g?new Date(j):new Date(j.getTime()-864e5*g/2);a.datasets[0].data.push(T),a.labels.push(k.toLocaleDateString())}}return r.a.createElement("div",null,r.a.createElement(sa.a,{htmlFor:"lineChartScaleSelect",children:"Scale: "}),r.a.createElement(S.a,{value:this.state.scale,onChange:function(e){return t.setState({scale:e.target.value})},inputProps:{id:"lineChartScaleSelect"}},r.a.createElement(D.a,{value:"1w"},"Last Week"),r.a.createElement(D.a,{value:"1m"},"Last Month"),r.a.createElement(D.a,{value:"3m"},"Last 3 Months"),r.a.createElement(D.a,{value:"6m"},"Last 6 Months"),r.a.createElement(D.a,{value:"1y"},"Last Year"),r.a.createElement(D.a,{value:"a"},"All")),r.a.createElement(Dt.b,{data:a,height:100,width:300,options:{maintainAspectRatio:!1,legend:{position:"bottom"},spanGaps:!0,animation:!1}}))}}]),t}(n.Component),la=(a(1109),function(e){var t=[];Object.entries(e.productivityPercentages).forEach(function(e){return t.push({date:e[0],perc:e[1]})}),t.sort(function(e,t){return e.date>t.date?1:-1});var a=t[t.length-1].perc,n=t.length>3&&a>=0&&a<=100,o=e.dateString===t[t.length-1].date;return r.a.createElement("div",{className:"Congrats"},r.a.createElement("span",{className:"congratsSpan"},"CONGRATULATIONS!"),r.a.createElement("br",null),"You got ",e.totalTimeWorkedString," worth of work done",r.a.createElement("br",null),a>=0&&a<=100&&r.a.createElement("span",null,"You were productive ",a,"% of the time"),n&&r.a.createElement(ia,{prodPercArr:t}),o&&r.a.createElement(ra,null))}),ca=a(288),ua=a.n(ca),da=a(213),pa=a.n(da),ma=a(230),ha=a.n(ma),fa=a(229),ga=a.n(fa),ba=a(228),Ea=a.n(ba);function va(e){var t=e.substr(1).split("&"),a={},n=!0,r=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var l=s.value.split("=");a[l[0]]=l[1]}}catch(c){r=!0,o=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}a(1111);var ya=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).setShowResetButton=function(){var e,t,n=new Date(localStorage.lastReset).getTime(),r=(n%=864e5)/1e3/60;if(!(e=I.isBiggerThan(r,a.props.currentTime,!1,!0))){var o=new Date(localStorage.lastReset),s=(a.props.data.settings.showResetButtonAfter,a.props.data.settings).showResetButtonAfter;o.setTime(o.getTime()+60*s*60*1e3),t=o<new Date}var i=(e||t)&&a.props.data.projects.length;a.setState({showResetButton:i})},a.addBreak=function(e,t){for(var n=a.props.data.breaks.slice(),r=0;r<n.length;r++)(I.isBiggerThan(t,n[r].startTime,!1,!0)&&I.isBiggerThan(n[r].startTime,e,!0,!0)||I.isBiggerThan(t,n[r].endTime,!1,!0)&&I.isBiggerThan(n[r].endTime,e,!0,!0))&&(n[r].autodetected?(I.isBiggerThan(e,n[r].startTime,!1,!0)&&(e=n[r].startTime),I.isBiggerThan(n[r].endTime,t,!0,!0)&&(t=n[r].endTime),n.splice(r,1)):e=n[r].endTime);var o=Nt(n,"breaks");return n.push({id:o,name:"Auto "+(n.length+1),autodetected:!0,startTime:e,endTime:t}),a.props.update({breaks:n},{breaks:o}),n},a.handleEndTimeChange=function(e,t){var n=Object.assign({},a.props.data.endTime),r={showErrors:a.state.showErrors,temp:a.state.temp};"object"===e?n=t:n[e]=t,""===n.h||""===n.m||I.isBiggerThan(a.props.currentTime,n,!0,!0)?r.temp.endTimeErrorTimeout=setTimeout(function(){a.props.changeRouterShowErrors("endTime",!0)},250):(clearTimeout(r.temp.endTimeErrorTimeout),a.props.changeRouterShowErrors("endTime",!1)),r.endTime=n,a.setState(r),a.props.update({endTime:n})},a.handleRootKeyDown=function(e){a.props.data.settings.changeModeOnTab&&"Tab"===e.key&&!a.state.temp.openBreaksDrawer&&(e.preventDefault(),a.props.changeMode("planning"===a.props.data.mode?"working":"planning"))},a.handleCurrentTimeChange=function(e){a.props.onCurrentTimeChange(e),setTimeout(a.setShowResetButton)},a.resetState=function(){window.confirm("Are you sure you want to delete all your projects?")&&(a.props.update({projects:[],breaks:[],mode:"planning"}),a.setState({showResetButton:!1}))},a.closeDrawer=function(e,t){if("undefined"===typeof a.state.temp["canClose"+e]||a.state.temp["canClose"+e]||window.confirm("Some of the ".concat(t," weren't editted properly. If you close this now, those changes will be lost"))){var n=a.state.temp;n["open"+e]=!1,n["canClose"+e]=void 0,"DefaultProjectsDrawer"===e&&(n.defaultProjectsDrawerRemoveTransform=!1),a.setState(n)}},a.saveBreaks=function(e,t,n){if("undefined"===typeof t||t){var r=a.props.data.projects.slice();a.props.data.projects.length&&(r=P(r,a.props.data.settings,e,a.props.data.startTime));var o=a.state.temp;"undefined"!==typeof t&&(o.canCloseBreaksDrawer=t),a.setState({temp:o}),a.props.update({projects:r,breaks:JSON.parse(JSON.stringify(e))},n)}else a.setState({temp:Object(c.a)({},a.state.temp,{canCloseBreaksDrawer:!1})})},a.handleSignInDismiss=function(){a.setState({temp:Object(c.a)({},a.state.temp,{signInDissmissed:!0})}),localStorage.userHasDismissedSignInBefore||(localStorage.userHasDismissedSignInBefore=!0),a.showSignInAgainTimeout=setTimeout(function(){a.setState({temp:Object(c.a)({},a.state.temp,{signInDissmissed:null})})},36e5)},a.handleSignInDontRemindMeAgain=function(){a.setState({temp:Object(c.a)({},a.state.temp,{signInDissmissed:null})}),localStorage.removeItem("userHasDismissedSignInBefore"),localStorage.dontShowSignInPanelAgain=!0},a.openDefaultProjectsDrawer=function(){a.setState({temp:Object(c.a)({},a.state.temp,{openDefaultProjectsDrawer:!0})}),setTimeout(function(){a.setState({temp:Object(c.a)({},a.state.temp,{defaultProjectsDrawerRemoveTransform:!0})})},400)},a.addBreak=function(e){var t=a.props.data.breaks,n=Nt(t,"breaks");t.push(Object(c.a)({id:n},e)),a.props.update({breaks:t},{breaks:n})},a.getDateString=function(){return(I.isBiggerThan(300,a.props.currentTime,!0)?new Date(Date.now()-864e5):new Date).toISOString().split("T")[0]},a.closeSnackbar=function(){return a.setState({temp:Object(c.a)({},a.state.temp,{snackbar:{open:!1}})})},a.handleProjectPause=function(e,t){e.progress=t;var n=parseInt(e.estimatedDuration);if(t>1.1*n){var r=a.props.data.settings.roundTo,o=Math.round(t/r)*r;o!==n&&(e.estimatedDuration=o,a.setState({temp:Object(c.a)({},a.state.temp,{snackbar:{open:!0,message:"".concat(e.name,"'s duration was changed from ").concat(n," to ").concat(e.estimatedDuration),action:function(){a.handleDoneEditingProject("projects",e.id,{name:e.name,duration:n,startTime:e.plannedTime.start})},buttonLabel:"Undo"}})}))}return e},a.state={showErrors:{},showResetButton:!1,temp:{dontShowSignInYet:!0,snackbar:{open:!1,message:"",action:function(){},buttonLabel:""}}},a.showSignInPanelAfterLoadTimeout=setTimeout(function(){a.setState({temp:Object(c.a)({},a.state.temp,{dontShowSignInYet:!1})})},5e3),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){if(!Object.keys(e.data.settings).length&&Object.keys(this.props.data.settings).length&&this.setShowResetButton(),e.data.projects!==this.props.data.projects){var t,a,n=!1,r=this.getDateString(),o=this.props.data.productivityPercentages[r];if(this.props.data.projects.length){n=!0;for(var s=0;s<this.props.data.projects.length;s++)if("done"!==this.props.data.projects[s].state){n=!1;break}if(n){for(var i=0,l=0;l<this.props.data.projects.length;l++)i+=parseInt(this.props.data.projects[l].estimatedDuration);if(a=i>=60?I.makeString(I.toTimeObject(i,!1),!1):i+" minutes",o)t=o;else{var c=I.subtractToMinutes(this.props.currentTime,this.props.data.startTime,!0);t=Math.round(100*i/c)}}}else n=!1;if((!this.props.data.realEndTime||r===this.props.data.realEndTime.split("T")[0])&&(n!==this.state.allProjectsDone&&(this.setState({allProjectsDone:n}),"undefined"!==typeof this.state.allProjectsDone&&this.props.update({realEndTime:n?new Date:void 0})),a!==this.state.totalTimeWorkedString&&this.setState({totalTimeWorkedString:a}),t!==o&&(!isNaN(t)||"number"!==typeof t))){var u=Object.assign({},this.props.data.productivityPercentages);u[r]=t,this.props.update({productivityPercentages:u})}}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.showSignInAgainTimeout),clearTimeout(this.showSignInPanelAfterLoadTimeout)}},{key:"addProject",value:function(e,t,a){this.props.changeRouterShowErrors("noProjects",!1);var n=this.props.data[e].slice(),r=this.props.data.settings,o=Nt(n,"projects"),s={id:o,name:t.name,color:t.color,estimatedDuration:t.duration,state:"notStarted"};if("defaultProjects"===e?s.days=t.days:s.plannedTime={start:t.startTime,end:I.add(t.startTime,t.duration)},n.length&&"defaultProjects"!==e){var i=n[n.length-1];r.detectBreaksAutomatically&&I.isBiggerThan(t.startTime,I.suggestStartTime(i.plannedTime.end,i.estimatedDuration,r),!1,!0)&&this.addBreak(i.plannedTime.end,t.startTime)}n.push(s);var l=Object(f.a)({},e,n);"undefined"!==typeof a&&(l["projects"===e?"defaultColorIndex":"defaultColorIndexDefaultProjects"]=a);1===n.length&&"defaultProjects"!==e&&(l.startTime=n[0].plannedTime.start),this.props.update(l,Object(f.a)({},e,o))}},{key:"deleteProject",value:function(e,t){var a=this.props.data[e].slice(),n=this.props.data.settings,r=a.findIndex(function(e){return e.id===parseInt(t)});n.updateTimesAfterDelete&&0===r&&a[1]&&"defaultProjects"!==e&&(a[1].plannedTime.start=a[0].plannedTime.start),a.splice(r,1),n.updateTimesAfterDelete&&"defaultProjects"!==e&&(a=P(a,n,this.props.data.breaks,this.props.data.startTime));var o=Object(f.a)({},e,a);a.length||"defaultProjects"===e||(o.breaks=[]),this.props.update(o,Object(f.a)({},e,t))}},{key:"handleColorChange",value:function(e,t,a){var n=this.props.data[e].slice(),r=n.findIndex(function(e){return e.id===parseInt(t)}),o=Object.assign({},n[r]);n.splice(r,1),o.color=a,n.splice(r,0,o),this.props.update(Object(f.a)({},e,n),{projects:t})}},{key:"handleDragEnd",value:function(e,t){if(this.setState({temp:Object(c.a)({},this.state.temp,{dragging:!1})}),t.destination){var a=t.draggableId,n=t.destination.index,r=[];this.props.data[e].forEach(function(t){var a=Object.assign({},t);"defaultProjects"!==e&&(a.plannedTime=JSON.parse(JSON.stringify(t.plannedTime))),r.push(a)});var o,s=r.findIndex(function(e){return e.id===parseInt(a)}),i=r[s];if(n!==s)"defaultProjects"!==e&&(o=r[0].plannedTime.start),r.splice(s,1),r.splice(n,0,i),this.props.data.settings.updateTimesAfterDrag&&"defaultProjects"!==e&&(r[0].plannedTime.start=o,r=P(r,this.props.data.settings,this.props.data.breaks,this.props.data.startTime)),this.props.update(Object(f.a)({},e,r))}}},{key:"handleDoneEditingProject",value:function(e,t,a){var n=this.props.data[e].slice(),r=this.props.data.breaks,o=this.props.data.settings,s=n.findIndex(function(e){return e.id===parseInt(t)});if(!(s<0)){var i,l,c,u={};if(Object.keys(n[s]).forEach(function(e){u[e]=n[s][e]}),"defaultProjects"===e||u.estimatedDuration===a.duration&&I.areIdentical(u.plannedTime.start,a.startTime)||(u.plannedTime=Object.assign({},u.plannedTime)),n.splice(s,1),o.detectBreaksAutomatically&&0!==s&&"defaultProjects"!==e&&I.isBiggerThan(a.startTime,u.plannedTime.start,!1,!0)&&(r=this.addBreak(I.suggestStartTime(n[s-1].plannedTime.end,n[s-1].estimatedDuration,o),a.startTime)),o.detectBreaksAutomatically&&0!==s&&"defaultProjects"!==e&&I.isBiggerThan(u.plannedTime.start,a.startTime,!1,!0))for(var d=0;d<r.length;d++)r[d].autodetected&&I.areIdentical(u.plannedTime.start,r[d].endTime)&&(r[d].endTime=a.startTime);if("defaultProjects"!==e&&(i=parseInt(u.estimatedDuration)!==parseInt(a.duration),l=!I.areIdentical(u.plannedTime.start,a.startTime)),u.name=a.name,u.estimatedDuration=a.duration,"defaultProjects"===e?u.days=a.days:u.plannedTime.start=a.startTime,n.splice(s,0,u),this.props.data.settings.updateTimesAfterEdit&&(i||l)){for(var p=s+1;p<n.length;p++)n[p]=Object.assign({},n[p]),n[p].plannedTime=Object.assign({},n[p].plannedTime);var m=0===s?a.startTime:Object.assign({},this.props.data.startTime);n=P(n,o,r,m)}else c=Object(f.a)({},e,t),"defaultProjects"!==e&&(n[s].plannedTime.end=I.add(n[s].plannedTime.start,n[s].estimatedDuration));var h=Object(f.a)({},e,n);0!==s||"defaultProjects"===e||I.areIdentical(this.props.data.startTime,u.plannedTime.start)||(h.startTime=u.plannedTime.start),this.props.update(h,c)}}},{key:"handleProjectStateChange",value:function(e,t,a){var n=this,r=this.props.data.projects.slice(),o=r.findIndex(function(t){return t.id===parseInt(e)}),s=Object.assign({},r[o]);r.splice(o,1);var i=s.state;if(s.state=t,"paused"!==t||isNaN(parseInt(a))||(s=this.handleProjectPause(s,a)),"workingOnIt"===t&&(s.startedWorkingOnIt=Object.assign({},Object(c.a)({},this.props.currentTime,{s:(new Date).getSeconds()})),r.map(function(t){if("workingOnIt"===t.state&&t.id!==e){var a=I.subtractToMinutes(Object(c.a)({},n.props.currentTime,{s:(new Date).getSeconds()}),t.startedWorkingOnIt,!0);return t.progress&&(a+=parseInt(t.progress)),t.state="paused",n.handleProjectPause(t,a)}return t})),"done"===t){var l=0,u=parseInt(s.estimatedDuration);if(s.progress&&(l+=parseInt(s.progress)),s.startedWorkingOnIt&&(l+=I.subtractToMinutes(Object(c.a)({},this.props.currentTime,{s:(new Date).getSeconds()}),s.startedWorkingOnIt,!0)),l>1.1*u&&"paused"!==i){var d=this.props.data.settings.roundTo,p=Math.round(l/d)*d;p!==u&&this.setState({temp:Object(c.a)({},this.state.temp,{snackbar:{open:!0,message:"".concat(s.name," took way longer than expected. Do you want us to change its estimated duration to make it reflect how long it really took? (from ").concat(u," minutes to ").concat(p," minutes)"),action:function(){n.handleDoneEditingProject("projects",e,{name:s.name,duration:p,startTime:s.plannedTime.start})},buttonLabel:"Change"}})})}}var m={projects:[e]};r.splice(o,0,s),this.props.update({projects:r},m)}},{key:"changeView",value:function(e,t,a){if(t){var n="/"+e;if(a&&"function"!==typeof a.stopPropagation){n+="?";for(var r=!0,o=Object.entries(a),s=0;s<o.length;s++){var l=o[s],c=Object(i.a)(l,2);r?r=!1:n+="&",n+=c[0]+"="+c[1]}}this.props.history.push(n)}else{var u=this.props.history.location.pathname.split("/");u.splice(-1,1),this.props.history.push(u.join("/"))}}},{key:"handleDoneEditingBreak",value:function(e,t){var a=this.props.data.breaks.slice(),n=a.findIndex(function(t){return t.id===parseInt(e)});if(!(n<0)){var r=JSON.parse(JSON.stringify(a[n]));r.name=t.name,r.startTime=t.startTime,r.endTime=t.endTime,a.splice(n,1,r),this.props.update({breaks:a},{breaks:e})}}},{key:"deleteBreak",value:function(e){var t=this.props.data.breaks,a=t.findIndex(function(t){return t.id===parseInt(e)});t.splice(a,1),this.props.update({breaks:t},{breaks:e})}},{key:"render",value:function(){var e=this;if("/add"===this.props.history.location.pathname){var t,a,n,o,s=va(this.props.location.search);switch(s.type){case"default":a="defaultProjects",t="Add a repetitive project",n=this.changeView.bind(this,"defaultProjects",!0),o=this.props.data.defaultColorIndexDefaultProjects;break;case"break":a="breaks",t="Add a break",n=this.changeView.bind(this,"breaks",!0);break;default:a="projects",n=this.changeView.bind(this,"add",!1),o=this.props.data.defaultColorIndex}return r.a.createElement(ye,{settings:this.props.data.settings,defaultColorIndex:o,showErrors:this.state.showErrors,currentTime:this.props.currentTime,lastProject:this.props.data.projects[this.props.data.projects.length-1],onAddProject:this.addProject.bind(this,a),onAddBreak:this.addBreak,type:s.type,close:n,title:t})}if("/edit"===this.props.history.location.pathname&&this.props.data.breaks){var i,l,u=va(this.props.location.search),d=u.type;switch(d){case"default":i="defaultProjects",l=this.changeView.bind(this,"defaultProjects",!0);break;case"break":i="breaks",l=this.changeView.bind(this,"breaks",!0);break;default:i="projects",l=this.changeView.bind(this,"edit",!1)}var p=u.id,m=this.props.data[i],h=m.findIndex(function(e){return e.id.toString()===p}),f=m[h];if(f){var b,E,y={name:f.name};return"default"===d?y.days=f.days:y.startTime=f.plannedTime?f.plannedTime.start:f.startTime,"break"===d?y.endTime=f.endTime:(y.duration=f.estimatedDuration,y.color=f.color),"break"===d?(b=this.deleteBreak.bind(this,p),E=this.handleDoneEditingBreak.bind(this,p)):(b=this.deleteProject.bind(this,i,p),E=this.handleDoneEditingProject.bind(this,i,p)),r.a.createElement(we,{settings:this.props.data.settings,inputValues:y,delete:b,onDoneEditing:E,close:l,type:d})}}if("/breaks"===this.props.history.location.pathname&&this.props.data.breaks)return r.a.createElement(Ue,{breaks:this.props.data.breaks,changeView:this.changeView.bind(this)});if("/defaultProjects"===this.props.history.location.pathname&&this.props.data.defaultProjects)return r.a.createElement(kt,{projects:this.props.data.defaultProjects,settings:this.props.data.settings,defaultColorIndex:this.props.data.defaultColorIndexDefaultProjects,useDefaultProjects:this.props.data.useDefaultProjects,onColorChange:this.handleColorChange.bind(this,"defaultProjects"),onDoneEditing:this.handleDoneEditingProject.bind(this,"defaultProjects"),onAddProject:this.addProject.bind(this,"defaultProjects"),onDeleteProject:this.deleteProject.bind(this,"defaultProjects"),onDragEnd:this.handleDragEnd.bind(this,"defaultProjects"),onUseDefaultProjectsChange:function(t){e.props.update({useDefaultProjects:t.target.checked})},startEditingMobile:function(t){e.changeView("edit",!0,{type:"default",id:t})},changeView:this.changeView.bind(this)});var j=this.state.allProjectsDone,T=Object(c.a)({},this.props.showErrors,this.state.showErrors);return r.a.createElement(_.Consumer,null,function(t){return r.a.createElement(W.a,{className:"container",onKeyDown:e.handleRootKeyDown,tabIndex:"0",autoselect:"true"},!t&&r.a.createElement(wt,{mode:e.props.data.mode,onModeChange:e.props.changeMode},r.a.createElement(Mt,{currentTime:e.props.currentTime,onCurrentTimeChange:e.handleCurrentTimeChange,endTime:e.props.data.endTime,projects:e.props.data.projects,breaks:e.props.data.breaks,settings:e.props.data.settings,startTime:e.props.data.startTime,realEndTime:e.props.data.realEndTime})),r.a.createElement(W.a,{container:!0},r.a.createElement(L.Provider,{value:e.props.data.settings},r.a.createElement(Ct,{mode:e.props.data.mode,projects:e.props.data.projects,settings:e.props.data.settings,currentTime:e.props.currentTime,defaultColorIndex:e.props.data.defaultColorIndex,showErrors:T,onColorChange:e.handleColorChange.bind(e,"projects"),onDoneEditing:e.handleDoneEditingProject.bind(e,"projects"),onAddProject:e.addProject.bind(e,"projects"),onProjectStateChange:e.handleProjectStateChange.bind(e),onDeleteProject:e.deleteProject.bind(e,"projects"),onDragEnd:e.handleDragEnd.bind(e,"projects"),startEditingMobile:function(t){e.changeView("edit",!0,{id:t})}}),"planning"===e.props.data.mode?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"setEndTime"},r.a.createElement("label",{htmlFor:"endTimeHoursInput"},t?"End time":"Time when you want to stop working",":"),r.a.createElement(F,{onChange:e.handleEndTimeChange,value:e.props.data.endTime,firstInputId:"endTimeHoursInput",showError:T.endTime})),r.a.createElement(W.a,{container:!0,justify:"space-around"},!t&&r.a.createElement(W.a,null,r.a.createElement(G.a,{className:"planningSecondaryButton",onClick:function(){e.setState({temp:Object(c.a)({},e.state.temp,{openBreaksDrawer:!0})})},style:{marginBottom:"1rem"}},r.a.createElement($e.a,{color:"primary"}),"Edit breaks")),r.a.createElement(W.a,null,r.a.createElement(G.a,{onClick:function(){e.props.changeMode("working")},variant:"contained",color:"primary"},r.a.createElement(ot.a,null),"Let's get to work!")),!t&&r.a.createElement(W.a,null,r.a.createElement(G.a,{className:"planningSecondaryButton",onClick:e.openDefaultProjectsDrawer,style:{marginBottom:"1rem"}},r.a.createElement(Ea.a,{color:"primary"}),"Repetitive projects"))),r.a.createElement(ua.a,{id:"BreaksDrawer",anchor:"bottom",open:e.state.temp.openBreaksDrawer&&!t,onClose:function(){e.closeDrawer("BreaksDrawer","breaks")}},r.a.createElement(Bt,{breaks:e.props.data.breaks,currentTime:e.props.currentTime,onSave:e.saveBreaks,onClose:function(){e.closeDrawer("BreaksDrawer","breaks")}})),r.a.createElement(ua.a,{className:e.state.temp.defaultProjectsDrawerRemoveTransform?"defaultProjectsDrawerRemoveTransform":null,anchor:"bottom",open:e.state.temp.openDefaultProjectsDrawer&&!t,onClose:function(){e.closeDrawer("DefaultProjectsDrawer","projects")}},r.a.createElement(Tt,{projects:e.props.data.defaultProjects,settings:e.props.data.settings,defaultColorIndex:e.props.data.defaultColorIndexDefaultProjects,useDefaultProjects:e.props.data.useDefaultProjects,onClose:function(){e.closeDrawer("DefaultProjectsDrawer","projects")},onColorChange:e.handleColorChange.bind(e,"defaultProjects"),onDoneEditing:e.handleDoneEditingProject.bind(e,"defaultProjects"),onAddProject:e.addProject.bind(e,"defaultProjects"),onDeleteProject:e.deleteProject.bind(e,"defaultProjects"),onDragEnd:e.handleDragEnd.bind(e,"defaultProjects"),onUseDefaultProjectsChange:function(t){e.props.update({useDefaultProjects:t.target.checked})},startEditingMobile:function(t){e.changeView("edit",!0,{id:t})}}))):j&&r.a.createElement(la,{productivityPercentages:e.props.data.productivityPercentages,allProjectsDone:e.state.allProjectsDone,totalTimeWorkedString:e.state.totalTimeWorkedString,dateString:e.getDateString()}),e.state.showResetButton&&r.a.createElement(W.a,{container:!0,justify:"flex-end",alignItems:"flex-end",style:{marginTop:"2rem"}},r.a.createElement(G.a,{id:"resetButton",onClick:e.resetState,variant:"contained"},"Reset")))),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g.Link,{id:"linkToSettings",to:"/settings","aria-label":"Settings",title:"Settings"},r.a.createElement(ga.a,null)),r.a.createElement(ta,{connect:e.props.connect,disconnect:e.props.disconnect,history:e.props.history,loggedIn:e.props.loggedIn,data:localStorage.devUnlocked?e.props.data:{},update:localStorage.devUnlocked?e.props.update:{}})),r.a.createElement(pa.a,{direction:"right",in:!e.props.loggedIn&&!e.state.temp.dontShowSignInYet&&!e.state.temp.signInDissmissed&&!localStorage.dontShowSignInPanelAgain&&!e.props.disconnected,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(Wt,{connect:e.props.connect,dismiss:e.handleSignInDismiss,showDontRemindMeAgain:localStorage.userHasDismissedSignInBefore,dontRemindMeAgain:e.handleSignInDontRemindMeAgain})),t&&"planning"===e.props.data.mode&&r.a.createElement(Ie,{onClick:e.changeView.bind(e,"add",!0)}),r.a.createElement(ha.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:e.state.temp.snackbar.open,autoHideDuration:6e3,onClose:e.closeSnackbar,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},e.state.temp.snackbar.message),action:[r.a.createElement(G.a,{key:"action",color:"secondary",size:"small",onClick:function(){e.state.temp.snackbar.action(),e.closeSnackbar()},children:e.state.temp.snackbar.buttonLabel||""}),r.a.createElement(v.a,{key:"close","aria-label":"Close",color:"inherit",onClick:e.closeSnackbar},r.a.createElement(Vt.a,null))]}))})}}]),t}(n.Component),ja=function(e){return function(t){function a(t){var n;Object(u.a)(this,a),(n=Object(p.a)(this,Object(m.a)(a).call(this,t))).addDefaultColor=function(){var e=n.state.defaultColors,t="#"+(16777216*Math.random()).toString(16).substr(0,6);e.push(t),n.setState({defaultColors:e})},n.save=function(){"function"===typeof n.props.save&&n.props.save(n.state.defaultColors)},n.render=function(){return r.a.createElement(e,Object.assign({},n.props,{onDefaultColorChange:n.handleDefaultColorChange.bind(Object(ae.a)(Object(ae.a)(n))),addDefaultColor:n.addDefaultColor,removeDefaultColor:n.removeDefaultColor.bind(Object(ae.a)(Object(ae.a)(n))),save:n.save}))};var o={};return n.props.settings&&n.props.settings.defaultColors&&(o.defaultColors=n.props.settings.defaultColors),n.state=o,n}return Object(h.a)(a,t),Object(d.a)(a,[{key:"componentDidUpdate",value:function(){"undefined"===typeof this.state.defaultColors&&this.props.settings&&this.setState({defaultColors:this.props.settings.defaultColors})}},{key:"handleDefaultColorChange",value:function(e,t){var a=this.state.defaultColors;a[e]=t,this.setState({defaultColors:a})}},{key:"removeDefaultColor",value:function(e){var t=this.state.defaultColors;t.splice(e,1),this.setState({defaultColors:t})}}]),a}(n.Component)},Ta=(a(1123),{general:{order:0,label:"General settings",icon:"settings"},detection:{order:1,label:"Automatic detection",icon:"search"},misc:{order:2,label:"Miscellaneous",icon:"menu"}}),ka={timeFormat24H:{label:"Use the 24-hour time format",type:"boolean",section:"general",order:0,icon:"timer"},bufferTimePercentage:{label:"Bufffer time percentage",type:"percentage",max:1,tooltip:"Buffer times are short breaks inserted after each project. Their length depends on the length of the project before them. This field determines what percentage of the previous project's duration the buffer will be.",section:"general",order:1,icon:"view_week"},showResetButtonAfter:{label:"Show reset button after (hours)",type:"int",section:"misc",order:3,icon:"restore"},defaultColors:{label:"Default colors:",type:"colors",section:"misc",order:0,icon:"color_lens"},updateTimesAfterDrag:{label:"Adjust planned times after changing the order of projects",type:"boolean",section:"detection",order:0,icon:"swap_vert"},updateTimesAfterEdit:{label:"Adjust planned times after editing a project",type:"boolean",section:"detection",order:1,icon:"edit"},updateTimesAfterDelete:{label:"Adjust planned times after deleting a project",type:"boolean",section:"detection",order:2,icon:"delete"},roundTo:{label:"Round to (minutes)",type:"int",section:"misc",order:2,icon:"access_time"},changeModeOnTab:{label:"Change mode when the Tab key is pressed",type:"boolean",section:"misc",order:1,icon:"redo"},detectBreaksAutomatically:{label:"Detect breaks automatically",type:"boolean",section:"detection",order:3,icon:"pause"},adjustDurationOnPause:{label:"If you set progress to a number higher than the project's duration, adjust its duration",type:"boolean",section:"detection",order:4,icon:"input"},offerToAdjustDurationOnDone:{label:"If a project takes longer than expected, offer to adjust its duration",type:"boolean",section:"detection",order:5,icon:"build"},darkTheme:{label:"Dark theme",type:"boolean",section:"general",order:0,icon:"invert_colors"}},wa=ja(function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).save=function(){for(var e=a.state.inputs,t=Object.keys(e),n=0;n<t.length;n++)if(ka[t[n]]&&"percentage"===ka[t[n]].type&&"%"===e[t[n]]){var r=a.state.showErrors;return r[t[n]]=!0,void a.setState({showErrors:r})}a.props.update({settings:e}),a.props.history.push("/")},a.resetToDefault=function(){window.confirm("Are you sure you want to reset your settings back to default?")&&(a.setState({inputs:a.props.defaultSettings}),a.props.update({settings:a.props.defaultSettings}))},a.handleFirstSectionIconClick=function(){var e=a.state.temp.firstSectionIconClickCounter;if(e||(e=0),++e>12)if(localStorage.devUnlocked)window.confirm("Are you sure you want to turn off dev options?")&&localStorage.removeItem("devUnlocked");else if(window.confirm("Howdy there! Looks like you just clicked the settings icon 13 times\nin a row which means a) you just had a stroke or b) you're trying to unlock developer options.\nIf it's the former, please seek help immediately. If the latter, click OK.")){localStorage.devUnlocked=!0,clearTimeout(a.state.temp.firstSectionIconClickCounterTimeout);var t=a.state.temp;delete t.firstSectionIconClickCounter,delete t.firstSectionIconClickCounterTimeout,a.setState({temp:t})}clearTimeout(a.state.temp.firstSectionIconClickCounterTimeout);var n=setTimeout(function(){a.setState({temp:Object(c.a)({},a.state.temp,{firstSectionIconClickCounter:0})})},3e3);a.setState({temp:Object(c.a)({},a.state.temp,{firstSectionIconClickCounter:e,firstSectionIconClickCounterTimeout:n})})},a.state={inputs:a.props.settings,showErrors:{},temp:{}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(){!Object.keys(this.state.inputs).length&&this.props.settings&&this.setState({inputs:this.props.settings})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.state.temp.firstSectionIconClickCounterTimeout)}},{key:"handleInputChange",value:function(e,t){var a="boolean"===ka[e].type?t.target.checked:t.target.value;switch(ka[e].type){case"int":if(isNaN(a)&&""!==a)return;break;case"percentage":var n=a.split("%")[0];if(""!==n&&(a=n/100),isNaN(a)&&"%"!==a)return}if(!("undefined"!==typeof ka[e].max&&a>ka[e].max)){var r={inputs:this.state.inputs,showErrors:this.state.showErrors};r.inputs[e]=a,r.showErrors[e]=!1,this.setState({newState:r})}}},{key:"render",value:function(){var e=this,t=[],a=Object.keys(Ta);a.sort(function(e,t){return Ta[e].order>Ta[t].order?1:-1});for(var n=function(){var n=a[o],r=Object.keys(e.state.inputs).filter(function(e){return ka[e].section===n});r.sort(function(e,t){return ka[e].order>ka[t].order?1:-1}),t.push(r)},o=0;o<a.length;o++)n();return r.a.createElement("div",{className:"Settings container"},r.a.createElement(Me.a,null,r.a.createElement(Be.a,null,t.map(function(t,a){var n=Object.keys(Ta).find(function(e){return Ta[e].order===a});return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(_e.a,null,r.a.createElement(Re.a,{className:"sectionIconCell"},r.a.createElement(gt.a,{onClick:a?function(){}:e.handleFirstSectionIconClick},Ta[n].icon)),r.a.createElement(Re.a,{colSpan:3},r.a.createElement(Y.a,{variant:"h5",style:{paddingTop:"2.5rem"}},Ta[n].label,":"))),t.map(function(t,a){return"defaultColors"===t?r.a.createElement(_e.a,{key:a},r.a.createElement(Re.a,{className:"iconCell"},r.a.createElement(gt.a,null,ka[t].icon)),r.a.createElement(Re.a,null,"Default colors:"),r.a.createElement(_.Consumer,null,function(t){return t?r.a.createElement(Re.a,{className:"value"},r.a.createElement(g.Link,{to:"/settings/defaultColors","aria-label":"Set default colors"},r.a.createElement(G.a,{variant:"outlined"},"Set"))):r.a.createElement(Re.a,{id:"defaultColorsCell",className:"value"},e.state.inputs.defaultColors.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(R,{value:t,onChange:e.props.onDefaultColorChange.bind(e,a)}),r.a.createElement("div",{className:"removeDefaultColorDiv"},r.a.createElement(v.a,{"aria-label":"Remove the color",className:"removeDefaultColor",disableRipple:!0,onClick:e.props.removeDefaultColor.bind(e,a)},r.a.createElement(gt.a,null,"remove"))))}),r.a.createElement(v.a,{id:"addDefaultColor","aria-label":"Add a new default color",onClick:e.props.addDefaultColor},r.a.createElement(gt.a,null,"add")))}),r.a.createElement(Re.a,{className:"rightCell"})):r.a.createElement(_e.a,{key:a},r.a.createElement(Re.a,{className:"iconCell"},r.a.createElement(gt.a,null,ka[t].icon)),r.a.createElement(Re.a,null,ka[t].label,ka[t].tooltip&&r.a.createElement(ut.a,{title:ka[t].tooltip,disableFocusListener:!0,disableTouchListener:!0},r.a.createElement(gt.a,{className:"tooltipIcon"},"help")),":"),r.a.createElement(Re.a,{className:"value"},"boolean"===ka[t].type?r.a.createElement(jt.a,{color:"primary",checked:e.state.inputs[t],onChange:e.handleInputChange.bind(e,t),"aria-label":ka[t].label}):r.a.createElement(w.a,{value:"percentage"===ka[t].type&&"%"!==e.state.inputs[t]?100*e.state.inputs[t]+"%":e.state.inputs[t],onChange:e.handleInputChange.bind(e,t),error:e.state.showErrors[t],"aria-label":ka[t].label})),r.a.createElement(Re.a,{className:"rightCell"}))}))}),r.a.createElement(_e.a,null,r.a.createElement(Re.a,{colSpan:4},r.a.createElement(W.a,{container:!0,alignItems:"baseline",justify:"space-around"},r.a.createElement(W.a,null,r.a.createElement(G.a,{onClick:this.save,variant:"contained",color:"primary"},"Save")),r.a.createElement(W.a,null,r.a.createElement(G.a,{onClick:this.resetToDefault,variant:"contained"},"Reset to default"))))))))}}]),t}(n.Component)),Ca=(a(1125),function(e){return r.a.createElement("div",{className:"container"},r.a.createElement(Y.a,{variant:"h4",className:"h-1"},"Welcome to Mind Your Time"),r.a.createElement("p",{className:"summary"},"Mind Your Time is a platform that aims to tackle a complex issue in a simplistic way"),r.a.createElement("p",null,"Do you ever have trouble realistically planning out your day and then actually executing the plan?",r.a.createElement("br",null),"Mind Your Time is here to help."),r.a.createElement("p",null,"The idea here is simple. Plan your day and then check if you're still on schedule. Write down when you're gonna do what and how long it's gonna take. Then periodically check if you're making the progress you should be making."),r.a.createElement("p",null,"Like I said, the idea is simple but if you truly follow it, I promise your productivity will skyrocket. Starting right now."),r.a.createElement("p",null,"It seems easy but if you've ever really tried doing it, you probably know it isn't. There are a ton of distractions. All the time. That is why we're introducing buffer times."),r.a.createElement("div",{id:"#bufferTimes"},r.a.createElement(Y.a,{variant:"h5",className:"h-2"},"Buffer Times"),r.a.createElement("p",{className:"summary"},"Buffer times are essential to making a realistic plan"),r.a.createElement("p",null,"You may have noticed that whenever you set out to do something, something else always comes up and requires your full attention. Like your cat walking over your keyboard. Or your coffee mug spilling. Or a billion other things that you simply cannot foresee. By the time you come back, your entire day's plan is thrown into disarray."),r.a.createElement("p",null,"In order to be truly productive, you need to expect the unexpected. We take care of that for you."),r.a.createElement("p",null,"Buffer times are the solution. They are short breaks that we automatically insert after each planned project. Their length is proportional to the length of the previous project - about 20% of the project's length by default. (Note that this can be changed in the settings) These little breaks in your schedule aren't primarily meant as breaks though. Instead, their job is to compansate for the distractions that happen while you're working on the previous project. Ideally when you actually execute your plan, these little breaks should disappear. However, if they don't feel free to rest for a little while - whatever works for you."),r.a.createElement("p",null,"Of course if you feel like you need more breaks in your schedule, you can insert them in using our breaks editor. You could also increase the buffer time percentage in the settings but note that this comes at a price - a slight but measurable decrease in productivity. On the other hand, if you want to aim for even higher productivity, you can decrease the percentage but then you run the risk of your plan being too ideallistic and falling apart."),r.a.createElement("p",null,"At the end of the day, your buffer times need to be balanced and that balance can only be accomplished by trial and error. So feel free to experiment with the percentage if you feel it can make the app work better for you.")),r.a.createElement("div",{id:"#aboutMe"},r.a.createElement(Y.a,{variant:"h5",className:"h-2"},"About me"),r.a.createElement("p",null,"I've experimented with a lot of different productivity/time-management systems over the years. At the end I developed a fairly simple system - writing down what I want to do today and when exactly I wanna do it. Sounds simple, I know, but it truly improved my productivity by a lot. The problem was that I couldn't find an app to use for this so I just had write it down on my whiteboard. (Yes, I actually have a whiteboard in my bedroom. Go ahead, judge me.)"),r.a.createElement("p",null,"This was pretty annoying so of course: I'm the kind of guy that needs everything on a screen so I didn't do it every day. And so a while later, I decided to create Mind Your Time. At first, it was just as a way off to show my skills to employers and organize my own time, only later did I realize that it could actually be really useful to other people as well."),r.a.createElement("p",null,"I really hope you find this app useful and that it helps you with whatever you set out to do. If you find any problems, get an idea for a new feature you'd like to see or just want to send me anything at all, here's my contact info:"),r.a.createElement("div",{id:"#contact"},r.a.createElement(Y.a,{variant:"h6"},"Contact"),r.a.createElement("a",{href:"https://goo.gl/forms/jdesExEMegbkLPjp2",target:"_blank",rel:"noopener noreferrer"},"Feedback form")," (you can submit feedback here or via email, whichever you prefer)",r.a.createElement("br",null),"Email: ",r.a.createElement("a",{href:"mailto:michaelfarnik@gmail.com"},"michaelfarnik@gmail.com"),r.a.createElement("br",null),"GitHub: ",r.a.createElement("a",{href:"https://github.com/michaloslav"},"Michael Farn\xedk"),r.a.createElement("br",null),"LinkedIn: ",r.a.createElement("a",{href:"https://www.linkedin.com/in/michael-farn%C3%ADk-13002b168/"},"Michael Farn\xedk"))))}),Sa=a(430),Oa=a.n(Sa),Da=ja(function(e){return r.a.createElement("div",{className:"SettingsDefaultColors container"},r.a.createElement(T,{onClick:function(){e.history.push("/settings/")}}),r.a.createElement(Me.a,null,r.a.createElement(xe.a,null,r.a.createElement(_e.a,null,r.a.createElement(Re.a,{colSpan:2},r.a.createElement(Y.a,{variant:"h6"},"Default colors:")))),r.a.createElement(Be.a,null,e.settings.defaultColors&&e.settings.defaultColors.map(function(t,a){return r.a.createElement(_e.a,{key:a},r.a.createElement(Re.a,null,r.a.createElement(R,{value:t,onChange:e.onDefaultColorChange.bind(void 0,a),xl:!0})),r.a.createElement(Re.a,null,r.a.createElement(G.a,{"aria-label":"Remove the color",className:"removeDefaultColor",disableRipple:!0,onClick:e.removeDefaultColor.bind(void 0,a)},r.a.createElement(Oa.a,null),"Remove")))}),r.a.createElement(_e.a,null,r.a.createElement(Re.a,{colSpan:2},r.a.createElement(W.a,{container:!0,justify:"space-around"},r.a.createElement(G.a,{onClick:e.addDefaultColor,variant:"outlined",color:"primary"},r.a.createElement(De.a,null),"Add"),r.a.createElement(G.a,{onClick:function(){e.save(),e.history.push("/settings/")},variant:"outlined",color:"primary"},"Save")))))))}),Ia=function(e){return r.a.createElement(g.Link,{className:"LinkToRoot",to:"/","aria-label":"Back"},r.a.createElement(j.a,null))},Pa=a(434),Ma=a.n(Pa),Na=a(431),Ba=a.n(Na),Aa=a(435),xa=a.n(Aa),La=a(432),_a=a.n(La),Fa=a(433),Ra=a.n(Fa),Va=(a(1127),function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).signIn=function(e){a.props.close(),a.props.connect(e)},a.signOut=function(){a.props.close(),a.props.disconnect()},a.togglePlanningCollapse=function(e){e.stopPropagation(),a.setState({planningCollapseOpen:!a.state.planningCollapseOpen}),a.props.setNavbarState({planningCollapseOpenExplicit:!0})},a.checkActive=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("/"===a.props.location.pathname)e=a.props.mode;else{var n=a.props.location.pathname.split("/")[1];if("add"===n||"edit"===n)switch(va(a.props.location.search).type){case"default":e="defaultProjects";break;case"break":e="breaks";break;default:e="planning"}else e=n}var r="planning"===e||"breaks"===e||"defaultProjects"===e;if(t)return{active:e,planningCollapseOpen:r};var o={};e!==a.state.active&&(o.active=e),r===a.state.planningCollapseOpen||a.props.planningCollapseOpenExplicit||(o.planningCollapseOpen=r),Object.keys(o).length&&a.setState(o)},a.render=function(){return r.a.createElement(et.a,null,r.a.createElement(at.a,{button:!0,onClick:a.modeSwitch.bind(Object(ae.a)(Object(ae.a)(a)),"planning")},r.a.createElement(Jt.a,null,r.a.createElement(Ba.a,{color:"planning"===a.state.active?"primary":void 0})),r.a.createElement(qt.a,{primary:"Planning"}),r.a.createElement(v.a,{onClick:a.togglePlanningCollapse,style:{padding:0}},a.state.planningCollapseOpen?r.a.createElement(_a.a,null):r.a.createElement(Ra.a,null))),r.a.createElement(Ma.a,{in:a.state.planningCollapseOpen,timeout:"auto",unmountOnExit:!0},r.a.createElement(et.a,{component:"div",disablePadding:!0},[{title:"Breaks",icon:r.a.createElement($e.a,{color:"breaks"===a.state.active?"primary":void 0}),onClick:a.navigate.bind(Object(ae.a)(Object(ae.a)(a)),"breaks")},{title:"Repetitive projects",icon:r.a.createElement(Ea.a,{color:"defaultProjects"===a.state.active?"primary":void 0}),onClick:a.navigate.bind(Object(ae.a)(Object(ae.a)(a)),"defaultProjects")}].map(function(e){return r.a.createElement(at.a,{key:e.title,button:!0,onClick:e.onClick,style:{paddingLeft:"2rem"}},r.a.createElement(Jt.a,{children:e.icon}),r.a.createElement(qt.a,{inset:!0,primary:e.title}))}))),[{title:"Working",icon:r.a.createElement(xa.a,{color:"working"===a.state.active?"primary":void 0}),onClick:a.modeSwitch.bind(Object(ae.a)(Object(ae.a)(a)),"working")},{title:"Settings",icon:r.a.createElement(ga.a,{color:"settings"===a.state.active?"primary":void 0}),onClick:a.navigate.bind(Object(ae.a)(Object(ae.a)(a)),"settings")},{title:"About",icon:r.a.createElement(Ot.a,{color:"about"===a.state.active?"primary":void 0}),onClick:a.navigate.bind(Object(ae.a)(Object(ae.a)(a)),"about")}].map(function(e){return r.a.createElement(at.a,{key:e.title,button:!0,onClick:e.onClick},r.a.createElement(Jt.a,{children:e.icon}),r.a.createElement(qt.a,{primary:e.title}))}),a.props.loggedIn?r.a.createElement(at.a,{button:!0,onClick:a.signOut},r.a.createElement(Jt.a,null,r.a.createElement(Vt.a,null)),r.a.createElement(qt.a,{primary:"Sign Out"})):r.a.createElement(Lt,{connect:a.signIn,render:function(e){return r.a.createElement(at.a,{button:!0,onClick:e.onClick},r.a.createElement(Jt.a,null,r.a.createElement(ea,null)),r.a.createElement(qt.a,{primary:"Sign In"}))}}),localStorage.devUnlocked&&r.a.createElement($t,{data:a.props.data,update:a.props.update,showAsListItem:!0}))};var n=a.checkActive(!0);return a.state=Object(c.a)({planningCollapseOpen:!1},n),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;this.state.checkActiveTimeout||this.setState({checkActiveTimeout:setTimeout(function(){e.checkActive(),e.setState({checkActiveTimeout:null})},500)})}},{key:"componentWillUnmount",value:function(){var e=this.state.checkActiveTimeout;clearTimeout(e),this.setState({checkActiveTimeout:e})}},{key:"navigate",value:function(e){this.props.history.push("/"+e),this.props.close()}},{key:"modeSwitch",value:function(e){this.props.changeMode(e),"/"!==this.props.location.pathname&&this.props.history.push("/"),this.props.close()}}]),t}(n.Component)),Wa=Object(b.k)(Va),Ua=a(436),Ha=a.n(Ua),Ka=a(437),Ya=a.n(Ka),Ja=a(438),Ga=a.n(Ja),qa=(a(1130),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).open=function(){a.setState({drawerOpen:!0})},a.close=function(){a.setState({drawerOpen:!1,planningCollapseOpenExplicit:!1})},a.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ha.a,{id:"Navbar"},r.a.createElement(Ya.a,null,r.a.createElement(v.a,{id:"openDrawerMenuButton","aria-label":"Menu",onClick:a.state.drawerOpen?a.close:a.open},r.a.createElement(Xt.a,null)),r.a.createElement(W.a,{id:"TimeStatsContainer",container:!0,alignItems:"baseline",justify:"space-between"},r.a.createElement(Mt,{currentTime:a.props.currentTime,onCurrentTimeChange:a.props.onCurrentTimeChange,endTime:a.props.data.endTime,projects:a.props.data.projects,breaks:a.props.data.breaks,settings:a.props.data.settings,startTime:a.props.data.startTime,realEndTime:a.props.data.realEndTime,shortLabels:!0})))),r.a.createElement(Ga.a,{id:"DrawerMenu",open:a.state.drawerOpen,onOpen:a.open,onClose:a.close},r.a.createElement(Wa,{connect:a.props.connect,disconnect:a.props.disconnect,loggedIn:a.props.loggedIn,mode:a.props.data.mode,changeMode:a.props.changeMode,setNavbarState:a.setState.bind(Object(ae.a)(Object(ae.a)(a))),close:a.close,planningCollapseOpenExplicit:a.state.planningCollapseOpenExplicit,data:localStorage.devUnlocked?a.props.data:{},update:a.props.update})))},a.state={drawerOpen:!1,planningCollapseOpenExplicit:!1},a}return Object(h.a)(t,e),t}(n.Component)),za=a(439),Za=(a(1136),function(e){return r.a.createElement("footer",null,"Created by ",r.a.createElement("a",{href:"https://github.com/michaloslav"},"Michael Farn\xedk"),r.a.createElement("span",null," | "),r.a.createElement("a",{href:"https://goo.gl/forms/jdesExEMegbkLPjp2",target:"_blank",rel:"noopener noreferrer"},"Feedback"),r.a.createElement("span",null," | "),r.a.createElement(za.HashLink,{to:"/about#contact"},"Contact"),r.a.createElement("div",null,"Icon made by ",r.a.createElement("a",{href:"https://www.flaticon.com/authors/kiranshastry",title:"Kiranshastry",target:"_blank",rel:"noopener noreferrer"},"Kiranshastry")," from ",r.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon",target:"_blank",rel:"noopener noreferrer"},"www.flaticon.com")," is licensed by ",r.a.createElement("a",{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank",rel:"noopener noreferrer"},"CC 3.0 BY")))}),$a=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).AppWithProps=function(e){return r.a.createElement(ya,Object.assign({data:a.props.data,connect:a.props.connect,changeMode:a.changeMode,update:a.props.update,disconnect:a.props.disconnect,loggedIn:a.props.loggedIn,disconnected:a.props.disconnected,currentTime:a.state.currentTime,showErrors:a.state.showErrors,changeRouterShowErrors:a.changeShowErrors,onCurrentTimeChange:function(e){a.setState({currentTime:e})}},e))},a.SettingsWithProps=function(e){return r.a.createElement(wa,Object.assign({settings:Object.assign({},a.props.data.settings),defaultSettings:Ut,update:a.props.update},e))},a.SettingsDefaultColorsWithProps=function(e){return r.a.createElement(Da,Object.assign({settings:Object.assign({},a.props.data.settings),save:function(e){a.props.update({settings:Object(c.a)({},a.props.data.settings,{defaultColors:e})})}},e))},a.changeMode=function(e){if("working"===e){if(""===a.props.data.endTime.h||""===a.props.data.endTime.m)return void a.changeShowErrors("endTime",!0);if(!a.props.data.projects.length)return void a.changeShowErrors("noProjects",!0)}a.props.update({mode:e})},a.changeShowErrors=function(e,t){a.setState({showErrors:Object(c.a)({},a.state.showErrors,Object(f.a)({},e,t))})},a.state={width:window.innerWidth,currentTime:{h:0,m:0,pm:!0,defaultVal:!0},showErrors:{}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){var e=this;window.addEventListener("resize",function(){e.setState({width:window.innerWidth})})}},{key:"render",value:function(){var e=this,t=this.state.width<660;return r.a.createElement(g.BrowserRouter,null,t?r.a.createElement(qa,{data:this.props.data,connect:this.props.connect,changeMode:this.changeMode,disconnect:this.props.disconnect,loggedIn:this.props.loggedIn,currentTime:this.state.currentTime,onCurrentTimeChange:function(t){e.setState({currentTime:t})},update:localStorage.devUnlocked?this.props.update:{}}):r.a.createElement(b.g,null,r.a.createElement(b.d,{path:"/(|add|edit|breaks|defaultProjects)",exact:!0}),r.a.createElement(b.d,{component:Ia})),r.a.createElement(_.Provider,{value:t},r.a.createElement(b.g,null,r.a.createElement(b.d,{path:"/settings/defaultColors/",render:this.SettingsDefaultColorsWithProps}),r.a.createElement(b.d,{path:"/settings/",render:this.SettingsWithProps}),r.a.createElement(b.d,{path:"/about/",component:Ca}),r.a.createElement(b.d,{path:"/robots.txt",target:"_self"}),r.a.createElement(b.d,{path:"/(|add|edit|breaks|defaultProjects)",exact:!0,render:this.AppWithProps}),r.a.createElement(b.d,{render:function(){return r.a.createElement(b.c,{to:"/"})}}))),t?r.a.createElement(b.d,{path:"/about/",component:Za}):r.a.createElement(Za,null))}}]),t}(n.Component),Qa=a(284),Xa=a.n(Qa),en=a(441),tn=a.n(en),an=a(440),nn=a(89),rn=a(290),on=a.n(rn),sn=a(103);function ln(e,t){for(var a=JSON.parse(JSON.stringify(e)),n=Object.entries(t),r=0;r<n.length;r++){var o=n[r],s=Object(i.a)(o,2),l=s[0],c=s[1];if("object"===typeof c&&"function"!==typeof c.getTime){var u=e[l];u||(u={}),a[l]=ln(u,c)}else a[l]=c}return a}for(var cn={type:"number"},un={type:"number",required:!0},dn={type:"string",required:!0},pn={type:"boolean",required:!0},mn={type:"object",properties:{h:un,m:un,pm:pn,s:cn}},hn=Object(c.a)({},mn,{required:!0}),fn={type:"string",isDate:!0},gn=function(e){return{type:"object",isArray:!0,elements:e}},bn=function(e){return{type:"object",properties:e}},En={id:un,name:dn,color:dn,estimatedDuration:un,state:dn,order:cn,plannedTime:{type:"object",properties:{start:hn,end:hn}}},vn={},yn=Object.entries(Ut),jn=0;jn<yn.length;jn++){var Tn=yn[jn],kn=Object(i.a)(Tn,2),wn=kn[0],Cn=kn[1],Sn=typeof Cn;"object"===Sn?Array.isArray(Cn)?vn[wn]=gn({type:typeof Cn[0],required:!0}):console.warn("Unhandled scenraio, settings contains an object that isn't an array"):vn[wn]={type:Sn,required:!0}}for(var On={},Dn=["startTime","endTime","mode","defaultColorIndex","defaultColorIndexDefaultProjects","lastReset","useDefaultProjects"],In=Object.keys(En),Pn={projects:Object(sn.a)(In).concat(["startedWorkingOnIt","progress"]),breaks:["id","name","startTime","endTime","autodetected"],defaultProjects:Object(sn.a)(In).concat(["days"]),settings:Object.keys(Ut)},Mn=0;Mn<Dn.length;Mn++){On[Dn[Mn]]=fn}for(var Nn=Object.entries(Pn),Bn=0;Bn<Nn.length;Bn++){var An=Nn[Bn],xn=Object(i.a)(An,2),Ln=xn[0],_n=xn[1],Fn={},Rn=!0,Vn=!1,Wn=void 0;try{for(var Un,Hn=_n[Symbol.iterator]();!(Rn=(Un=Hn.next()).done);Rn=!0){var Kn=Un.value;"id"===Kn?Fn.id=Object(c.a)({},fn,{required:!0}):Fn[Kn]=fn}}catch(tr){Vn=!0,Wn=tr}finally{try{Rn||null==Hn.return||Hn.return()}finally{if(Vn)throw Wn}}On[Ln]=bn("settings"===Ln?Fn:{__any__:bn(Fn)})}var Yn={projects:gn(bn(Object(c.a)({},En,{startedWorkingOnIt:mn,progress:cn}))),breaks:gn(bn({id:un,name:dn,startTime:hn,endTime:hn,autodetected:{type:"boolean"}})),defaultProjects:gn(bn(Object(c.a)({},En,{days:gn(pn)}))),settings:bn(vn),startTime:hn,endTime:hn,mode:dn,defaultColorIndex:un,defaultColorIndexDefaultProjects:un,lastReset:dn,useDefaultProjects:pn,productivityPercentages:bn({__any__:cn}),realEndTime:fn,lastModified:bn(On)};function Jn(e){"string"===typeof e&&console.warn("Keys must be an array!");var t="Incorrect property detected in data: ".concat(e.join(".")," should not be defined");try{var a=e.reduce(function(e,t){return e[t]},Yn)}catch(n){console.warn(t),console.warn(n)}return a||console.warn(t),a}function Gn(e,t){var a=Jn(e);if(a){var n=a.type,r=typeof t;if(a.isDate){if("string"===r&&!isNaN(new Date(t).getTime())||"object"===r&&!isNaN(t.getTime()))return t;if("undefined"===r)return;console.warn("Incorrect type or invalid date detected: ".concat(e.join(".")," is '").concat(t,"' (of type ").concat(r,") which isn't a valid date"))}else{if(n===r||"number"===n&&"string"===r&&!isNaN(parseFloat(t))||"string"===n&&a.isDate&&"object"===r&&t instanceof Date)return t;"undefined"!==r&&console.warn("Incorrect type detected in data: ".concat(e.join(".")," is '").concat(t,"' which is of type ").concat(r,", should be of type ").concat(n))}}}function qn(e,t){var a,n=Jn(e);if(n){if(n.isArray){if(a=[],!Array.isArray(t))return;var r=!0,o=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;"object"===typeof u?a.push(qn(Object(sn.a)(e).concat(["elements"]),u)):a.push(Gn(Object(sn.a)(e).concat(["elements"]),u))}}catch(tr){o=!0,s=tr}finally{try{r||null==c.return||c.return()}finally{if(o)throw s}}}else{a={};for(var d=Object.entries(t),p=0;p<d.length;p++){var m=d[p],h=Object(i.a)(m,2),f=h[0],g=h[1],b=void 0,E=void 0;if(n.properties[f])b=n.properties[f].type,E=f;else{if(!n.properties.__any__){console.warn("Incorrect property in data: ".concat(e.join("."),".").concat(f," should not be defined "));continue}b=n.properties.__any__.type,E="__any__"}"object"===b?(a[f]=qn(Object(sn.a)(e).concat(["properties",E]),g),a[f]&&a[f].__lastModifiedSysNote&&(a.__lastModifiedSysNote||(a.__lastModifiedSysNote={}),a.__lastModifiedSysNote[f]=a[f].__lastModifiedSysNote,delete a[f].__lastModifiedSysNote)):a[f]=Gn(Object(sn.a)(e).concat(["properties",E]),g)}for(var v=Object.entries(n.properties),y=0;y<v.length;y++){var j=v[y],T=Object(i.a)(j,2),k=T[0];if(T[1].required&&"undefined"===typeof t[k]){console.warn("Property missing in data: ".concat(e.join("."),".").concat(k," is not defined"));var w=void 0;1===e.length&&"settings"===e[0]&&(w=Ut[k]),"undefined"!==typeof w&&(console.log("".concat(e.join("."),".").concat(k," automatically set to ").concat(w)),a[k]=w,a.__lastModifiedSysNote||(a.__lastModifiedSysNote={}),a.__lastModifiedSysNote[k]=!0)}}}return a}}function zn(e){for(var t={},a=Object.entries(e),n=0;n<a.length;n++){var r=a[n],o=Object(i.a)(r,2),s=o[0],l=o[1];Yn[s]?"object"===Yn[s].type?(t[s]=qn([s],l),t[s].__lastModifiedSysNote&&(t.__lastModifiedSysNote||(t.__lastModifiedSysNote={}),t.__lastModifiedSysNote[s]=t[s].__lastModifiedSysNote,delete t[s].__lastModifiedSysNote)):t[s]=Gn([s],l):console.warn("Incorrect key in data: ".concat(s))}if(t.__lastModifiedSysNote){var c=function e(t){var a={};return Object.entries(t).forEach(function(t){var n=Object(i.a)(t,2),r=n[0],o=n[1];a[r]="object"===typeof o?e(o):new Date}),a}(t.__lastModifiedSysNote);delete t.__lastModifiedSysNote,t.lastModified?t.lastModified=ln(t.lastModified,c):t.lastModified=c}return t}a(1166);var Zn=Object(nn.createMuiTheme)({palette:{primary:{main:"#039be5"},secondary:on.a},typography:{useNextVariants:!0}}),$n=Object(nn.createMuiTheme)({palette:{primary:{main:"#039be5"},secondary:on.a,type:"dark"},typography:{useNextVariants:!0}}),Qn=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).connect=function(e){if(a.io.disconnected)a.setState({temp:Object(c.a)({},a.state.temp,{showDisconnectedError:!0})});else{var t=a.state,n=(t.accessToken,t.temp,Object(l.a)(t,["accessToken","temp"]));a.idToken=e,a.io.emit("connectInit",{type:"OAuth",idToken:e,localData:n})}},a.disconnect=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||window.confirm("Are you sure you want to sign out?")){if(a.io.disconnected)return void a.setState({temp:Object(c.a)({},a.state.temp,{showDisconnectedError:!0})});a.io.emit("disconnectU",{accessToken:localStorage.accessToken})}},a.update=function(e,t){if(e.projects&&!e.projects.length&&a.state.projects.length){if(e.useDefaultProjects||a.state.useDefaultProjects){var n=(new Date).getDay();--n<0&&(n=6),e.projects=[],a.state.defaultProjects.forEach(function(t){var a=t.days,r=Object(l.a)(t,["days"]);a&&!a[n]||e.projects.push(r)});var r=e.settings||a.state.settings,o=I.add(60*(new Date).getHours()+(new Date).getMinutes(),10);o=I.round(o,r.roundTo),e.projects=P(e.projects,r,[],o),e.projects.forEach(function(t){t.id=Nt(e.projects,"projects")}),e.startTime=o;var s=!0}else e.projects=[];e.breaks=[],e.lastReset=(new Date).toISOString(),e.realEndTime=void 0,e.lastModified||(e.lastModified={}),e.lastModified.projects={},e.lastModified.breaks={},a.deleteObjectsLocalStorage("lastModified_projects_"),a.deleteObjectsLocalStorage("lastModified_breaks_")}e=zn(e);for(var u=["projects","defaultProjects"],d=0;d<u.length;d++){var p=u[d];e[p]&&e[p].forEach(function(e,t){e.order=t})}e.realEndTime&&(e.realEndTime=e.realEndTime.toISOString());var m={};Object.keys(e).forEach(function(n){switch(n){case"projects":m.projects=a.setMultipleLastModified(e.projects,t&&!s?t.projects:void 0,"projects");break;case"breaks":m.breaks=a.setMultipleLastModified(e.breaks,t?t.breaks:void 0,"breaks");break;case"defaultProjects":m.defaultProjects=a.setMultipleLastModified(e.defaultProjects,t?t.defaultProjects:void 0,"defaultProjects");break;case"settings":m.settings=a.state.lastModified&&a.state.lastModified.settings?a.state.lastModified.settings:{},Object.keys(e.settings).forEach(function(t){e.settings[t]!==a.state.settings[t]&&(m.settings[t]=new Date,localStorage["lastModified_settings_"+t]=m.settings[t].toISOString())});break;case"lastReset":case"realEndTime":break;default:m[n]=new Date,localStorage["lastModified_"+n]=m[n].toISOString()}}),e.lastModified=ln(a.state.lastModified,m),a.setState(e);for(var h=Object.entries(e),f=0;f<h.length;f++){var g=h[f],b=Object(i.a)(g,2),E=b[0],v=b[1];"lastModified"!==E&&("undefined"!==typeof v?localStorage[E]="object"===typeof v&&"lastReset"!==E?JSON.stringify(v):v:delete localStorage[E])}if(a.state.accessToken)if(a.io.disconnected)a.setState({temp:Object(c.a)({},a.state.temp,{updatedWhileDisconnected:!0})});else{e.lastReset||(e.lastReset=a.state.lastReset);for(var y={},j=Object.keys(m),T=0;T<j.length;T++){var k=j[T];y[k]=e.lastModified[k]}e.lastModified=y,a.io.emit("update",{accessToken:a.state.accessToken,data:e})}},a.closeSnackbar=function(){a.setState({temp:Object(c.a)({},a.state.temp,{showDisconnectedError:!1})})},a.setLastModified=function(e,t,n,r){if(!e){r={id:new Date};var o=["lastModified",n,t,"id"].join("_");return localStorage[o]=r.id.toISOString(),a.deleteObjectsLocalStorage(["lastModified",n,t,""].join("_"),o),r}r||(r={});var s=a.state[n].findIndex(function(e){return e.id===t});return Object.keys(e).forEach(function(o){if(!a.state[n][s]||("object"===typeof e[o]?!function e(t,a){if(!a)return!1;var n;n=Array.isArray(t)?t.keys():Object.keys(t);var r=!0,o=!1,s=void 0;try{for(var i,l=n[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value;if("object"===typeof t[c]){if(!e(t[c],a[c]))return!1}else if(t[c]!==a[c])return!1}}catch(tr){o=!0,s=tr}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}return!0}(e[o],a.state[n][s][o]):e[o]!==a.state[n][s][o])){r[o]=new Date;var i=["lastModified",n,t,o].join("_");localStorage[i]=r[o].toISOString()}}),r},a.setMultipleLastModified=function(e,t,n){var r=a.state.lastModified[n];return r||(r={}),t?("object"!==typeof t&&(t=[t]),t.forEach(function(t){var o=e.findIndex(function(e){return e.id===parseInt(t)}),s=e[o];r[t]=a.setLastModified(s,t,n,r[t])})):e.forEach(function(e,t){var o=e.id;r[o]=a.setLastModified(e,o,n,r[o])}),r},a.deleteObjectsLocalStorage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=Object.keys(localStorage),n=[];a.forEach(function(a){a.startsWith(e)&&a!==t&&n.push(a)}),n.forEach(function(e){localStorage.removeItem(e)})},a.handleUpdateFromServer=function(e){a.setState(Object(c.a)({},e,{lastModified:Object(c.a)({},a.state.lastModified,e.lastModified)})),Object.keys(e).forEach(function(t){"lastModified"===t?Object.keys(e.lastModified).forEach(function(t){if("projects"===t||"breaks"===t||"defaultProjects"===t)for(var a=Object.keys(e.lastModified[t]),n=function(){var n=a[r];if(!e.lastModified[t][n]||"object"!==typeof e.lastModified[t][n])return"continue";Object.keys(e.lastModified[t][n]).forEach(function(a){var r=["lastModified",t,n,a].join("_"),o=e.lastModified[t][n][a];"string"!==typeof o&&(o=o.toISOString()),localStorage[r]=o})},r=0;r<a.length;r++)n();else if("settings"===t)for(var o=Object.keys(e.lastModified.settings),s=0;s<o.length;s++){var i=o[s],l=e.lastModified.settings[i];if(l){var c="lastModified_settings_"+i;"string"!==typeof l&&(l=l.toISOString()),localStorage[c]=l}}else{var u=e.lastModified[t];u&&("string"!==typeof u&&(u=u.toISOString()),localStorage["lastModified_"+t]=u)}}):"object"===typeof e[t]?localStorage[t]=JSON.stringify(e[t]):localStorage[t]=e[t]})},a.checkForUpdates=function(){a.state.accessToken&&!a.io.disconnected&&a.io.emit("checkForUpdates",{accessToken:a.state.accessToken})},a.state={projects:[],settings:{},lastModified:{},temp:{}},a.io=an.connect("https://mind-your-time-server.herokuapp.com"),setTimeout(function(){if(a.io.disconnected){console.warn("Can't connect to server");var e=a.state.temp;e.disconnected=!0,a.state.accessToken&&(e.showDisconnectedError=!0),a.setState({temp:e})}},500),a.io.on("connect",function(e){if(!a.state.temp.successfulConnectInit&&a.state.temp.disconnected&&a.state.accessToken){var t;if(!a.state.temp.successfulConnectInit||a.state.temp.updatedWhileDisconnected){var n=a.state;n.accessToken,n.temp;t=Object(l.a)(n,["accessToken","temp"])}else t={};a.io.emit("connectInit",{type:"accessToken",accessToken:a.state.accessToken,localData:t})}var r=a.state.temp;r.disconnected=!1,r.showDisconnectedError=!1,clearTimeout(r.showDisconnectedErrorTimeout),a.setState({temp:r})}),a.io.on("disconnect",function(e){var t=a.state.temp;t.disconnected=!0,a.state.accessToken&&(t.showDisconnectedErrorTimeout=setTimeout(function(){a.setState({temp:Object(c.a)({},a.state.temp,{showDisconnectedError:!0})})},1500)),a.setState({temp:t})}),a.io.on("success",function(e){"connectInsert"!==e.type&&"connectUpdate"!==e.type||(localStorage.accessToken=e.accessToken,a.setState({accessToken:e.accessToken,temp:Object(c.a)({},a.state.temp,{successfulConnectInit:!0})})),"disconnect"===e.type&&(delete localStorage.accessToken,a.setState({accessToken:void 0}))}),a.io.on("errorU",function(e){console.warn("error",e),"invalidAccessToken"===e.type&&(delete localStorage.accessToken,a.setState({accessToken:void 0}))}),a.io.on("connectUpdate",a.handleUpdateFromServer),a.io.on("update",a.handleUpdateFromServer),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={};["projects","breaks","defaultProjects","settings","startTime","endTime","productivityPercentages"].forEach(function(e){try{t[e]=JSON.parse(localStorage[e])}catch(a){t[e]=Ht[e]}}),["mode","defaultColorIndex","defaultColorIndexDefaultProjects","useDefaultProjects","lastReset","realEndTime"].forEach(function(e){t[e]=localStorage[e]?localStorage[e]:Ht[e]});for(var a=Object.keys(localStorage),n=0;n<a.length;n++){var r=a[n];if(r.startsWith("lastModified_")){for(var o=r.split("_"),s=o.length,i=t,l=0;l<s-1;l++)o[l]in i||(i[o[l]]={}),i=i[o[l]];i[o[s-1]]=new Date(localStorage[r])}}this.setState(t),function(t){setTimeout(function(){var a=localStorage.accessToken;a&&(e.io.disconnected?e.setState({accessToken:a}):e.io.emit("connectInit",{type:"accessToken",accessToken:a,localData:t}))},5)}.call(this,t)}},{key:"render",value:function(){var e=this.state,t=(e.accessToken,e.temp,e.lastModified,Object(l.a)(e,["accessToken","temp","lastModified"]));return r.a.createElement(nn.MuiThemeProvider,{theme:t.settings.darkTheme?$n:Zn},r.a.createElement("div",{style:{position:"relative"},onFocus:this.checkForUpdates,className:t.settings.darkTheme?"darkRoot":"lightRoot"},r.a.createElement(tn.a,null),r.a.createElement($a,{data:t,connect:this.connect,update:this.update,disconnect:this.disconnect,loggedIn:Boolean(this.state.accessToken),disconnected:this.state.temp.disconnected,checkForUpdates:this.checkForUpdates}),r.a.createElement(ha.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.temp.showDisconnectedError,autoHideDuration:6e3,onClose:this.closeSnackbar},r.a.createElement(Xa.a,{style:{backgroundColor:"#d32f2f"},"aria-describedby":"disconnectedErrorSnackbar",message:r.a.createElement("span",{id:"disconnectedErrorSnackbar"},"We're having trouble reaching our server"),action:[r.a.createElement(v.a,{key:"close","aria-label":"Close",color:"inherit",styles:{padding:".5rem"},onClick:this.closeSnackbar},r.a.createElement(Vt.a,null))]}))))}}]),t}(n.Component),Xn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function er(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(r.a.createElement(Qn,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Xn?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):er(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):er(t,e)})}}()},267:function(e,t,a){},442:function(e,t,a){e.exports=a(1169)},769:function(e,t,a){},771:function(e,t,a){},903:function(e,t,a){},905:function(e,t,a){},907:function(e,t,a){},933:function(e,t,a){},936:function(e,t,a){},945:function(e,t,a){},947:function(e,t,a){},949:function(e,t,a){},956:function(e,t,a){},958:function(e,t,a){},993:function(e,t,a){},995:function(e,t,a){}},[[442,2,1]]]);
//# sourceMappingURL=main.88bf55ed.chunk.js.map
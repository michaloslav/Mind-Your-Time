(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{172:function(e,t,a){e.exports=a(366)},177:function(e,t,a){},355:function(e,t,a){},359:function(e,t,a){},366:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(29),i=a.n(s),o=(a(177),a(16)),l=a(17),c=a(21),h=a(19),u=a(20),d=a(38),m=a(148),p=a(149),g=a(95),f=a(23),v=a(30),E=a.n(v),T=a(24),b=a.n(T);function y(e){var t=this,a=[{label:"Plan",val:"planning"},{label:"Work",val:"working"}].map(function(a){return r.a.createElement(b.a,{key:a.val},r.a.createElement(E.a,{onClick:e.onModeChange.bind(t,a.val),variant:"fab",color:a.val===e.mode?"primary":null},a.label))});return r.a.createElement(b.a,{className:"ModeSwitch",container:!0,alignItems:"baseline",justify:"space-between"},a[0],e.children,a[1])}var w=a(57),k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={},a.colorInput=r.a.createRef(),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleClick",value:function(){this.colorInput.click()}},{key:"handleChange",value:function(e){this.props.onChange(e.target.value)}},{key:"render",value:function(){var e=this;return r.a.createElement("span",{className:"ColorPicker"},r.a.createElement("input",{className:"colorInput",ref:function(t){return e.colorInput=t},type:"color","aria-label":"Color",value:this.props.value,onChange:this.handleChange.bind(this)}),r.a.createElement("svg",{onClick:this.handleClick.bind(this),width:"20",height:"20"},r.a.createElement("circle",{cx:"10",cy:"10",r:".5rem",fill:this.props.value})))}}]),t}(n.Component),C=a(25),j=a.n(C),S=a(155),I=a.n(S),O=a(151),D=a.n(O),P=r.a.createContext({}),N=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"toMinutesSinceMidnight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("number"===typeof e)return e;if("string"===typeof e){var a=parseInt(e);return isNaN(a)?void console.warn("Unexpected input: ",e):a}if("object"===typeof e){var n=parseInt(e.h);12===n&&(n-=12);var r=60*n+parseInt(e.m);return e.pm&&(r+=720),t&&this.isBiggerThan(e,0,!0)&&this.isBiggerThan(300,e,!0)&&(r+=1440),r}console.warn("Unexpected input: ",e)}},{key:"toTimeObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!1;if(t){for(;e>=1440;)e-=1440;e>=720&&(a=!0,e-=720)}var n=e%60,r=(e-n)/60;return(isNaN(r)||isNaN(n))&&console.warn("NaN result: ",{h:r,m:n,pm:a}),t?{h:r,m:n,pm:a}:{h:r,m:n}}},{key:"addToMinutes",value:function(){for(var e=Array.isArray(arguments[0])?arguments[0]:arguments,t=0,a=0;a<e.length;a++)t+=this.toMinutesSinceMidnight(e[a]);return t}},{key:"add",value:function(){return this.toTimeObject(this.addToMinutes.apply(this,arguments))}},{key:"subtractToMinutes",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.toMinutesSinceMidnight(e,a)-this.toMinutesSinceMidnight(t,a)}},{key:"subtract",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.subtractToMinutes(e,t,a);return this.toTimeObject(n,!1)}},{key:"makeString",value:function(e){var t,a,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("number"===typeof e&&(e=this.toTimeObject(e,n)),s&&(n=!1),"string"===typeof e.m&&(e.m=parseInt(e.m)),a=e.m>=10?e.m:"0"+e.m,t=(n||r)&&0===e.h?12:e.h,s&&e.pm&&(t=parseInt(t)+12),!isNaN(a)){var i=t+":"+a;if("undefined"!==typeof e.pm&&n)i+=" "+(e.pm?"PM":"AM");return i}console.warn("Wrong input to makeString: ",e)}},{key:"round",value:function(e,t){var a=this.toMinutesSinceMidnight(e);return a=Math.round(a/t)*t,this.toTimeObject(a)}},{key:"isBiggerThan",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.subtractToMinutes(e,t,n);return a?r>=0:r>0}},{key:"areIdentical",value:function(){for(var e,t=0;t<arguments.length;t++){var a=arguments[t];if(isNaN(a.h)&&(a.h=a.h.toString()),isNaN(a.m)&&(a.m=a.m.toString()),"string"===typeof a.h&&(a.h=parseInt(a.h)),"string"===typeof a.m&&(a.m=parseInt(a.m)),e){if(a.h!==e.h||a.m!==e.m||a.pm!==e.pm)return!1;e=a}else e=a}return!0}},{key:"suggestStartTime",value:function(e,t,a){var n=this.add(e,t*a.bufferTimePercentage);return this.round(n,a.roundTo)}},{key:"average",value:function(){var e=this.addToMinutes.apply(this,arguments),t=Math.round(e/arguments.length);return this.toTimeObject(t)}}]),e}();function B(e,t,a,n){a=JSON.parse(JSON.stringify(a));for(var r={projects:[],breaks:[]},s=0;s<e.length;s++)r.projects[s]=N.average(e[s].plannedTime.start,e[s].plannedTime.end);for(var i=0;i<a.length;i++)r.breaks[i]=N.average(a[i].startTime,a[i].endTime);for(var o=0;o<e.length;o++){e[o].plannedTime.start=0!==o?N.suggestStartTime(e[o-1].plannedTime.end,e[o-1].estimatedDuration,t):n,e[o].plannedTime.end=N.add(e[o].plannedTime.start,e[o].estimatedDuration);for(var l=0;l<a.length;l++){var c=0===o?e[o].plannedTime.start:e[o-1].plannedTime.end;if(N.isBiggerThan(e[o].plannedTime.end,a[l].startTime,!0,!0)&&N.isBiggerThan(a[l].startTime,c,!0,!0)){var h=N.isBiggerThan(r.projects[o],r.breaks[l],!0,!0),u=N.subtractToMinutes(a[l].endTime,a[l].startTime,!0);h?(a[l].startTime=0===o?e[o].plannedTime.start:e[o-1].plannedTime.end,a[l].endTime=N.add(a[l].startTime,u),e[o].plannedTime.start=0===o?a[l].endTime:N.suggestStartTime(a[l].endTime,e[o-1].estimatedDuration,t),e[o].plannedTime.end=N.add(e[o].plannedTime.start,e[o].estimatedDuration)):(a[l].startTime=e[o].plannedTime.end,a[l].endTime=N.add(a[l].startTime,u))}}}return e}function M(e,t,a){return""===e||!isNaN(e)&&e>=t&&e<=a}var A=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleKeyPress=function(e){"Enter"===e.key&&a.props.onEnterPress&&a.props.onEnterPress()},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleInputChange",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;t="number"===typeof n?n:"pm"===e?"PM"===n.target.value:n.target.value,"h"===e&&!M(t,1,a?24:12)||"m"===e&&!M(t,0,59)||(a&&"h"===e&&(t>=12?(t-=12,this.props.onChange("pm",!0)):this.props.onChange("pm",!1)),this.props.onChange(e,t))}},{key:"handleKeyDown",value:function(e,t,a){var n,r=this;if("ArrowUp"===a.key&&(n="up"),"ArrowDown"===a.key&&(n="down"),n){var s,i;(s=i=this.props.value)&&!isNaN(s.m)||(s=0);var o="m"===e?t.roundTo:60;s="up"===n?N.add(s,o):N.toTimeObject(N.subtractToMinutes(s,o),!0),N.isBiggerThan(0,s,!1)&&(s=N.add(s,1440)),Object.keys(s).forEach(function(e){i[e]!==s[e]&&r.props.onChange(e,s[e])})}}},{key:"render",value:function(){var e=this,t=this.props.value.h;t=0===t?12:t;var a=this.props.value.m;return a=0===a?"0"+a:a,r.a.createElement(P.Consumer,null,function(n){return r.a.createElement("div",{className:"TimeSetter"+(e.props.showError?" timeSetterError":""),style:{display:"inline"}},r.a.createElement(j.a,{onChange:e.handleInputChange.bind(e,"h",n.timeFormat24H),value:n.timeFormat24H&&e.props.value.pm?t+12:t,id:e.props.firstInputId,placeholder:"Hours","aria-label":"Hours",autoComplete:"off",error:e.props.hError,onKeyPress:e.handleKeyPress,onKeyDown:e.handleKeyDown.bind(e,"h",n)}),":",r.a.createElement(j.a,{onChange:e.handleInputChange.bind(e,"m",n.timeFormat24H),value:a,placeholder:"Minutes","aria-label":"Minutes",autoComplete:"off",error:e.props.mError,onKeyPress:e.handleKeyPress,onKeyDown:e.handleKeyDown.bind(e,"m",n)}),!n.timeFormat24H&&r.a.createElement(I.a,{onChange:e.handleInputChange.bind(e,"pm",n.timeFormat24H),value:e.props.value.pm?"PM":"AM"},r.a.createElement(D.a,{value:"AM"},"AM"),r.a.createElement(D.a,{value:"PM"},"PM")))})}}]),t}(n.Component),x=a(4),R=a.n(x);function F(e){return r.a.createElement(R.a,{className:"setStartTimeCell"},r.a.createElement("div",{className:"setStartTimeLabelDiv"},r.a.createElement("label",{htmlFor:e.firstInputId},"Start:")),r.a.createElement(A,{onChange:e.onChange,value:e.value,firstInputId:e.firstInputId,hError:e.hError,mError:e.mError,onEnterPress:e.onEnterPress}))}var H=a(97),V=a.n(H),W=a(22),K=a.n(W),J=a(156),L=a.n(J),U=a(44),Y=a.n(U),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).handleClick=function(e){var t=N.subtractToMinutes(a.props.currentTime,a.props.row.startedWorkingOnIt,!0);a.props.row.progress&&(t+=parseInt(a.props.row.progress)),a.setState({anchorEl:e.currentTarget,progress:t})},a.handleClose=function(){a.setState({anchorEl:null})},a.handleInputChange=function(e){var t=e.target.value;isNaN(t)||a.setState({progress:t})},a.handleSaveClick=function(){a.props.onPause(a.props.row.id,"paused",a.state.progress)},a.state={anchorEl:null,progress:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl,a=Boolean(t);return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{"aria-label":"Pause the project",onClick:this.handleClick},r.a.createElement(L.a,null)),r.a.createElement(V.a,{open:a,anchorEl:t,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement("div",{className:"setProgressPopover"},r.a.createElement("span",null,"I've worked on this for "),r.a.createElement(j.a,{autoFocus:!0,"aria-label":"Progress in minutes",value:this.state.progress,onChange:this.handleInputChange,onKeyPress:function(t){"Enter"===t.key&&e.handleSaveClick()}}),r.a.createElement("span",null," minutes"),r.a.createElement(K.a,{"aria-label":"Save the progress and pause the project",onClick:this.handleSaveClick,color:"primary"},r.a.createElement(Y.a,null)))))}}]),t}(n.Component),G=a(158),z=a.n(G),q=a(157),$=a.n(q);function Q(e){var t=[];return"done"===e.row.state?t.push(r.a.createElement("div",{key:"doneDiv",className:"changeProjectStateCellDoneDiv"},"DONE",r.a.createElement(K.a,{"aria-label":"Mark project as undone",onClick:e.onProjectStateChange.bind(this,e.row.id,"paused")},r.a.createElement($.a,null)))):("workingOnIt"===e.row.state?t.push(r.a.createElement(_,{key:"pause",row:e.row,currentTime:e.currentTime,onPause:e.onProjectStateChange})):t.push(r.a.createElement(K.a,{key:"start","aria-label":"Start working on the project",onClick:e.onProjectStateChange.bind(this,e.row.id,"workingOnIt"),color:"primary"},r.a.createElement(z.a,null))),t.push(r.a.createElement(K.a,{key:"done","aria-label":"Mark the project as done",onClick:e.onProjectStateChange.bind(this,e.row.id,"done"),color:"workingOnIt"===e.row.state?"primary":void 0},r.a.createElement(Y.a,null)))),r.a.createElement(R.a,null,t.map(function(e){return e}))}var X=a(28),Z=a.n(X),ee=a(42),te=a.n(ee),ae=a(34),ne=a.n(ae),re=a(45),se=a.n(re),ie=a(159),oe=a.n(ie),le=a(76),ce=a.n(le);function he(e){var t=[];return""===e.name&&t.push("name"),(""===e.duration||isNaN(e.duration)||e.duration>1440)&&t.push("duration"),(""===e.startTime.h||isNaN(e.startTime.h))&&t.push("startTimeH"),(""===e.startTime.m||isNaN(e.startTime.m))&&t.push("startTimeM"),t.length?{valid:!1,errors:t}:{valid:!0}}function ue(e,t){return"duration"!==e||!isNaN(t)||""===t}var de=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).handleDoneEditing=function(){var e=he(a.state.values);if(!e.valid){var t=a.state.showErrors;return e.errors.forEach(function(e){t[e]=!0}),void a.setState(t)}a.props.onDoneEditing(a.props.row.id,a.state.values),a.setState({editing:!1})},a.handleEnterPress=function(e){"Enter"===e.key&&a.handleDoneEditing()},a.state={editing:!1,values:{name:a.props.row.name,duration:a.props.row.estimatedDuration,startTime:a.props.row.plannedTime.start},showErrors:{}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleStartEditing",value:function(){this.setState({editing:!0,values:Object(f.a)({},this.state.values,{startTime:Object.assign({},this.props.row.plannedTime.start)})})}},{key:"handleInputChange",value:function(e,t){var a=t.target.value;if(ue(e,a)){var n={values:this.state.values,showErrors:this.state.showErrors};n.values[e]=a,n.showErrors[e]=!1,this.setState(n)}}},{key:"handleStartTimeChange",value:function(e,t){var a={values:this.state.values,showErrors:this.state.showErrors};a.values.startTime[e]=t,a.showErrors["startTime"+e.toUpperCase()]=!1,this.setState(a)}},{key:"render",value:function(){var e,t=this,a=this.state.editing&&"planning"===this.props.mode;e=this.props.row.progress?parseInt(this.props.row.progress):0,"workingOnIt"===this.props.row.state&&(e+=N.subtractToMinutes(this.props.currentTime,this.props.row.startedWorkingOnIt,!0)),e>this.props.row.estimatedDuration&&(e=this.props.row.estimatedDuration);var n=parseInt(this.props.row.estimatedDuration)-e,s=!N.isBiggerThan(N.add(this.props.row.plannedTime.start,e),this.props.currentTime,!0,!0),i=!N.isBiggerThan(this.props.row.plannedTime.end,this.props.currentTime,!0,!0),o=null;return"done"===this.props.row.state?o="stateClassDone":s&&"workingOnIt"!==this.props.row.state&&(o="stateClassTooLate"),r.a.createElement(te.a,{rootRef:this.props.provided.innerRef},r.a.createElement(Z.a,this.props.provided.draggableProps,r.a.createElement(R.a,null,r.a.createElement(ne.a,Object.assign({className:"dragIcon"},this.props.provided.dragHandleProps),"drag_indicator"),r.a.createElement(k,{value:this.props.row.color,onChange:this.props.onColorChange.bind(this,this.props.row.id)})),r.a.createElement(R.a,{className:a?"setNameCell":o},a?r.a.createElement(j.a,{value:this.state.values.name,onChange:this.handleInputChange.bind(this,"name"),placeholder:"Name","aria-label":"Name",error:this.state.showErrors.name,onKeyPress:this.handleEnterPress}):this.props.row.name),r.a.createElement(R.a,{className:a?"setDurationCell":null},a?r.a.createElement(j.a,{value:this.state.values.duration,onChange:this.handleInputChange.bind(this,"duration"),placeholder:"Duration","aria-label":"Duration",error:this.state.showErrors.duration,onKeyPress:this.handleEnterPress}):e&&"done"!==this.props.row.state?r.a.createElement(se.a,{title:e+"/"+this.props.row.estimatedDuration+" done"},r.a.createElement("span",null,n," minutes left")):this.props.row.estimatedDuration+" minutes"),a?r.a.createElement(F,{value:this.state.values.startTime,onChange:this.handleStartTimeChange.bind(this),firstInputId:"changeStartTimeInput"+this.props.row.id,hError:this.state.showErrors.startTimeH,mError:this.state.showErrors.startTimeM,onEnterPress:this.handleDoneEditing}):r.a.createElement(P.Consumer,null,function(e){return r.a.createElement(R.a,{className:a?"setStartTimeCell":null},r.a.createElement("span",{className:s&&"stateClassTooLate"===o?o:null},N.makeString(t.props.row.plannedTime.start,t.props.row.plannedTime.start.pm!==t.props.row.plannedTime.end.pm,!0,e.timeFormat24H)),r.a.createElement("span",{className:s&&i&&"stateClassTooLate"===o?o:null},"-"),r.a.createElement("span",{className:i&&"stateClassDone"!==o?"stateClassTooLate":null},N.makeString(t.props.row.plannedTime.end,!0,!1,e.timeFormat24H)))}),"planning"===this.props.mode?r.a.createElement(R.a,null,a?r.a.createElement(K.a,{"aria-label":"Save changes",onClick:this.handleDoneEditing,color:"primary"},r.a.createElement(Y.a,null)):r.a.createElement(K.a,{"aria-label":"Edit the project",onClick:this.handleStartEditing.bind(this)},r.a.createElement(oe.a,null)),r.a.createElement(K.a,{"aria-label":"Delete the project",onClick:this.props.onDeleteProject.bind(this,this.props.row.id),className:"deleteIconButton"},r.a.createElement(ce.a,null))):r.a.createElement(Q,{row:this.props.row,onProjectStateChange:this.props.onProjectStateChange,currentTime:this.props.currentTime})))}}]),t}(n.Component),me=a(77),pe=a.n(me),ge=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).handleAddProject=function(){var e=he(a.state.inputValues);if(!e.valid){var t=a.state.showErrors;return e.errors.forEach(function(e){t[e]=!0}),void a.setState(t)}var n={name:"",duration:"",startTime:{h:"",m:"",pm:!0},color:a.state.inputValues.color},r=a.props.settings.defaultColors,s=a.state.defaultColorIndex,i=s>=r.length-1?0:++s;n.color=r[i],a.props.onAddProject(a.state.inputValues,i),a.setState({inputValues:n,userHasntChangedStartTime:!0,defaultColorIndex:i})},a.handleEnterPress=function(e){"Enter"===e.key&&a.handleAddProject()},a.state={inputValues:{name:"",duration:"",startTime:{h:"",m:"",pm:!0},color:a.props.defaultColorIndex?a.props.settings.defaultColors[a.props.defaultColorIndex]:"#000000"},userHasntChangedStartTime:!0,defaultColorIndex:a.props.defaultColorIndex,showErrors:{}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){if(this.state.userHasntChangedStartTime&&this.props.settings.bufferTimePercentage&&this.props.lastProject){var e=N.suggestStartTime(this.props.lastProject.plannedTime.end,this.props.lastProject.estimatedDuration,this.props.settings);""!==this.state.inputValues.startTime.h&&N.areIdentical(e,this.state.inputValues.startTime)||this.setState({inputValues:Object(f.a)({},this.state.inputValues,{startTime:e})})}if("undefined"===typeof this.state.defaultColorIndex&&"undefined"!==typeof this.props.defaultColorIndex&&this.props.settings.defaultColors){var t=this.state.inputValues,a=this.props.settings.defaultColors,n=this.props.defaultColorIndex;a.length<=n&&(n=0),t.color=a[n],t.color=t.color?t.color:"#000000",this.setState({inputValues:t,defaultColorIndex:n})}}},{key:"handleInputChange",value:function(e,t){var a=t.target.value;if(ue(e,a)){var n={inputValues:this.state.inputValues,showErrors:this.state.showErrors};n.inputValues[e]=a,n.showErrors[e]=!1,this.setState(n)}}},{key:"handleColorChange",value:function(e){var t=this.state.inputValues;t.color=e,this.setState({inputValues:t})}},{key:"handleStartTimeChange",value:function(e,t){var a={inputValues:this.state.inputValues,showErrors:this.state.showErrors};a.inputValues.startTime[e]=t,a.showErrors["startTime"+e.toUpperCase()]=!1,a.userHasntChangedStartTime=!1,this.setState(a)}},{key:"render",value:function(){var e=this.props.showErrors.noProjects;return r.a.createElement(Z.a,{id:"addProjectRow"},r.a.createElement(R.a,null,r.a.createElement(k,{value:this.state.inputValues.color,onChange:this.handleColorChange.bind(this)})),r.a.createElement(R.a,{className:"setNameCell"},r.a.createElement(j.a,{onChange:this.handleInputChange.bind(this,"name"),value:this.state.inputValues.name,placeholder:"Name","aria-label":"Name",error:this.state.showErrors.name||e,onKeyPress:this.handleEnterPress,autoFocus:!0})),r.a.createElement(R.a,{className:"setDurationCell"},r.a.createElement(j.a,{onChange:this.handleInputChange.bind(this,"duration"),value:this.state.inputValues.duration,placeholder:"Duration","aria-label":"Duration",error:this.state.showErrors.duration||e,onKeyPress:this.handleEnterPress})," minutes"),r.a.createElement(F,{onChange:this.handleStartTimeChange.bind(this),value:this.state.inputValues.startTime,firstInputId:"setStartTimeInput",hError:this.state.showErrors.startTimeH||e,mError:this.state.showErrors.startTimeM||e,showErrors:this.state.showErrors,onEnterPress:this.handleAddProject}),r.a.createElement(R.a,null,r.a.createElement(K.a,{color:"primary",style:{color:this.props.showErrors.noProjects?"red":null},"aria-label":"Add the new project",onClick:this.handleAddProject},r.a.createElement(pe.a,null))))}}]),t}(n.Component),fe=a(46),ve=a.n(fe);function Ee(e){return r.a.createElement(te.a,{rootRef:e.provided.innerRef},r.a.createElement(ve.a,e.provided.droppableProps,e.projects.map(function(t,a){return r.a.createElement(w.b,{key:t.id,draggableId:t.id.toString(),index:a},function(a){return r.a.createElement(de,{mode:e.mode,row:t,currentTime:e.currentTime,provided:a,onColorChange:e.onColorChange,onDoneEditing:e.onDoneEditing,onProjectStateChange:e.onProjectStateChange,onDeleteProject:e.onDeleteProject})})}),e.provided.placeholder,"planning"===e.mode&&r.a.createElement(ge,{settings:e.settings,defaultColorIndex:e.defaultColorIndex,showErrors:e.showErrors,lastProject:e.projects[e.projects.length-1],onAddProject:e.onAddProject})))}var Te=a(47),be=a.n(Te),ye=a(79),we=a.n(ye);function ke(e){return r.a.createElement(be.a,{id:"ProjectsTable"},r.a.createElement(we.a,null,r.a.createElement(Z.a,null,r.a.createElement(R.a,null),r.a.createElement(R.a,null,"Name"),r.a.createElement(R.a,null,"Duration estimate"),r.a.createElement(R.a,null,"Planned time"),r.a.createElement(R.a,null))),r.a.createElement(w.a,{onDragEnd:e.onDragEnd},r.a.createElement(w.c,{droppableId:"0"},function(t){return r.a.createElement(Ee,{projects:e.projects,mode:e.mode,settings:e.settings,currentTime:e.currentTime,defaultColorIndex:e.defaultColorIndex,showErrors:e.showErrors,onColorChange:e.onColorChange,onDoneEditing:e.onDoneEditing,onAddProject:e.onAddProject,provided:t,onProjectStateChange:e.onProjectStateChange,onDeleteProject:e.onDeleteProject})})))}function Ce(e){return r.a.createElement("div",{id:"setEndTime"},r.a.createElement("label",{htmlFor:"endTimeHoursInput"},"Time when you want to stop working:"),r.a.createElement(A,{onChange:e.onChange,value:e.value,firstInputId:"endTimeHoursInput",showError:e.showError}))}var je=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={currentTimeAvailable:!1},a.updateCurrentTime=a.updateCurrentTime.bind(Object(d.a)(Object(d.a)(a))),setInterval(a.updateCurrentTime,1e3),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.updateCurrentTime()}},{key:"updateCurrentTime",value:function(){var e=new Date,t=e.getMinutes();if(t!==this.props.currentTime.m||0===this.props.currentTime.h){var a=e.getHours(),n=a>=12;a=0===(a%=12)?12:a,this.setState({currentTimeAvailable:!0}),this.props.onCurrentTimeChange({h:a,m:t,pm:n})}}},{key:"render",value:function(){var e,t,a,n,s,i,o,l=this;this.state.currentTimeAvailable&&this.props.settings.bufferTimePercentage?(e=0,this.props.projects.forEach(function(t,a){if("done"!==t.state){var n=parseInt(t.estimatedDuration);t.progress&&(t.progress>t.estimatedDuration?n=0:n-=parseInt(t.progress)),"workingOnIt"===t.state&&t.startedWorkingOnIt&&(n-=N.subtractToMinutes(l.props.currentTime,t.startedWorkingOnIt,!0)),a!==l.props.projects.length-1&&(n+=Math.round(n*l.props.settings.bufferTimePercentage)),e+=n}}),e=Math.round(e/this.props.settings.roundTo)*this.props.settings.roundTo,t=0,this.props.breaks.forEach(function(e){var a=N.toMinutesSinceMidnight(e.endTime,!0),n=N.toMinutesSinceMidnight(l.props.currentTime,!0);if(!N.isBiggerThan(n,a,!1)){var r=N.toMinutesSinceMidnight(e.startTime,!0);N.isBiggerThan(r,n,!0)?t+=N.subtractToMinutes(a,r,!0):t+=N.subtractToMinutes(a,n,!0)}}),t=Math.round(t/this.props.settings.roundTo)*this.props.settings.roundTo,a=N.toTimeObject(N.addToMinutes(e,t),!1),n=N.subtract(this.props.endTime,this.props.currentTime,!0),s=N.isBiggerThan(a,n),o=(i=!N.isBiggerThan(n,0))&&""!==this.props.endTime.h&&""!==this.props.endTime.m):(e=t=0,a=n={h:0,m:0,pm:!1},s=i=o=!1);var c=r.a.createElement("div",null,r.a.createElement("div",{className:"timeStatsLabelDiv"},r.a.createElement("label",{style:{right:"1.42rem"}},"Time needed:")),N.makeString(a,!1));return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{item:!0,className:"timeStatsSideGridItem"+(s?" timeStatsWarning":null)},e&&t?r.a.createElement(se.a,{title:"Projects: "+N.makeString(e,!1)+", breaks: "+N.makeString(t,!1)},c):c),r.a.createElement(b.a,{item:!0},r.a.createElement("h4",null,N.makeString(this.props.currentTime,!0,!1,this.props.settings.timeFormat24H))),r.a.createElement(b.a,{item:!0,className:"timeStatsSideGridItem"+(o?" timeStatsWarning":null)},r.a.createElement("div",{className:"timeStatsLabelDiv"},r.a.createElement("label",{style:{right:"1.825rem"}},"Time remaining:")),i?"0:00":N.makeString(n,!1)))}}]),t}(n.Component),Se=a(75),Ie=a(33),Oe=a.n(Ie),De=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).validateEndTime=function(e,t,n){var r,s=a.state.temp,i=a.state.showEndTimeErrors;return N.isBiggerThan(n,t,!1,!0)?(r=!0,i[e]=!1,clearTimeout(s.showEndTimeErrors[e])):(r=!1,s.showEndTimeErrors[e]=setTimeout(function(){a.setState({showEndTimeErrors:Object(f.a)({},a.state.showEndTimeErrors,Object(Se.a)({},e,!0))})},500)),a.setState({temp:s,showEndTimeErrors:i}),r},a.addBreak=function(){if(!a.state.showEndTimeErrors.new){for(var e=a.state.breaks,t=a.state.newBreak,n=-1,r=0;r<e.length;r++)e[r].id>n&&(n=e[r].id);var s=n+1;t.id=s,e.push(t),a.setState({breaks:e}),a.props.onSave(e);var i=a.state.breakDurations;i.new=30,i[s]=N.subtractToMinutes(t.endTime,t.startTime,!0),a.setState({newBreak:{startTime:N.add(t.endTime,90),endTime:N.add(t.endTime,120),name:""},breakDurations:i})}},a.handleSave=function(){a.props.onClose()},a.handleEnterPress=function(e){"Enter"===e.key&&a.addBreak()},a.handleEnterPressNew=function(e){"Enter"===e.key&&a.addBreak()};var n=JSON.parse(JSON.stringify(e.breaks)),r={};n.length?(r.startTime=N.add(n[n.length-1].endTime,90),r.endTime=N.add(r.startTime,30)):(r.startTime=N.round(N.add(e.currentTime,90),15),r.endTime=N.add(r.startTime,30)),r.name="";for(var s={new:30},i=0;i<n.length;i++){s[n[i].id]=N.subtractToMinutes(n[i].endTime,n[i].startTime,!0)}return a.state={breaks:n,newBreak:r,breakDurations:s,errors:{},showEndTimeErrors:{},temp:{showEndTimeErrors:{}}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleInputChange",value:function(e,t,a){var n=a.target.value;if("new"===e){var r=this.state.newBreak;r[t]=n,this.setState({newBreak:r})}else{var s=this.state.breaks,i=s.findIndex(function(t){return t.id===e});s[i][t]=n,this.setState({breaks:s}),this.props.onSave(s)}}},{key:"handleTimeInputChange",value:function(e,t,a,n){if("new"===e){var r=this.state.newBreak,s=this.state.breakDurations;r[t][a]=n,""!==n&&("startTime"===t&&(r.endTime=N.add(r.startTime,s.new)),"endTime"===t&&(this.validateEndTime(e,r.startTime,r.endTime),s.new=N.subtractToMinutes(r.endTime,r.startTime,!0))),this.setState({newBreak:r,breakDurations:s})}else{var i=this.state.breaks,o=this.state.breakDurations,l=i.findIndex(function(t){return t.id===e});i[l][t][a]=n;var c=!0;""===n?c=!1:("startTime"===t&&(i[l].endTime=N.add(i[l].startTime,o[e])),"endTime"===t&&(c=this.validateEndTime(e,i[l].startTime,i[l].endTime),o[l]=N.subtractToMinutes(i[l].endTime,i[l].startTime,!0),this.setState({breakDurations:o})));var h=this.state.errors;h[e]=!c;var u=Object.values(h).every(function(e){return!e});this.setState({breaks:i,errors:h}),this.props.onSave(i,u)}}},{key:"deleteBreak",value:function(e){var t=this.state.breaks,a=t.findIndex(function(t){return t.id===e});t.splice(a,1);var n=this.state.errors;delete n[e];var r=Object.values(n).every(function(e){return!e});this.setState({breaks:t,errors:n}),this.props.onSave(t,r)}},{key:"render",value:function(){var e=this,t=this.state.breaks.map(function(t,a){return r.a.createElement(Z.a,{key:t.id},r.a.createElement(R.a,null,r.a.createElement(j.a,{value:t.name,onChange:e.handleInputChange.bind(e,t.id,"name"),onKeyPress:e.handleEnterPress})),r.a.createElement(R.a,null,r.a.createElement(A,{value:t.startTime,onChange:e.handleTimeInputChange.bind(e,t.id,"startTime"),onEnterPress:e.handleSave})),r.a.createElement(R.a,null,r.a.createElement(A,{value:t.endTime,onChange:e.handleTimeInputChange.bind(e,t.id,"endTime"),onEnterPress:e.handleSave,showError:e.state.showEndTimeErrors[t.id]})),r.a.createElement(R.a,null,r.a.createElement(K.a,{onClick:e.deleteBreak.bind(e,t.id)},r.a.createElement(ce.a,null))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{variant:"h6"},"Breaks:"),r.a.createElement(be.a,{className:"BreaksDrawer"},r.a.createElement(we.a,null,r.a.createElement(Z.a,null,r.a.createElement(R.a,null,"Name (optional)"),r.a.createElement(R.a,null,"Start"),r.a.createElement(R.a,null,"End"),r.a.createElement(R.a,null))),r.a.createElement(ve.a,null,t.length?t:r.a.createElement(Z.a,null,r.a.createElement(R.a,{colSpan:4},"You haven't set any breaks")),r.a.createElement(Z.a,null,r.a.createElement(R.a,null,r.a.createElement(j.a,{value:this.state.newBreak.name,onChange:this.handleInputChange.bind(this,"new","name"),onKeyPress:this.handleEnterPressNew})),r.a.createElement(R.a,null,r.a.createElement(A,{value:this.state.newBreak.startTime,onChange:this.handleTimeInputChange.bind(this,"new","startTime"),onEnterPress:this.addBreak})),r.a.createElement(R.a,null,r.a.createElement(A,{value:this.state.newBreak.endTime,onChange:this.handleTimeInputChange.bind(this,"new","endTime"),onEnterPress:this.addBreak,showError:this.state.showEndTimeErrors.new})),r.a.createElement(R.a,null,r.a.createElement(K.a,{color:"primary",onClick:this.addBreak},r.a.createElement(pe.a,null)))))),r.a.createElement(b.a,{container:!0,justify:"center"},r.a.createElement(E.a,{onClick:this.handleSave.bind(this),variant:"contained",color:"primary",style:{margin:".5rem"}},"Save")))}}]),t}(n.Component),Pe=a(164),Ne=a.n(Pe),Be=a(94),Me=a(165),Ae=a.n(Me),xe=a(166),Re=a.n(xe),Fe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).setShowResetButton=function(){var e,t,n=new Date(localStorage.lastReset).getTime(),r=(n%=864e5)/1e3/60;if(!(e=N.isBiggerThan(r,a.state.currentTime,!1,!0))){var s=new Date(localStorage.lastReset),i=(a.state.settings.showResetButtonAfter?a.state.settings:a.props.settings).showResetButtonAfter;s.setTime(s.getTime()+60*i*60*1e3),t=s<new Date}var o=e||t;a.setState({showResetButton:o})},a.addBreak=function(e,t){for(var n=a.state.breaks,r=-1,s=0;s<n.length;s++)(N.isBiggerThan(t,n[s].startTime,!1,!0)&&N.isBiggerThan(n[s].startTime,e,!0,!0)||N.isBiggerThan(t,n[s].endTime,!1,!0)&&N.isBiggerThan(n[s].endTime,e,!0,!0))&&(n[s].autodetected?(N.isBiggerThan(e,n[s].startTime,!1,!0)&&(e=n[s].startTime),N.isBiggerThan(n[s].endTime,t,!0,!0)&&(t=n[s].endTime),n.splice(s,1)):e=n[s].endTime),n[s]&&n[s].id>r&&(r=n[s].id);var i=r+1;return n.push({id:i,name:"Auto "+(i+1),autodetected:!0,startTime:e,endTime:t}),a.setState({breaks:n}),n},a.closeBreaksDrawer=function(){("undefined"===typeof a.state.temp.canCloseBreaksDrawer||a.state.temp.canCloseBreaksDrawer||window.confirm("Some of the breaks weren't editted properly. If you close this now, those changes will be lost"))&&a.setState({temp:Object(f.a)({},a.state.temp,{openBreaksDrawer:!1,canCloseBreaksDrawer:void 0})})},a.state={projects:[],breaks:[],mode:"planning",startTime:{},endTime:{h:11,m:"00",pm:!0},currentTime:{h:0,m:0,pm:!0},settings:a.props.settings,showErrors:{endTime:!1,noProjects:!1},showResetButton:!1,defaultColorIndex:void 0,temp:{}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,r;try{e=JSON.parse(localStorage.projects)}catch(i){e=[]}try{t=JSON.parse(localStorage.breaks)}catch(i){t=[]}try{a=JSON.parse(localStorage.startTime)}catch(i){a={h:2,m:"00",pm:!0}}try{n=JSON.parse(localStorage.endTime)}catch(i){n={h:9,m:"00",pm:!0}}try{r=JSON.parse(localStorage.mode)}catch(i){r="planning"}var s=localStorage.defaultColorIndex?localStorage.defaultColorIndex:0;this.setState({projects:e,breaks:t,startTime:a,endTime:n,mode:r,defaultColorIndex:s})}},{key:"componentDidUpdate",value:function(){!Object.keys(this.state.settings).length&&this.props.settings&&(this.setState({settings:this.props.settings}),this.setShowResetButton()),localStorage.projects=JSON.stringify(this.state.projects),localStorage.breaks=JSON.stringify(this.state.breaks),localStorage.startTime=JSON.stringify(this.state.startTime),localStorage.endTime=JSON.stringify(this.state.endTime),localStorage.mode=JSON.stringify(this.state.mode),localStorage.defaultColorIndex=this.state.defaultColorIndex,this.state.projects.length||(localStorage.lastReset=new Date,localStorage.removeItem("productivityPercentage"))}},{key:"handleModeChange",value:function(e){if("working"===e){if(""===this.state.endTime.h||""===this.state.endTime.m)return void this.setState({showErrors:Object(f.a)({},this.state.showErrors,{endTime:!0})});if(!this.state.projects.length)return void this.setState({showErrors:Object(f.a)({},this.state.showErrors,{noProjects:!0})})}this.setState({mode:e})}},{key:"handleEndTimeChange",value:function(e,t){var a=this,n={endTime:this.state.endTime,showErrors:this.state.showErrors,temp:this.state.temp};n.endTime[e]=t,""===n.endTime.h||""===n.endTime.m||N.isBiggerThan(this.state.currentTime,n.endTime,!0,!0)?n.temp.endTimeErrorTimeout=setTimeout(function(){a.setState({showErrors:Object(f.a)({},a.state.showErrors,{endTime:!0})})},250):(clearTimeout(n.temp.endTimeErrorTimeout),n.showErrors.endTime=!1),this.setState(n)}},{key:"handleAddProject",value:function(e,t){this.setState({showErrors:Object(f.a)({},this.state.showErrors,{noProjects:!1})});for(var a=this.state.projects,n=this.state.settings,r=-1,s=0;s<a.length;s++)a[s].id>r&&(r=a[s].id);var i={id:r+1,name:e.name,color:e.color,estimatedDuration:e.duration,plannedTime:{start:e.startTime,end:N.add(e.startTime,e.duration)},state:"notStarted"};if(a.length){var o=a[a.length-1];n.detectBreaksAutomatically&&N.isBiggerThan(e.startTime,N.suggestStartTime(o.plannedTime.end,o.estimatedDuration,n),!1,!0)&&this.addBreak(o.plannedTime.end,e.startTime)}a.push(i);var l={projects:a};t&&(l.defaultColorIndex=t),1===a.length&&(l.startTime=a[0].plannedTime.start),this.setState(l)}},{key:"handleDeleteProject",value:function(e){var t=this.state.projects,a=this.state.settings,n=t.findIndex(function(t){return t.id===e});a.updateTimesAfterDelete&&0===n&&t[1]&&(t[1].plannedTime.start=t[0].plannedTime.start),t.splice(n,1),a.updateTimesAfterDelete&&(t=B(t,a,this.state.breaks,this.state.startTime));var r={projects:t};t.length||(r.breaks=[]),this.setState(r)}},{key:"handleRootKeyDown",value:function(e){this.state.settings.changeModeOnTab&&"Tab"===e.key&&!this.state.temp.openBreaksDrawer&&(e.preventDefault(),this.handleModeChange("planning"===this.state.mode?"working":"planning"))}},{key:"handleColorChange",value:function(e,t){var a=this.state.projects,n=a.findIndex(function(t){return t.id===e});a[n].color=t,this.setState({projects:a})}},{key:"handleDragEnd",value:function(e){if(this.setState({temp:Object(f.a)({},this.state.temp,{dragging:!1})}),e.destination||console.log(e),e.destination){var t=e.draggableId,a=e.destination.index,n=this.state.projects,r=n.findIndex(function(e){return e.id===parseInt(t)}),s=n[r];if(a!==r){var i=n[0].plannedTime.start;n.splice(r,1),n.splice(a,0,s),this.state.settings.updateTimesAfterDrag&&(n[0].plannedTime.start=i,n=B(n,this.state.settings,this.state.breaks,this.state.startTime)),this.setState({projects:n})}}}},{key:"handleDoneEditingProject",value:function(e,t){var a=this.state.projects,n=this.state.breaks,r=this.state.settings,s=a.findIndex(function(t){return t.id===e});if(r.detectBreaksAutomatically&&0!==s&&N.isBiggerThan(t.startTime,a[s].plannedTime.start,!1,!0)&&(n=this.addBreak(N.suggestStartTime(a[s-1].plannedTime.end,a[s-1].estimatedDuration,r),t.startTime)),r.detectBreaksAutomatically&&0!==s&&N.isBiggerThan(a[s].plannedTime.start,t.startTime,!1,!0))for(var i=0;i<n.length;i++)n[i].autodetected&&N.areIdentical(a[s].plannedTime.start,n[i].endTime)&&(n[i].endTime=t.startTime);var o=parseInt(a[s].estimatedDuration)!==parseInt(t.duration),l=!N.areIdentical(a[s].plannedTime.start,t.startTime);(a[s].name=t.name,a[s].estimatedDuration=t.duration,a[s].plannedTime.start=t.startTime,this.state.settings.updateTimesAfterEdit&&(o||l))?a=B(a,r,n,0===s?t.startTime:this.state.startTime):a[s].plannedTime.end=N.add(a[s].plannedTime.start,a[s].estimatedDuration);var c={projects:a};0===s&&(c.startTime=a[s].plannedTime.start),this.setState(c)}},{key:"handleProjectStateChange",value:function(e,t,a){var n=this,r=this.state.projects;r.map(function(r){return r.id===e&&(r.state=t,"paused"!==t||isNaN(parseInt(a))||(r.progress=a),"workingOnIt"===t&&(r.startedWorkingOnIt=n.state.currentTime)),"workingOnIt"===t&&"workingOnIt"===r.state&&r.id!==e&&(r.state="paused"),r}),this.setState({projects:r})}},{key:"handleCurrentTimeChange",value:function(e){this.setState({currentTime:e})}},{key:"resetState",value:function(){window.confirm("Are you sure you want to delete all your projects?")&&this.setState({projects:[],breaks:[],mode:"planning",showResetButton:!1})}},{key:"handleEndTimeValidation",value:function(e){var t=this.state.showErrors;t.endTime=e,this.setState({showErrors:t}),console.log({showErrors:Object(f.a)({},this.state.showErrors,{endTime:e})})}},{key:"openBreaksDrawer",value:function(){this.setState({temp:Object(f.a)({},this.state.temp,{openBreaksDrawer:!0})})}},{key:"saveBreaks",value:function(e,t){if("undefined"===typeof t||t){var a=this.state.projects;this.state.projects.length&&(a=B(a,this.state.settings,e,this.state.startTime));var n=this.state.temp;"undefined"!==typeof t&&(n.canCloseBreaksDrawer=t),this.setState({projects:a,breaks:JSON.parse(JSON.stringify(e)),temp:n})}else this.setState({temp:Object(f.a)({},this.state.temp,{canCloseBreaksDrawer:!1})})}},{key:"render",value:function(){var e,t,a=!1;if(this.state.projects.length){a=!0;for(var n=0;n<this.state.projects.length;n++)if("done"!==this.state.projects[n].state){a=!1;break}if(a){for(var s=0,i=0;i<this.state.projects.length;i++)s+=parseInt(this.state.projects[i].estimatedDuration);if(s>=60?t=N.makeString(N.toTimeObject(s,!1),!1):t+=" minutes",localStorage.productivityPercentage)e=localStorage.productivityPercentage;else{var o=N.subtractToMinutes(this.state.currentTime,this.state.startTime,!0);e=Math.round(100*s/o),localStorage.productivityPercentage=e}}else localStorage.removeItem("productivityPercentage")}else a=!1;return r.a.createElement(b.a,{className:"App",onKeyDown:this.handleRootKeyDown.bind(this),tabIndex:"0"},r.a.createElement(y,{mode:this.state.mode,onModeChange:this.handleModeChange.bind(this)},r.a.createElement(je,{currentTime:this.state.currentTime,onCurrentTimeChange:this.handleCurrentTimeChange.bind(this),endTime:this.state.endTime,projects:this.state.projects,breaks:this.state.breaks,settings:this.state.settings})),r.a.createElement(b.a,{container:!0},r.a.createElement(P.Provider,{value:this.state.settings},r.a.createElement(ke,{mode:this.state.mode,projects:this.state.projects,settings:this.state.settings,currentTime:this.state.currentTime,defaultColorIndex:this.state.defaultColorIndex,showErrors:this.state.showErrors,onColorChange:this.handleColorChange.bind(this),onDoneEditing:this.handleDoneEditingProject.bind(this),onAddProject:this.handleAddProject.bind(this),onProjectStateChange:this.handleProjectStateChange.bind(this),onDeleteProject:this.handleDeleteProject.bind(this),onDragEnd:this.handleDragEnd.bind(this)}),"planning"===this.state.mode?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,{onChange:this.handleEndTimeChange.bind(this),value:this.state.endTime,showError:this.state.showErrors.endTime}),r.a.createElement(b.a,{container:!0,justify:"center"},r.a.createElement(E.a,{onClick:this.openBreaksDrawer.bind(this),variant:"contained",style:{marginBottom:"1rem"}},"Set/Edit breaks")),r.a.createElement(b.a,{container:!0,justify:"center"},r.a.createElement(E.a,{onClick:this.handleModeChange.bind(this,"working"),variant:"contained",color:"primary"},"Let's get to work!")),r.a.createElement(Ne.a,{id:"BreaksDrawer",anchor:"bottom",open:this.state.temp.openBreaksDrawer,onClose:this.closeBreaksDrawer},r.a.createElement(De,{breaks:this.state.breaks,currentTime:this.state.currentTime,onSave:this.saveBreaks.bind(this),onClose:this.closeBreaksDrawer}))):a&&r.a.createElement("div",{id:"congratsDiv"},r.a.createElement("span",{id:"congrats"},"CONGRATULATIONS!"),r.a.createElement("br",null),"You got ",t," worth of work done",r.a.createElement("br",null),"You were productive ",e,"% of the time"),this.state.showResetButton&&r.a.createElement(b.a,{container:!0,justify:"flex-end",alignItems:"flex-end",style:{marginTop:"2rem"}},r.a.createElement(E.a,{onClick:this.resetState.bind(this),variant:"contained"},"Reset")))),r.a.createElement(Be.a,{id:"linkToSettings",to:"/settings","aria-label":"Settings",title:"Settings"},r.a.createElement(Ae.a,null)),r.a.createElement(Be.a,{id:"linkToAbout",to:"/about","aria-label":"About",title:"About"},r.a.createElement(Re.a,null)))}}]),t}(n.Component),He=a(167),Ve=a.n(He),We=(a(355),{general:{order:0,label:"General settings",icon:"settings"},detection:{order:1,label:"Automatic detection",icon:"search"},misc:{order:2,label:"Miscellaneous",icon:"menu"}}),Ke={timeFormat24H:{label:"Use the 24-hour time format",type:"boolean",section:"general",order:0,icon:"timer"},bufferTimePercentage:{label:"Bufffer time percentage",type:"percentage",max:1,tooltip:"Buffer times are short breaks inserted after each project. Their length depends on the length of the project before them. This field determines what percentage of the previous project's duration the buffer will be.",section:"general",order:1,icon:"view_week"},showResetButtonAfter:{label:"Show reset button after (hours)",type:"int",section:"misc",order:3,icon:"restore"},defaultColors:{label:"Default colors:",type:"colors",section:"misc",order:0,icon:"invert_colors"},updateTimesAfterDrag:{label:"Adjust planned times after changing the order of projects",type:"boolean",section:"detection",order:0,icon:"swap_vert"},updateTimesAfterEdit:{label:"Adjust planned times after editing a project",type:"boolean",section:"detection",order:1,icon:"edit"},updateTimesAfterDelete:{label:"Adjust planned times after deleting a project",type:"boolean",section:"detection",order:2,icon:"delete"},roundTo:{label:"Round to (minutes)",type:"int",section:"misc",order:2,icon:"access_time"},changeModeOnTab:{label:"Change mode when the Tab key is pressed",type:"boolean",section:"misc",order:1,icon:"redo"},detectBreaksAutomatically:{label:"Detect breaks automatically",type:"boolean",section:"detection",order:3,icon:"pause"}},Je=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={inputs:a.props.settings,showErrors:{}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){!Object.keys(this.state.inputs).length&&this.props.settings&&this.setState({inputs:this.props.settings})}},{key:"handleInputChange",value:function(e,t){var a="boolean"===Ke[e].type?t.target.checked:t.target.value;switch(Ke[e].type){case"int":if(isNaN(a)&&""!==a)return;break;case"percentage":var n=a.split("%")[0];if(""!==n&&(a=n/100),isNaN(a)&&"%"!==a)return}if(!("undefined"!==typeof Ke[e].max&&a>Ke[e].max)){var r={inputs:this.state.inputs,showErrors:this.state.showErrors};r.inputs[e]=a,r.showErrors[e]=!1,this.setState({newState:r})}}},{key:"handleDefaultColorChange",value:function(e,t){var a=this.state.inputs.defaultColors;a[e]=t,this.setState({inputs:Object(f.a)({},this.state.inputs,{defaultColors:a})})}},{key:"handleAddDefaultColor",value:function(){var e=this.state.inputs.defaultColors;e.push("#000000"),this.setState({inputs:Object(f.a)({},this.state.inputs,{defaultColors:e})})}},{key:"handleRemoveDefaultColor",value:function(e){var t=this.state.inputs.defaultColors;t.splice(e,1),this.setState({inputs:Object(f.a)({},this.state.inputs,{defaultColors:t})})}},{key:"handleSave",value:function(){for(var e=this.state.inputs,t=Object.keys(e),a=0;a<t.length;a++)if(Ke[t[a]]&&"percentage"===Ke[t[a]].type&&"%"===e[t[a]]){var n=this.state.showErrors;return n[t[a]]=!0,void this.setState({showErrors:n})}this.props.onSettingsChange(e),this.props.history.push("/")}},{key:"handleResetToDefault",value:function(){window.confirm("Are you sure you want to reset your settings back to default?")&&(this.setState({inputs:this.props.defaultSettings}),this.props.onSettingsChange(this.props.defaultSettings))}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.inputs).sort(function(e,t){var a=Ke[e].section,n=Ke[t].section,r=We[a].order,s=We[n].order;return r!==s?r>s?1:-1:Ke[e].order>Ke[t].order?1:-1}),a=t.map(function(a,n){var s;if("defaultColors"===a)s=r.a.createElement(Z.a,{key:n},r.a.createElement(R.a,{className:"iconCell"},r.a.createElement(ne.a,null,Ke[a].icon)),r.a.createElement(R.a,null,"Default colors:"),r.a.createElement(R.a,{id:"defaultColorsCell"},e.state.inputs.defaultColors.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(k,{value:e.state.inputs.defaultColors[a],onChange:e.handleDefaultColorChange.bind(e,a)}),r.a.createElement("div",{className:"removeDefaultColorDiv"},r.a.createElement(K.a,{"aria-label":"Remove the color",className:"removeDefaultColor",disableRipple:!0,onClick:e.handleRemoveDefaultColor.bind(e,a)},r.a.createElement(ne.a,null,"remove"))))}),r.a.createElement(K.a,{id:"addDefaultColor","aria-label":"Add a new default color",onClick:e.handleAddDefaultColor.bind(e)},r.a.createElement(ne.a,null,"add"))),r.a.createElement(R.a,{className:"rightCell"}));else{if(!Ke[a])return console.warn(a+"is not a property of inputInfo"),r.a.createElement("div",null);s=r.a.createElement(Z.a,{key:n},r.a.createElement(R.a,{className:"iconCell"},r.a.createElement(ne.a,null,Ke[a].icon)),r.a.createElement(R.a,null,Ke[a].label,Ke[a].tooltip&&r.a.createElement(se.a,{title:Ke[a].tooltip},r.a.createElement(ne.a,{className:"tooltipIcon"},"help")),":"),r.a.createElement(R.a,null,"boolean"===Ke[a].type?r.a.createElement(Ve.a,{color:"primary",checked:e.state.inputs[a],onChange:e.handleInputChange.bind(e,a),"aria-label":Ke[a].label}):r.a.createElement(j.a,{value:"percentage"===Ke[a].type&&"%"!==e.state.inputs[a]?100*e.state.inputs[a]+"%":e.state.inputs[a],onChange:e.handleInputChange.bind(e,a),error:e.state.showErrors[a],"aria-label":Ke[a].label})),r.a.createElement(R.a,{className:"rightCell"}))}return n&&Ke[a].section===Ke[t[n-1]].section?s:r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(Z.a,null,r.a.createElement(R.a,{className:"sectionIconCell"},r.a.createElement(ne.a,null,We[Ke[a].section].icon)),r.a.createElement(R.a,{colSpan:2},r.a.createElement(Oe.a,{variant:"h5",style:{paddingTop:"2.5rem"}},We[Ke[a].section].label,":")),r.a.createElement(R.a,{className:"rightCell"})),s)});return r.a.createElement("div",{className:"Settings"},r.a.createElement(be.a,null,r.a.createElement(ve.a,null,a.map(function(e){return e}),r.a.createElement(Z.a,null,r.a.createElement(R.a,{colSpan:4},r.a.createElement(b.a,{container:!0,alignItems:"baseline",justify:"space-around"},r.a.createElement(b.a,null,r.a.createElement(E.a,{onClick:this.handleSave.bind(this),variant:"contained",color:"primary"},"Save")),r.a.createElement(b.a,null,r.a.createElement(E.a,{onClick:this.handleResetToDefault.bind(this),variant:"contained"},"Reset to default"))))))))}}]),t}(n.Component);a(359);function Le(e){return r.a.createElement("div",{className:"About"},r.a.createElement(Oe.a,{variant:"h4",className:"h-1"},"Welcome to Mind Your Time"),r.a.createElement("p",{className:"summary"},"Mind Your Time is a platform that aims to tackle a complex issue in a simplistic way"),r.a.createElement("p",null,"Do you ever have trouble realistically planning out your day and then actually executing the plan?",r.a.createElement("br",null),"Mind Your Time is here to help."),r.a.createElement("p",null,"The idea here is simple. Plan your day and then check if you're still on schedule. Write down when you're gonna do what and how long it's gonna take. Then periodically check if you're making the progress you should be making."),r.a.createElement("p",null,"Like I said, the idea is simple but if you truly follow it, I promise your productivity will skyrocket. Starting right now."),r.a.createElement("p",null,"It seems easy but if you've ever really tried doing it, you probably know it isn't. There are a ton of distractions. All the time. That is why we're introducing buffer times."),r.a.createElement("div",{id:"#bufferTimes"},r.a.createElement(Oe.a,{variant:"h5",className:"h-2"},"Buffer Times"),r.a.createElement("p",{className:"summary"},"Buffer times are essential to making a realistic plan"),r.a.createElement("p",null,"You may have noticed that whenever you set out to do something, something else always comes up and requires your full attention. Like your cat walking over your keyboard. Or your coffee mug spilling. Or a billion other things that you simply cannot foresee. By the time you come back, your entire day's plan is thrown into disarray."),r.a.createElement("p",null,"In order to be truly productive, you need to expect the unexpected. We take care of that for you."),r.a.createElement("p",null,"Buffer times are the solution. They are short breaks that we automatically insert after each planned project. Their length is proportional to the length of the previous project - about 20% of the project's length by default. (Note that this can be changed in the settings) These little breaks in your schedule aren't primarily meant as breaks though. Instead, their job is to compansate for the distractions that happen while you're working on the previous project. Ideally when you actually execute your plan, these little breaks should disappear. However, if they don't feel free to rest for a little while - whatever works for you."),r.a.createElement("p",null,"Of course if you feel like you need more breaks in your schedule, you can insert them in using our breaks editor. You could also increase the buffer time percentage in the settings but note that this comes at a price - a slight but measurable decrease in productivity. On the other hand, if you want to aim for even higher productivity, you can decrease the percentage but then you run the risk of your plan being too ideallistic and falling apart."),r.a.createElement("p",null,"At the end of the day, your buffer times need to be balanced and that balance can only be accomplished by trial and error. So feel free to experiment with the percentage if you feel it can make the app work better for you.")),r.a.createElement("div",{id:"#aboutMe"},r.a.createElement(Oe.a,{variant:"h5",className:"h-2"},"About me"),r.a.createElement("p",null,"I've experimented with a lot of different productivity/time-management systems over the years. At the end I developed a fairly simple system - writing down what I want to do today and when exactly I wanna do it. Sounds simple, I know, but it truly improved my productivity by a lot. The problem was that I couldn't find an app to use for this so I just had write it down on my whiteboard. (Yes, I actually have a whiteboard in my bedroom. Go ahead, judge me.)"),r.a.createElement("p",null,"This was pretty annoying so of course: I'm the kind of guy that needs everything on a screen so I didn't do it every day. And so a while later, I decided to create Mind Your Time. At first, it was just as a way off to show my skills to employers and organize my own time, only later did I realize that it could actually be really useful to other people as well."),r.a.createElement("p",null,"I really hope you find this app useful and that it helps you with whatever you set out to do. If you find any problems, get an idea for a new feature you'd like to see or just want to send me anything at all, here's my contact info:"),r.a.createElement("div",{id:"#contact"},r.a.createElement(Oe.a,{variant:"h6"},"Contact"),r.a.createElement("a",{href:"https://goo.gl/forms/jdesExEMegbkLPjp2",target:"_blank",rel:"noopener noreferrer"},"Feedback form")," (you can submit feedback here or via email, whichever you prefer)",r.a.createElement("br",null),"Email: ",r.a.createElement("a",{href:"mailto:michaelfarnik@gmail.com"},"michaelfarnik@gmail.com"),r.a.createElement("br",null),"GitHub: ",r.a.createElement("a",{href:"https://github.com/michaloslav"},"Michael Farn\xedk"))))}var Ue=a(168),Ye=a.n(Ue);function _e(e){return r.a.createElement(Be.a,{className:"LinkToRoot",to:"/","aria-label":"Back"},r.a.createElement(Ye.a,null))}var Ge=a(169),ze=a(153),qe=a(171),$e=a.n(qe),Qe={timeFormat24H:!1,bufferTimePercentage:.2,showResetButtonAfter:16,defaultColors:["#4BFFD1","#39FF00","#E8A60C","#FF4848","#290CE8"],updateTimesAfterDrag:!0,updateTimesAfterEdit:!0,updateTimesAfterDelete:!0,roundTo:5,changeModeOnTab:!1,detectBreaksAutomatically:!0},Xe=Object(ze.createMuiTheme)({palette:{primary:{main:"#039be5"},secondary:$e.a},typography:{useNextVariants:!0}}),Ze=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).AppWithProps=function(e){return r.a.createElement(Fe,Object.assign({settings:a.state.settings},e))},a.SettingsWithProps=function(e){return r.a.createElement(Je,Object.assign({settings:a.state.settings,defaultSettings:Qe,onSettingsChange:a.handleSettingsChange.bind(Object(d.a)(Object(d.a)(a)))},e))},a.state={settings:{}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e;try{e=JSON.parse(localStorage.settings)}catch(t){e=Qe}this.setState({settings:e})}},{key:"handleSettingsChange",value:function(e){this.setState({settings:e}),localStorage.settings=JSON.stringify(e)}},{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(ze.MuiThemeProvider,{theme:Xe},r.a.createElement("div",{style:{position:"relative",minWidth:"calc(660px - 2rem)"}},r.a.createElement(p.a,null,r.a.createElement(g.a,{path:"/",exact:!0}),r.a.createElement(g.a,{component:_e})),r.a.createElement(p.a,null,r.a.createElement(g.a,{path:"/settings/",render:this.SettingsWithProps}),r.a.createElement(g.a,{path:"/about/",component:Le}),r.a.createElement(g.a,{path:"/robots.txt",target:"_self"}),r.a.createElement(g.a,{render:this.AppWithProps})),r.a.createElement("footer",null,"Created by ",r.a.createElement("a",{href:"https://github.com/michaloslav"},"Michael Farn\xedk"),r.a.createElement("span",null," | "),r.a.createElement("a",{href:"https://goo.gl/forms/jdesExEMegbkLPjp2",target:"_blank",rel:"noopener noreferrer"},"Feedback"),r.a.createElement("span",null," | "),r.a.createElement(Ge.HashLink,{to:"/about#contact"},"Contact"),r.a.createElement("div",null,"Icon made by ",r.a.createElement("a",{href:"https://www.flaticon.com/authors/kiranshastry",title:"Kiranshastry",target:"_blank",rel:"noopener noreferrer"},"Kiranshastry")," from ",r.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon",target:"_blank",rel:"noopener noreferrer"},"www.flaticon.com")," is licensed by ",r.a.createElement("a",{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank",rel:"noopener noreferrer"},"CC 3.0 BY"))))))}}]),t}(n.Component),et=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function tt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(Ze,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");et?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):tt(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):tt(t,e)})}}()}},[[172,2,1]]]);
//# sourceMappingURL=main.92013e5d.chunk.js.map
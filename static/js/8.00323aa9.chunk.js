(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1028:function(e,t,a){},1032:function(e,t,a){},1035:function(e,t,a){},1044:function(e,t,a){},1228:function(e,t,a){"use strict";a.r(t);var n=a(41),r=a(109),s=a(25),o=a(62),i=a(63),l=a(80),c=a(78),d=a(79),u=a(1),p=a.n(u),m=a(897),h=a(899),g=a(948),f=a(789),b=a.n(f),E=a(798),j=a.n(E),T=a(790),v=a.n(T),k=a(778),y=a.n(k),w=a(772),D=a.n(w),P=a(795),C=a.n(P),S=a(179),O=(a(987),function(e){return p.a.createElement(S.a.Consumer,null,function(t){return p.a.createElement(b.a,{id:"ProjectsTable",className:"projectsTable"},p.a.createElement(j.a,null,p.a.createElement(y.a,null,p.a.createElement(D.a,null),p.a.createElement(D.a,null,"Name"),!t&&p.a.createElement(D.a,null,"Duration estimate"),p.a.createElement(D.a,null,t?"Time":"Planned time"),p.a.createElement(D.a,null))),p.a.createElement(g.a,{onDragEnd:e.onDragEnd},p.a.createElement(g.c,{droppableId:"0"},function(a){return p.a.createElement(C.a,{rootRef:a.innerRef},p.a.createElement(v.a,a.droppableProps,!e.projects.length&&p.a.createElement(y.a,null,p.a.createElement(D.a,null),p.a.createElement(D.a,{colSpan:t?2:3,style:e.showErrors.noProjects?{color:"red",fontWeight:500}:null},"You haven't set any projects yet"),p.a.createElement(D.a,null)),e.projects.map(function(t,a){return p.a.createElement(g.b,{key:t.id,draggableId:t.id.toString(),index:a},function(a){return p.a.createElement(m.a,{mode:e.mode,row:t,currentTime:e.currentTime,settings:e.settings,provided:a,onColorChange:e.onColorChange,onDoneEditing:e.onDoneEditing,onProjectStateChange:e.onProjectStateChange,onDeleteProject:e.onDeleteProject,startEditingMobile:e.startEditingMobile})})}),a.placeholder,"planning"===e.mode&&!t&&p.a.createElement(h.a,{settings:e.settings,defaultColorIndex:e.defaultColorIndex,showErrors:e.showErrors,lastProject:e.projects[e.projects.length-1],onAddProject:e.onAddProject,currentTime:e.currentTime})))})))})}),I=a(804),B=a(180),N=a(275),V=a.n(N),x=a(771),M=a.n(x),A=a(773),R=a.n(A),z=a(178),H=a.n(z),F=a(775),K=a.n(F),U=a(822),W=a.n(U),J=a(788),L=a.n(J),Y=a(108),G=a(191),q=a(902),_=(a(1028),function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).validateEndTime=function(e,t,n){var o,i=a.state.temp,l=a.state.showEndTimeErrors;return Y.a.isBiggerThan(n,t,!1,!0)?(o=!0,l[e]=!1,clearTimeout(i.showEndTimeErrors[e])):(o=!1,i.showEndTimeErrors[e]=setTimeout(function(){a.setState({showEndTimeErrors:Object(s.a)({},a.state.showEndTimeErrors,Object(r.a)({},e,!0))})},500)),a.setState({temp:i,showEndTimeErrors:l}),o},a.addBreak=function(){if(!a.state.showEndTimeErrors.new){var e=a.state.breaks,t=a.state.newBreak,n=Object(G.a)(e,"breaks");t.id=n,e.push(t),a.setState({breaks:e}),a.props.onSave(e,{breaks:n});var r=a.state.breakDurations;r.new=30,r[n]=Y.a.subtractToMinutes(t.endTime,t.startTime,!0),a.setState({newBreak:{startTime:Y.a.add(t.endTime,90),endTime:Y.a.add(t.endTime,120),name:""},breakDurations:r})}},a.handleSave=function(){a.props.onClose()},a.handleEnterPress=function(e){"Enter"===e.key&&a.addBreak()},a.handleEnterPressNew=function(e){"Enter"===e.key&&a.addBreak()},a.render=function(){return p.a.createElement(p.a.Fragment,null,p.a.createElement(V.a,{variant:"h6",className:"drawerTitle"},"Breaks:"),p.a.createElement(b.a,{className:"BreaksDrawer"},p.a.createElement(j.a,null,p.a.createElement(y.a,null,p.a.createElement(D.a,null,"Name (optional)"),p.a.createElement(D.a,null,"Start"),p.a.createElement(D.a,null,"End"),p.a.createElement(D.a,null))),p.a.createElement(v.a,null,a.state.breaks.length?a.state.breaks.map(function(e,t){return p.a.createElement(y.a,{key:e.id},p.a.createElement(D.a,null,p.a.createElement(K.a,{value:e.name,onChange:a.handleInputChange.bind(Object(B.a)(Object(B.a)(a)),e.id,"name"),onKeyPress:a.handleEnterPress})),p.a.createElement(D.a,null,p.a.createElement(I.a,{value:e.startTime,onChange:a.handleTimeInputChange.bind(Object(B.a)(Object(B.a)(a)),e.id,"startTime"),onEnterPress:a.handleSave})),p.a.createElement(D.a,null,p.a.createElement(I.a,{value:e.endTime,onChange:a.handleTimeInputChange.bind(Object(B.a)(Object(B.a)(a)),e.id,"endTime"),onEnterPress:a.handleSave,showError:a.state.showEndTimeErrors[e.id]})),p.a.createElement(D.a,null,p.a.createElement(H.a,{onClick:a.deleteBreak.bind(Object(B.a)(Object(B.a)(a)),e.id)},p.a.createElement(W.a,null))))}):p.a.createElement(y.a,null,p.a.createElement(D.a,{colSpan:4},"You haven't set any breaks")),p.a.createElement(y.a,null,p.a.createElement(D.a,null,p.a.createElement(K.a,{value:a.state.newBreak.name,onChange:a.handleInputChange.bind(Object(B.a)(Object(B.a)(a)),"new","name"),onKeyPress:a.handleEnterPressNew})),p.a.createElement(D.a,null,p.a.createElement(I.a,{value:a.state.newBreak.startTime,onChange:a.handleTimeInputChange.bind(Object(B.a)(Object(B.a)(a)),"new","startTime"),onEnterPress:a.addBreak})),p.a.createElement(D.a,null,p.a.createElement(I.a,{value:a.state.newBreak.endTime,onChange:a.handleTimeInputChange.bind(Object(B.a)(Object(B.a)(a)),"new","endTime"),onEnterPress:a.addBreak,showError:a.state.showEndTimeErrors.new})),p.a.createElement(D.a,null,p.a.createElement(H.a,{color:"primary",onClick:a.addBreak},p.a.createElement(L.a,null)))))),p.a.createElement(R.a,{container:!0,justify:"center"},p.a.createElement(M.a,{onClick:a.handleSave.bind(Object(B.a)(Object(B.a)(a))),variant:"contained",color:"primary",style:{margin:".5rem"}},"Save")))};var n=JSON.parse(JSON.stringify(e.breaks)),i={};n.length?(i.startTime=Y.a.add(n[n.length-1].endTime,90),i.endTime=Y.a.add(i.startTime,60)):(i.startTime=Y.a.round(Y.a.add(e.currentTime,90),15),i.endTime=Y.a.add(i.startTime,60)),i.name="";for(var d={new:30},u=0;u<n.length;u++){d[n[u].id]=Y.a.subtractToMinutes(n[u].endTime,n[u].startTime,!0)}return a.state={breaks:n,newBreak:i,breakDurations:d,errors:{},showEndTimeErrors:{},temp:{showEndTimeErrors:{}}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleInputChange",value:function(e,t,a){var n=a.target.value;if(!q.a.test(n))if("new"===e){var r=this.state.newBreak;r[t]=n,this.setState({newBreak:r})}else{var s=this.state.breaks,o=s.findIndex(function(t){return t.id===e});s[o][t]=n,this.setState({breaks:s}),this.props.onSave(s,{breaks:e})}}},{key:"handleTimeInputChange",value:function(e,t,a,n){if(!q.a.test(n))if("new"===e){var r=this.state.newBreak,s=this.state.breakDurations;"object"===a?r[t]=n:r[t][a]=n,""!==n&&("startTime"===t&&(r.endTime=Y.a.add(r.startTime,s.new)),"endTime"===t&&(this.validateEndTime(e,r.startTime,r.endTime),s.new=Y.a.subtractToMinutes(r.endTime,r.startTime,!0))),this.setState({newBreak:r,breakDurations:s})}else{var o=this.state.breaks,i=this.state.breakDurations,l=o.findIndex(function(t){return t.id===e});"object"===a?o[l][t]=n:o[l][t][a]=n;var c=!0;""===n?c=!1:("startTime"===t&&(o[l].endTime=Y.a.add(o[l].startTime,i[e])),"endTime"===t&&(c=this.validateEndTime(e,o[l].startTime,o[l].endTime),i[l]=Y.a.subtractToMinutes(o[l].endTime,o[l].startTime,!0),this.setState({breakDurations:i})));var d=this.state.errors;d[e]=!c;var u=Object.values(d).every(function(e){return!e});this.setState({breaks:o,errors:d}),this.props.onSave(o,u,{breaks:e})}}},{key:"deleteBreak",value:function(e){var t=this.state.breaks,a=t.findIndex(function(t){return t.id===e});t.splice(a,1);var n=this.state.errors;delete n[e];var r=Object.values(n).every(function(e){return!e});this.setState({breaks:t,errors:n}),this.props.onSave(t,r,{breaks:e})}}]),t}(u.Component)),Q=a(922),X=a(823),Z=a(824),$=a.n(Z),ee=a(799),te=a.n(ee),ae=a(183),ne=a.n(ae),re=(a(1035),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).handleDismiss=function(e){a.props.showDontRemindMeAgain?a.setState({anchorEl:e.currentTarget}):a.props.dismiss()},a.closeDismissMenu=function(){a.setState({anchorEl:null})},a.state={anchorEl:null},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl;return p.a.createElement("div",{className:"signInPanel"},p.a.createElement(R.a,{className:"signInPanelContainer",container:!0,alignItems:"center",justify:"space-evenly"},p.a.createElement(R.a,null,"Sign in to sync your data between all your devices:"),p.a.createElement(R.a,null,p.a.createElement(X.a,{connect:this.props.connect}))),p.a.createElement(H.a,{className:"dismissButton",onClick:this.handleDismiss,"aria-owns":t?"signInPanelDismissMenu":void 0},p.a.createElement(ne.a,null)),this.props.showDontRemindMeAgain&&p.a.createElement($.a,{id:"signInPanelDismissMenu",anchorEl:t,open:Boolean(t),onClose:this.closeDismissMenu},p.a.createElement(te.a,{onClick:function(){e.closeDismissMenu(),e.props.dismiss()}},"Remind me later"),p.a.createElement(te.a,{onClick:function(){e.closeDismissMenu(),e.props.dontRemindMeAgain()}},"Don't remind me again")))}}]),t}(u.Component)),se=a(131),oe=a(1046),ie=a.n(oe),le=a(280),ce=a.n(le),de=a(269),ue=a.n(de),pe=a(184),me=a(826),he=a.n(me),ge=a(926),fe=a.n(ge),be=a(927),Ee=a.n(be),je=a(863);a(1044);a.d(t,"default",function(){return Ie});var Te=p.a.lazy(function(){return Promise.all([a.e(1),a.e(6),a.e(15)]).then(a.bind(null,1221))}),ve=p.a.lazy(function(){return Promise.all([a.e(1),a.e(6),a.e(16)]).then(a.bind(null,1222))}),ke=p.a.lazy(function(){return a.e(17).then(a.bind(null,1223))}),ye=p.a.lazy(function(){return a.e(18).then(a.bind(null,1224))}),we=p.a.lazy(function(){return a.e(19).then(a.bind(null,1225))}),De=p.a.lazy(function(){return Promise.all([a.e(0),a.e(3),a.e(20)]).then(a.bind(null,293))}),Pe=p.a.lazy(function(){return Promise.all([a.e(1),a.e(3),a.e(21)]).then(a.bind(null,1229))}),Ce=p.a.lazy(function(){return a.e(22).then(a.bind(null,1226))}),Se=p.a.lazy(function(){return a.e(23).then(a.t.bind(null,289,7))}),Oe=p.a.lazy(function(){return a.e(24).then(a.bind(null,187))}),Ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).setShowResetButton=function(){var e,t,n=new Date(localStorage.lastReset).getTime(),r=(n%=864e5)/1e3/60;if(!(e=Y.a.isBiggerThan(r,a.props.currentTime,!1,!0))){var s=new Date(localStorage.lastReset),o=(a.props.data.settings.showResetButtonAfter,a.props.data.settings).showResetButtonAfter;s.setTime(s.getTime()+60*o*60*1e3),t=s<new Date}var i=(e||t)&&a.props.data.projects.length;a.setState({showResetButton:i})},a.addBreak=function(e,t){for(var n=a.props.data.breaks.slice(),r=0;r<n.length;r++)(Y.a.isBiggerThan(t,n[r].startTime,!1,!0)&&Y.a.isBiggerThan(n[r].startTime,e,!0,!0)||Y.a.isBiggerThan(t,n[r].endTime,!1,!0)&&Y.a.isBiggerThan(n[r].endTime,e,!0,!0))&&(n[r].autodetected?(Y.a.isBiggerThan(e,n[r].startTime,!1,!0)&&(e=n[r].startTime),Y.a.isBiggerThan(n[r].endTime,t,!0,!0)&&(t=n[r].endTime),n.splice(r,1)):e=n[r].endTime);var s=Object(G.a)(n,"breaks");return n.push({id:s,name:"Auto "+(n.length+1),autodetected:!0,startTime:e,endTime:t}),a.props.update({breaks:n},{breaks:s}),n},a.handleEndTimeChange=function(e,t){var n=Object.assign({},a.props.data.endTime),r={showErrors:a.state.showErrors,temp:a.state.temp};"object"===e?n=t:n[e]=t,""===n.h||""===n.m||Y.a.isBiggerThan(a.props.currentTime,n,!0,!0)?r.temp.endTimeErrorTimeout=setTimeout(function(){a.props.changeRouterShowErrors("endTime",!0)},250):(clearTimeout(r.temp.endTimeErrorTimeout),a.props.changeRouterShowErrors("endTime",!1)),r.endTime=n,a.setState(r),a.props.update({endTime:n})},a.handleRootKeyDown=function(e){a.props.data.settings.changeModeOnTab&&"Tab"===e.key&&!a.state.temp.openBreaksDrawer&&(e.preventDefault(),a.props.changeMode("planning"===a.props.data.mode?"working":"planning"))},a.handleCurrentTimeChange=function(e){a.props.onCurrentTimeChange(e),setTimeout(a.setShowResetButton)},a.resetState=function(){window.confirm("Are you sure you want to delete all your projects?")&&(a.props.update({projects:[],breaks:[],mode:"planning"}),a.setState({showResetButton:!1}))},a.closeDrawer=function(e,t){if("undefined"===typeof a.state.temp["canClose"+e]||a.state.temp["canClose"+e]||window.confirm("Some of the ".concat(t," weren't editted properly. If you close this now, those changes will be lost"))){var n=a.state.temp;n["open"+e]=!1,n["canClose"+e]=void 0,"DefaultProjectsDrawer"===e&&(n.defaultProjectsDrawerRemoveTransform=!1),a.setState(n)}},a.saveBreaks=function(e,t,n){if("undefined"===typeof t||t){var r=a.props.data.projects.slice();a.props.data.projects.length&&(r=Object(Y.b)(r,a.props.data.settings,e,a.props.data.startTime));var o=a.state.temp;"undefined"!==typeof t&&(o.canCloseBreaksDrawer=t),a.setState({temp:o}),a.props.update({projects:r,breaks:JSON.parse(JSON.stringify(e))},n)}else a.setState({temp:Object(s.a)({},a.state.temp,{canCloseBreaksDrawer:!1})})},a.handleSignInDismiss=function(){a.setState({temp:Object(s.a)({},a.state.temp,{signInDissmissed:!0})}),localStorage.userHasDismissedSignInBefore||(localStorage.userHasDismissedSignInBefore=!0),a.showSignInAgainTimeout=setTimeout(function(){a.setState({temp:Object(s.a)({},a.state.temp,{signInDissmissed:null})})},36e5)},a.handleSignInDontRemindMeAgain=function(){a.setState({temp:Object(s.a)({},a.state.temp,{signInDissmissed:null})}),localStorage.removeItem("userHasDismissedSignInBefore"),localStorage.dontShowSignInPanelAgain=!0},a.openDefaultProjectsDrawer=function(){a.setState({temp:Object(s.a)({},a.state.temp,{openDefaultProjectsDrawer:!0})}),setTimeout(function(){a.setState({temp:Object(s.a)({},a.state.temp,{defaultProjectsDrawerRemoveTransform:!0})})},400)},a.addBreak=function(e){var t=a.props.data.breaks,n=Object(G.a)(t,"breaks");t.push(Object(s.a)({id:n},e)),a.props.update({breaks:t},{breaks:n})},a.getDateString=function(){return(Y.a.isBiggerThan(300,a.props.currentTime,!0)?new Date(Date.now()-864e5):new Date).toISOString().split("T")[0]},a.closeSnackbar=function(){return a.setState({temp:Object(s.a)({},a.state.temp,{snackbar:{open:!1}})})},a.handleProjectPause=function(e,t){e.progress=t;var n=parseInt(e.estimatedDuration);if(t>1.1*n){var r=a.props.data.settings.roundTo,o=Math.round(t/r)*r;o!==n&&(e.estimatedDuration=o,a.setState({temp:Object(s.a)({},a.state.temp,{snackbar:{open:!0,message:"".concat(e.name,"'s duration was changed from ").concat(n," to ").concat(e.estimatedDuration),action:function(){a.handleDoneEditingProject("projects",e.id,{name:e.name,duration:n,startTime:e.plannedTime.start})},buttonLabel:"Undo"}})}))}return e},a.state={showErrors:{},showResetButton:!1,temp:{dontShowSignInYet:!0,snackbar:{open:!1,message:"",action:function(){},buttonLabel:""}}},a.showSignInPanelAfterLoadTimeout=setTimeout(function(){a.setState({temp:Object(s.a)({},a.state.temp,{dontShowSignInYet:!1})})},5e3),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){if(!Object.keys(e.data.settings).length&&Object.keys(this.props.data.settings).length&&this.setShowResetButton(),e.data.projects!==this.props.data.projects){var t,a,n=!1,r=this.getDateString(),s=this.props.data.productivityPercentages[r];if(this.props.data.projects.length){n=!0;for(var o=0;o<this.props.data.projects.length;o++)if("done"!==this.props.data.projects[o].state){n=!1;break}if(n){for(var i=0,l=0;l<this.props.data.projects.length;l++)i+=parseInt(this.props.data.projects[l].estimatedDuration);if(a=i>=60?Y.a.makeString(Y.a.toTimeObject(i,!1),!1):i+" minutes",s)t=s;else{var c=Y.a.subtractToMinutes(this.props.currentTime,this.props.data.startTime,!0);t=Math.round(100*i/c)}}}else n=!1;if((!this.props.data.realEndTime||r===this.props.data.realEndTime.split("T")[0])&&(n!==this.state.allProjectsDone&&(this.setState({allProjectsDone:n}),"undefined"!==typeof this.state.allProjectsDone&&this.props.update({realEndTime:n?new Date:void 0})),a!==this.state.totalTimeWorkedString&&this.setState({totalTimeWorkedString:a}),t!==s&&(!isNaN(t)||"number"!==typeof t))){var d=Object.assign({},this.props.data.productivityPercentages);d[r]=t,this.props.update({productivityPercentages:d})}}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.showSignInAgainTimeout),clearTimeout(this.showSignInPanelAfterLoadTimeout)}},{key:"addProject",value:function(e,t,a){this.props.changeRouterShowErrors("noProjects",!1);var n=this.props.data[e].slice(),s=this.props.data.settings,o=Object(G.a)(n,"projects"),i={id:o,name:t.name,color:t.color,estimatedDuration:t.duration,state:"notStarted"};if("defaultProjects"===e?i.days=t.days:i.plannedTime={start:t.startTime,end:Y.a.add(t.startTime,t.duration)},n.length&&"defaultProjects"!==e){var l=n[n.length-1];s.detectBreaksAutomatically&&Y.a.isBiggerThan(t.startTime,Y.a.suggestStartTime(l.plannedTime.end,l.estimatedDuration,s),!1,!0)&&this.addBreak(l.plannedTime.end,t.startTime)}n.push(i);var c=Object(r.a)({},e,n);"undefined"!==typeof a&&(c["projects"===e?"defaultColorIndex":"defaultColorIndexDefaultProjects"]=a);1===n.length&&"defaultProjects"!==e&&(c.startTime=n[0].plannedTime.start),this.props.update(c,Object(r.a)({},e,o))}},{key:"deleteProject",value:function(e,t){var a=this.props.data[e].slice(),n=this.props.data.settings,s=a.findIndex(function(e){return e.id===parseInt(t)});n.updateTimesAfterDelete&&0===s&&a[1]&&"defaultProjects"!==e&&(a[1].plannedTime.start=a[0].plannedTime.start),a.splice(s,1),n.updateTimesAfterDelete&&"defaultProjects"!==e&&(a=Object(Y.b)(a,n,this.props.data.breaks,this.props.data.startTime));var o=Object(r.a)({},e,a);a.length||"defaultProjects"===e||(o.breaks=[]),this.props.update(o,Object(r.a)({},e,t))}},{key:"handleColorChange",value:function(e,t,a){var n=this.props.data[e].slice(),s=n.findIndex(function(e){return e.id===parseInt(t)}),o=Object.assign({},n[s]);n.splice(s,1),o.color=a,n.splice(s,0,o),this.props.update(Object(r.a)({},e,n),{projects:t})}},{key:"handleDragEnd",value:function(e,t){if(this.setState({temp:Object(s.a)({},this.state.temp,{dragging:!1})}),t.destination){var a=t.draggableId,n=t.destination.index,o=[];this.props.data[e].forEach(function(t){var a=Object.assign({},t);"defaultProjects"!==e&&(a.plannedTime=JSON.parse(JSON.stringify(t.plannedTime))),o.push(a)});var i,l=o.findIndex(function(e){return e.id===parseInt(a)}),c=o[l];if(n!==l)"defaultProjects"!==e&&(i=o[0].plannedTime.start),o.splice(l,1),o.splice(n,0,c),this.props.data.settings.updateTimesAfterDrag&&"defaultProjects"!==e&&(o[0].plannedTime.start=i,o=Object(Y.b)(o,this.props.data.settings,this.props.data.breaks,this.props.data.startTime)),this.props.update(Object(r.a)({},e,o))}}},{key:"handleDoneEditingProject",value:function(e,t,a){var n=this.props.data[e].slice(),s=this.props.data.breaks,o=this.props.data.settings,i=n.findIndex(function(e){return e.id===parseInt(t)});if(!(i<0)){var l,c,d,u={};if(Object.keys(n[i]).forEach(function(e){u[e]=n[i][e]}),"defaultProjects"===e||u.estimatedDuration===a.duration&&Y.a.areIdentical(u.plannedTime.start,a.startTime)||(u.plannedTime=Object.assign({},u.plannedTime)),n.splice(i,1),o.detectBreaksAutomatically&&0!==i&&"defaultProjects"!==e&&Y.a.isBiggerThan(a.startTime,u.plannedTime.start,!1,!0)&&(s=this.addBreak(Y.a.suggestStartTime(n[i-1].plannedTime.end,n[i-1].estimatedDuration,o),a.startTime)),o.detectBreaksAutomatically&&0!==i&&"defaultProjects"!==e&&Y.a.isBiggerThan(u.plannedTime.start,a.startTime,!1,!0))for(var p=0;p<s.length;p++)s[p].autodetected&&Y.a.areIdentical(u.plannedTime.start,s[p].endTime)&&(s[p].endTime=a.startTime);if("defaultProjects"!==e&&(l=parseInt(u.estimatedDuration)!==parseInt(a.duration),c=!Y.a.areIdentical(u.plannedTime.start,a.startTime)),u.name=a.name,u.estimatedDuration=a.duration,"defaultProjects"===e?u.days=a.days:u.plannedTime.start=a.startTime,n.splice(i,0,u),this.props.data.settings.updateTimesAfterEdit&&(l||c)){for(var m=i+1;m<n.length;m++)n[m]=Object.assign({},n[m]),n[m].plannedTime=Object.assign({},n[m].plannedTime);var h=0===i?a.startTime:Object.assign({},this.props.data.startTime);n=Object(Y.b)(n,o,s,h)}else d=Object(r.a)({},e,t),"defaultProjects"!==e&&(n[i].plannedTime.end=Y.a.add(n[i].plannedTime.start,n[i].estimatedDuration));var g=Object(r.a)({},e,n);0!==i||"defaultProjects"===e||Y.a.areIdentical(this.props.data.startTime,u.plannedTime.start)||(g.startTime=u.plannedTime.start),this.props.update(g,d)}}},{key:"handleProjectStateChange",value:function(e,t,a){var n=this,r=this.props.data.projects.slice(),o=r.findIndex(function(t){return t.id===parseInt(e)}),i=Object.assign({},r[o]);r.splice(o,1);var l=i.state;if(i.state=t,"paused"!==t||isNaN(parseInt(a))||(i=this.handleProjectPause(i,a)),"workingOnIt"===t&&(i.startedWorkingOnIt=Object.assign({},Object(s.a)({},this.props.currentTime,{s:(new Date).getSeconds()})),r.map(function(t){if("workingOnIt"===t.state&&t.id!==e){var a=Y.a.subtractToMinutes(Object(s.a)({},n.props.currentTime,{s:(new Date).getSeconds()}),t.startedWorkingOnIt,!0);return t.progress&&(a+=parseInt(t.progress)),t.state="paused",n.handleProjectPause(t,a)}return t})),"done"===t){var c=0,d=parseInt(i.estimatedDuration);if(i.progress&&(c+=parseInt(i.progress)),i.startedWorkingOnIt&&(c+=Y.a.subtractToMinutes(Object(s.a)({},this.props.currentTime,{s:(new Date).getSeconds()}),i.startedWorkingOnIt,!0)),c>1.1*d&&"paused"!==l){var u=this.props.data.settings.roundTo,p=Math.round(c/u)*u;p!==d&&this.setState({temp:Object(s.a)({},this.state.temp,{snackbar:{open:!0,message:"".concat(i.name," took way longer than expected. Do you want us to change its estimated duration to make it reflect how long it really took? (from ").concat(d," minutes to ").concat(p," minutes)"),action:function(){n.handleDoneEditingProject("projects",e,{name:i.name,duration:p,startTime:i.plannedTime.start})},buttonLabel:"Change"}})})}}var m={projects:[e]};r.splice(o,0,i),this.props.update({projects:r},m)}},{key:"changeView",value:function(e,t,a){if(t){var r="/"+e;if(a&&"function"!==typeof a.stopPropagation){r+="?";for(var s=!0,o=Object.entries(a),i=0;i<o.length;i++){var l=o[i],c=Object(n.a)(l,2);s?s=!1:r+="&",r+=c[0]+"="+c[1]}}this.props.history.push(r)}else{var d=this.props.history.location.pathname.split("/");d.splice(-1,1),this.props.history.push(d.join("/"))}}},{key:"handleDoneEditingBreak",value:function(e,t){var a=this.props.data.breaks.slice(),n=a.findIndex(function(t){return t.id===parseInt(e)});if(!(n<0)){var r=JSON.parse(JSON.stringify(a[n]));r.name=t.name,r.startTime=t.startTime,r.endTime=t.endTime,a.splice(n,1,r),this.props.update({breaks:a},{breaks:e})}}},{key:"deleteBreak",value:function(e){var t=this.props.data.breaks,a=t.findIndex(function(t){return t.id===parseInt(e)});t.splice(a,1),this.props.update({breaks:t},{breaks:e})}},{key:"render",value:function(){var e=this;if("/add"===this.props.history.location.pathname){var t,a,n,r,o=Object(je.a)(this.props.location.search);switch(o.type){case"default":a="defaultProjects",t="Add a repetitive project",n=this.changeView.bind(this,"defaultProjects",!0),r=this.props.data.defaultColorIndexDefaultProjects;break;case"break":a="breaks",t="Add a break",n=this.changeView.bind(this,"breaks",!0);break;default:a="projects",n=this.changeView.bind(this,"add",!1),r=this.props.data.defaultColorIndex}return p.a.createElement(p.a.Suspense,{fallback:p.a.createElement(se.a,null)},p.a.createElement(Te,{settings:this.props.data.settings,defaultColorIndex:r,showErrors:this.state.showErrors,currentTime:this.props.currentTime,lastProject:this.props.data.projects[this.props.data.projects.length-1],onAddProject:this.addProject.bind(this,a),onAddBreak:this.addBreak,type:o.type,close:n,title:t}))}if("/edit"===this.props.history.location.pathname&&this.props.data.breaks){var i,l,c=Object(je.a)(this.props.location.search),d=c.type;switch(d){case"default":i="defaultProjects",l=this.changeView.bind(this,"defaultProjects",!0);break;case"break":i="breaks",l=this.changeView.bind(this,"breaks",!0);break;default:i="projects",l=this.changeView.bind(this,"edit",!1)}var u=c.id,m=this.props.data[i],h=m.findIndex(function(e){return e.id.toString()===u}),g=m[h];if(g){var f,b,E={name:g.name};return"default"===d?E.days=g.days:E.startTime=g.plannedTime?g.plannedTime.start:g.startTime,"break"===d?E.endTime=g.endTime:(E.duration=g.estimatedDuration,E.color=g.color),"break"===d?(f=this.deleteBreak.bind(this,u),b=this.handleDoneEditingBreak.bind(this,u)):(f=this.deleteProject.bind(this,i,u),b=this.handleDoneEditingProject.bind(this,i,u)),p.a.createElement(p.a.Suspense,{fallback:p.a.createElement(se.a,null)},p.a.createElement(ve,{settings:this.props.data.settings,inputValues:E,delete:f,onDoneEditing:b,close:l,type:d}))}}if("/breaks"===this.props.history.location.pathname&&this.props.data.breaks)return p.a.createElement(p.a.Suspense,{fallback:p.a.createElement(se.a,null)},p.a.createElement(ke,{breaks:this.props.data.breaks,changeView:this.changeView.bind(this)}));if("/defaultProjects"===this.props.history.location.pathname&&this.props.data.defaultProjects)return p.a.createElement(p.a.Suspense,{fallback:p.a.createElement(se.a,null)},p.a.createElement(ye,{projects:this.props.data.defaultProjects,settings:this.props.data.settings,defaultColorIndex:this.props.data.defaultColorIndexDefaultProjects,useDefaultProjects:this.props.data.useDefaultProjects,onColorChange:this.handleColorChange.bind(this,"defaultProjects"),onDoneEditing:this.handleDoneEditingProject.bind(this,"defaultProjects"),onAddProject:this.addProject.bind(this,"defaultProjects"),onDeleteProject:this.deleteProject.bind(this,"defaultProjects"),onDragEnd:this.handleDragEnd.bind(this,"defaultProjects"),onUseDefaultProjectsChange:function(t){e.props.update({useDefaultProjects:t.target.checked})},startEditingMobile:function(t){e.changeView("edit",!0,{type:"default",id:t})},changeView:this.changeView.bind(this)}));var j=this.state.allProjectsDone,T=Object(s.a)({},this.props.showErrors,this.state.showErrors);return p.a.createElement(S.a.Consumer,null,function(t){return p.a.createElement(R.a,{className:"container",onKeyDown:e.handleRootKeyDown,tabIndex:"0",autoselect:"true"},!t&&p.a.createElement(p.a.Suspense,{fallback:p.a.createElement(se.a,null)},p.a.createElement(we,{mode:e.props.data.mode,onModeChange:e.props.changeMode},p.a.createElement(De,{currentTime:e.props.currentTime,onCurrentTimeChange:e.handleCurrentTimeChange,endTime:e.props.data.endTime,projects:e.props.data.projects,breaks:e.props.data.breaks,settings:e.props.data.settings,startTime:e.props.data.startTime,realEndTime:e.props.data.realEndTime}))),p.a.createElement(R.a,{container:!0},p.a.createElement(S.b.Provider,{value:e.props.data.settings},p.a.createElement(O,{mode:e.props.data.mode,projects:e.props.data.projects,settings:e.props.data.settings,currentTime:e.props.currentTime,defaultColorIndex:e.props.data.defaultColorIndex,showErrors:T,onColorChange:e.handleColorChange.bind(e,"projects"),onDoneEditing:e.handleDoneEditingProject.bind(e,"projects"),onAddProject:e.addProject.bind(e,"projects"),onProjectStateChange:e.handleProjectStateChange.bind(e),onDeleteProject:e.deleteProject.bind(e,"projects"),onDragEnd:e.handleDragEnd.bind(e,"projects"),startEditingMobile:function(t){e.changeView("edit",!0,{id:t})}}),"planning"===e.props.data.mode?p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{id:"setEndTime"},p.a.createElement("label",{htmlFor:"endTimeHoursInput"},t?"End time":"Time when you want to stop working",":"),p.a.createElement(I.a,{onChange:e.handleEndTimeChange,value:e.props.data.endTime,firstInputId:"endTimeHoursInput",showError:T.endTime})),p.a.createElement(R.a,{container:!0,justify:"space-around"},!t&&p.a.createElement(R.a,null,p.a.createElement(M.a,{className:"planningSecondaryButton",onClick:function(){e.setState({temp:Object(s.a)({},e.state.temp,{openBreaksDrawer:!0})})},style:{marginBottom:"1rem"}},p.a.createElement(he.a,{color:"primary"}),"Edit breaks")),p.a.createElement(R.a,null,p.a.createElement(M.a,{onClick:function(){e.props.changeMode("working")},variant:"contained",color:"primary"},p.a.createElement(fe.a,null),"Let's get to work!")),!t&&p.a.createElement(R.a,null,p.a.createElement(M.a,{className:"planningSecondaryButton",onClick:e.openDefaultProjectsDrawer,style:{marginBottom:"1rem"}},p.a.createElement(Ee.a,{color:"primary"}),"Repetitive projects"))),p.a.createElement(ie.a,{id:"BreaksDrawer",anchor:"bottom",open:e.state.temp.openBreaksDrawer&&!t,onClose:function(){e.closeDrawer("BreaksDrawer","breaks")}},p.a.createElement(_,{breaks:e.props.data.breaks,currentTime:e.props.currentTime,onSave:e.saveBreaks,onClose:function(){e.closeDrawer("BreaksDrawer","breaks")}})),p.a.createElement(ie.a,{className:e.state.temp.defaultProjectsDrawerRemoveTransform?"defaultProjectsDrawerRemoveTransform":null,anchor:"bottom",open:e.state.temp.openDefaultProjectsDrawer&&!t,onClose:function(){e.closeDrawer("DefaultProjectsDrawer","projects")}},p.a.createElement(Q.a,{projects:e.props.data.defaultProjects,settings:e.props.data.settings,defaultColorIndex:e.props.data.defaultColorIndexDefaultProjects,useDefaultProjects:e.props.data.useDefaultProjects,onClose:function(){e.closeDrawer("DefaultProjectsDrawer","projects")},onColorChange:e.handleColorChange.bind(e,"defaultProjects"),onDoneEditing:e.handleDoneEditingProject.bind(e,"defaultProjects"),onAddProject:e.addProject.bind(e,"defaultProjects"),onDeleteProject:e.deleteProject.bind(e,"defaultProjects"),onDragEnd:e.handleDragEnd.bind(e,"defaultProjects"),onUseDefaultProjectsChange:function(t){e.props.update({useDefaultProjects:t.target.checked})},startEditingMobile:function(t){e.changeView("edit",!0,{id:t})}}))):j&&p.a.createElement(p.a.Suspense,{fallback:p.a.createElement(se.a,null)},p.a.createElement(Pe,{productivityPercentages:e.props.data.productivityPercentages,allProjectsDone:e.state.allProjectsDone,totalTimeWorkedString:e.state.totalTimeWorkedString,dateString:e.getDateString()})),e.state.showResetButton&&p.a.createElement(R.a,{container:!0,justify:"flex-end",alignItems:"flex-end",style:{marginTop:"2rem"}},p.a.createElement(M.a,{id:"resetButton",onClick:e.resetState,variant:"contained"},"Reset")))),!t&&p.a.createElement(p.a.Suspense,{fallback:p.a.createElement(se.a,null)},p.a.createElement(pe.Link,{id:"linkToSettings",to:"/settings","aria-label":"Settings",title:"Settings"},p.a.createElement(Se,null)),p.a.createElement(Ce,{connect:e.props.connect,disconnect:e.props.disconnect,history:e.props.history,loggedIn:e.props.loggedIn,data:localStorage.devUnlocked?e.props.data:{},update:localStorage.devUnlocked?e.props.update:{}})),p.a.createElement(ce.a,{direction:"right",in:!e.props.loggedIn&&!e.state.temp.dontShowSignInYet&&!e.state.temp.signInDissmissed&&!localStorage.dontShowSignInPanelAgain&&!e.props.disconnected,mountOnEnter:!0,unmountOnExit:!0},p.a.createElement(re,{connect:e.props.connect,dismiss:e.handleSignInDismiss,showDontRemindMeAgain:localStorage.userHasDismissedSignInBefore,dontRemindMeAgain:e.handleSignInDontRemindMeAgain})),t&&"planning"===e.props.data.mode&&p.a.createElement(p.a.Suspense,{fallback:p.a.createElement(se.a,null)},p.a.createElement(Oe,{onClick:e.changeView.bind(e,"add",!0)})),p.a.createElement(ue.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:e.state.temp.snackbar.open,autoHideDuration:6e3,onClose:e.closeSnackbar,ContentProps:{"aria-describedby":"message-id"},message:p.a.createElement("span",{id:"message-id"},e.state.temp.snackbar.message),action:[p.a.createElement(M.a,{key:"action",color:"secondary",size:"small",onClick:function(){e.state.temp.snackbar.action(),e.closeSnackbar()},children:e.state.temp.snackbar.buttonLabel||""}),p.a.createElement(H.a,{key:"close","aria-label":"Close",color:"inherit",onClick:e.closeSnackbar},p.a.createElement(ne.a,null))]}))})}}]),t}(u.Component)},785:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(62),r=a(80),s=a(78),o=a(79),i=a(1),l=a.n(i),c=(a(801),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).render=function(){return l.a.createElement("span",{className:"ColorPicker"},l.a.createElement("input",{className:"colorInput",ref:function(e){return a.colorInput=e},type:"color","aria-label":"Color",value:a.props.value,onChange:function(e){a.props.onChange(e.target.value)}}),l.a.createElement("svg",{width:a.props.xl?50:20,height:a.props.xl?30:20,onClick:function(){a.colorInput.click()}},a.props.xl?l.a.createElement("rect",{width:"50",height:"30",rx:"5",ry:"5",style:{fill:a.props.value}}):l.a.createElement("circle",{cx:"10",cy:"10",r:".5rem",fill:a.props.value})))},a.state={},a.colorInput=l.a.createRef(),a}return Object(o.a)(t,e),t}(i.Component))},801:function(e,t,a){},804:function(e,t,a){"use strict";var n=a(1),r=a.n(n),s=a(131),o=a(179),i=(a(951),r.a.lazy(function(){return Promise.all([a.e(1),a.e(27)]).then(a.bind(null,1208))})),l=r.a.lazy(function(){return Promise.all([a.e(31),a.e(28)]).then(a.bind(null,1209))});t.a=function(e){return r.a.createElement(o.b.Consumer,null,function(t){return r.a.createElement(o.a.Consumer,null,function(a){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(s.a,null)},a?r.a.createElement(l,{mode:t.timeFormat24H?"24h":"12h",value:e.value,onChange:e.onChange,error:e.hError||e.mError||e.showErrorProp}):r.a.createElement(i,{onChange:e.onChange,value:e.value,firstInputId:e.firstInputId,hError:e.hError,mError:e.mError,onEnterPress:e.onEnterPress,settings:t}))})})}},814:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"b",function(){return o}),a.d(t,"a",function(){return i});var n=a(108),r=a(902);function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];return""===e.name&&a.push("name"),(""===e.duration||isNaN(e.duration)||e.duration>1440||e.duration<=0)&&a.push("duration"),t||((""===e.startTime.h||isNaN(e.startTime.h))&&a.push("startTimeH"),(""===e.startTime.m||isNaN(e.startTime.m))&&a.push("startTimeM")),a.length?{valid:!1,errors:a}:{valid:!0}}function o(e,t){return!("name"===e&&t.length>30)&&(("duration"!==e||!(isNaN(t)&&""!==t||t<0))&&!r.a.test(t))}function i(e){var t=[];return""===e.name&&t.push("name"),(""===e.startTime.h||isNaN(e.startTime.h)||e.startTime.h<0)&&t.push("startTimeH"),(""===e.startTime.m||isNaN(e.startTime.m)||e.startTime.m<0)&&t.push("startTimeM"),(""===e.endTime.h||isNaN(e.endTime.h)||e.endTime.h<0)&&t.push("endTimeH"),(""===e.endTime.m||isNaN(e.endTime.m)||e.endTime.m<0)&&t.push("endTimeM"),n.a.isBiggerThan(e.startTime,e.endTime,!1,!0)&&t.push("endTime"),t.length?{valid:!1,errors:t}:{valid:!0}}},823:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(62),r=a(80),s=a(78),o=a(79),i=a(1),l=a.n(i),c=a(924),d=a.n(c),u=function(e){function t(){var e,a;Object(n.a)(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(a=Object(r.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).responseGoogle=function(e){e.error?console.log(e):setTimeout(function(){window.confirm("Data syncing is still under beta testing. If you encouter any problems, please send us a bug report. It will only take a minute or two and it helps us a lot with improving the app.")&&a.props.connect(e.tokenId)},50)},a.render=function(){return l.a.createElement(d.a,{clientId:"1070394852834-4nunul2jqv2pqn9du9ralgd61220d3c1.apps.googleusercontent.com",buttonText:"Sign In",onSuccess:a.responseGoogle,onFailure:a.responseGoogle,render:a.props.render})},a}return Object(o.a)(t,e),t}(i.Component)},838:function(e,t,a){},863:function(e,t,a){"use strict";function n(e){var t=e.substr(1).split("&"),a={},n=!0,r=!1,s=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value.split("=");a[l[0]]=l[1]}}catch(c){r=!0,s=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}return a}a.d(t,"a",function(){return n})},896:function(e,t,a){"use strict";var n=a(109),r=a(25),s=a(62),o=a(63),i=a(80),l=a(78),c=a(79),d=a(180),u=a(1),p=a.n(u),m=a(108),h=a(843),g=a.n(h),f=a(844),b=a.n(f),E=a(816),j=a.n(E),T=a(845),v=a.n(T),k=a(846),y=a.n(k),w=a(771),D=a.n(w),P=a(847),C=a.n(P),S=function(e){function t(e){var a,n;if(Object(s.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).render=function(){return p.a.createElement(p.a.Fragment,null,p.a.createElement(g.a,{id:"DefaultProjectsDaysDialogTitle"},"Days",a.props.project.name&&" - "+a.props.project.name),p.a.createElement(b.a,null,p.a.createElement(v.a,null,["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(function(e,t){return p.a.createElement(y.a,{key:t,control:p.a.createElement(C.a,{checked:a.state.days[t],onChange:a.handleChange.bind(Object(d.a)(Object(d.a)(a)),t)}),label:e})}))),p.a.createElement(j.a,null,p.a.createElement(D.a,{color:"primary",onClick:function(){return a.props.close()}},"Save")))},a.props.project&&a.props.project.days)n=a.props.project.days;else{n=[];for(var r=0;r<7;r++)n.push(!0)}return a.state={days:n},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.days;a[e]=t.currentTarget.checked,this.setState({days:a}),this.props.save(a)}}]),t}(u.Component),O=a(796),I=a.n(O),B=a(814);t.a=function(e){return function(t){function a(t){var n,o;if(Object(s.a)(this,a),(n=Object(i.a)(this,Object(l.a)(a).call(this,t))).handleColorChange=function(e){n.setState({inputValues:Object(r.a)({},n.state.inputValues,{color:e})})},n.toggleDaysDialog=function(e){return n.setState({temp:Object(r.a)({},n.state.temp,{dialogProjectId:e})})},n.handleDaysChange=function(e){n.setState({inputValues:Object(r.a)({},n.state.inputValues,{days:e})})},n.render=function(){var t=p.a.createElement(e,Object.assign({},n.props,{inputValues:n.state.inputValues,showErrors:n.state.showErrors,showErrorProp:!!n.props.showErrors&&n.props.showErrors.noProjects,onInputChange:n.handleInputChange.bind(Object(d.a)(Object(d.a)(n))),onTimeInputChange:n.handleTimeInputChange.bind(Object(d.a)(Object(d.a)(n))),onColorChange:n.handleColorChange,setState:n.setState.bind(Object(d.a)(Object(d.a)(n))),openDaysDialog:n.toggleDaysDialog.bind(Object(d.a)(Object(d.a)(n)),!0)}));if("default"===n.props.type){var a=n.state.temp.dialogProjectId;return p.a.createElement(p.a.Fragment,null,t,p.a.createElement(I.a,{open:a,onClose:n.toggleDaysDialog.bind(Object(d.a)(Object(d.a)(n)),!1),"aria-labelledby":"DefaultProjectsDaysDialogTitle"},p.a.createElement(S,{project:n.state.inputValues,close:n.toggleDaysDialog.bind(Object(d.a)(Object(d.a)(n)),!1),save:n.handleDaysChange})))}return t},n.props.inputValues)o=n.props.inputValues;else{o={name:""};var c,u=n.props.type,h=n.props.settings.roundTo||5;if("default"===u){o.days=[];for(var g=0;g<7;g++)o.days.push(!0)}else{var f,b=n.props.lastProject;f=b&&b.plannedTime?m.a.suggestStartTime(b.plannedTime.end,b.estimatedDuration,n.props.settings):n.props.currentTime&&!n.props.currentTime.defaultVal?m.a.round(m.a.add(n.props.currentTime,15),h):{h:12,m:0,pm:!0,lastResortValue:!0},o.startTime=f}"break"===n.props.type?o.endTime=m.a.round(m.a.add(o.startTime,30),h):(o.duration="",c="undefined"!==typeof n.props.defaultColorIndex?n.props.settings.defaultColors[n.props.defaultColorIndex]:"#000000",o.color=c)}return n.state={inputValues:o,userHasntChangedStartTime:!0,defaultColorIndex:n.props.defaultColorIndex,showErrors:{},temp:{dialogProjectId:!1}},n}return Object(c.a)(a,t),Object(o.a)(a,[{key:"componentDidUpdate",value:function(){if("default"!==this.props.type&&""!==this.state.inputValues.h&&this.state.userHasntChangedStartTime&&this.props.settings.bufferTimePercentage&&this.props.lastProject&&!this.props.isDefaultProjects){var e=m.a.suggestStartTime(this.props.lastProject.plannedTime.end,this.props.lastProject.estimatedDuration,this.props.settings);if(""===this.state.inputValues.startTime.h||!m.a.areIdentical(e,this.state.inputValues.startTime)){var t=Object(r.a)({},this.state.inputValues,{startTime:e});if("break"===this.props.type){var a=m.a.round(m.a.add(e,30),this.props.settings.roundTo);t.endTime=a}this.setState({inputValues:t})}}if("break"!==this.props.type&&!this.props.inputValues&&"undefined"===typeof this.state.defaultColorIndex&&"undefined"!==typeof this.props.defaultColorIndex&&this.props.settings.defaultColors){var n=this.state.inputValues,s=this.props.settings.defaultColors,o=this.props.defaultColorIndex;s.length<=o&&(o=0),n.color=s[o],n.color=n.color?n.color:"#000000",this.setState({inputValues:n,defaultColorIndex:o})}if("default"!==this.props.type&&this.state.inputValues.startTime.lastResortValue&&this.props.currentTime&&this.props.settings.roundTo){var i=this.state.inputValues,l=this.props.settings.roundTo;i.startTime=m.a.round(m.a.add(this.props.currentTime,15),l),"break"===this.props.type&&(i.endTime=m.a.round(m.a.add(i.startTime,30),l)),this.setState({inputValues:i})}}},{key:"handleInputChange",value:function(e,t){var a=t.target.value;Object(B.b)(e,a)&&this.setState({inputValues:Object(r.a)({},this.state.inputValues,Object(n.a)({},e,a)),showErrors:Object(r.a)({},this.state.showErrors,Object(n.a)({},e,!1))})}},{key:"handleTimeInputChange",value:function(e,t,a){var n={inputValues:this.state.inputValues,showErrors:this.state.showErrors};"object"===t?n.inputValues[e]=a:n.inputValues[e][t]=a,n.showErrors[e+t.toUpperCase()]=!1,n.userHasntChangedStartTime=!1,this.setState(n)}}]),a}(u.Component)}},897:function(e,t,a){"use strict";a.d(t,"a",function(){return w});var n=a(25),r=a(62),s=a(63),o=a(80),i=a(78),l=a(79),c=a(1),d=a.n(c),u=a(785),p=a(131),m=a(778),h=a.n(m),g=a(772),f=a.n(g),b=a(795),E=a.n(b),j=a(898),T=a.n(j),v=a(108),k=(a(838),d.a.lazy(function(){return a.e(25).then(a.bind(null,1200))})),y=d.a.lazy(function(){return Promise.all([a.e(0),a.e(26)]).then(a.bind(null,1212))}),w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={editing:!1},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t,a,r,s=this,o=this.state.editing&&"planning"===this.props.mode,i=this.props.isDefaultProjects,l={};i||(e=this.props.row.progress?parseInt(this.props.row.progress):0,"workingOnIt"===this.props.row.state&&(e+=v.a.subtractToMinutes(Object(n.a)({},this.props.currentTime,{s:(new Date).getSeconds()}),this.props.row.startedWorkingOnIt,!0)),(t=e)>this.props.row.estimatedDuration&&(t=this.props.row.estimatedDuration),a="done"===this.props.row.state?100:100*t/this.props.row.estimatedDuration,l={backgroundImage:"linear-gradient(to right, #00c8002e, #00c8002e ".concat(a,"%, transparent ").concat(a,"%, transparent 100%)")});if(o){var c,m=this.props,g=m.row,b=m.settings,j=g.id,w={name:g.name,duration:g.estimatedDuration,color:g.color},D=this.props.onDeleteProject.bind(this,j),P=this.props.onDoneEditing.bind(this,j);i?(c="default",w.days=g.days):w.startTime=g.plannedTime.start,r={settings:b,inputValues:w,delete:D,onDoneEditing:P,type:c,id:j}}else{var C=this.props;r={row:C.row,mode:C.mode,isDefaultProjects:C.isDefaultProjects,settings:C.settings,currentTime:C.currentTime,startEditingMobile:C.startEditingMobile,onDeleteProject:C.onDeleteProject,onProjectStateChange:C.onProjectStateChange}}return d.a.createElement(E.a,{rootRef:this.props.provided.innerRef},d.a.createElement(h.a,Object.assign({},this.props.provided.draggableProps,{style:Object(n.a)({},this.props.provided.draggableProps.style,l)}),d.a.createElement(f.a,null,d.a.createElement(T.a,Object.assign({className:"dragIcon"},this.props.provided.dragHandleProps),"drag_indicator"),d.a.createElement(u.a,{value:this.props.row.color,onChange:this.props.onColorChange.bind(this,this.props.row.id)})),d.a.createElement(d.a.Suspense,{fallback:d.a.createElement(p.a,null)},o?d.a.createElement(k,Object.assign({close:function(){return s.setState({editing:!1})}},r)):d.a.createElement(y,Object.assign({progress:e,progressCapped:t,startEditing:function(){return s.setState({editing:!0})}},r)))))}}]),t}(c.Component)},899:function(e,t,a){"use strict";var n=a(1),r=a.n(n),s=a(785),o=a(900),i=a(778),l=a.n(i),c=a(772),d=a.n(c),u=a(775),p=a.n(u),m=a(771),h=a.n(m),g=a(788),f=a.n(g),b=a(178),E=a.n(b),j=a(901),T=a(179);a(982);t.a=Object(j.a)(function(e){return r.a.createElement(l.a,{id:"addProjectRow"},r.a.createElement(d.a,null,r.a.createElement(s.a,{value:e.inputValues.color,onChange:e.onColorChange})),r.a.createElement(d.a,{className:"setNameCell"},r.a.createElement("div",{id:"addProjectLabelDiv"},r.a.createElement("label",{htmlFor:"addProjectNameInput"},"Add a project:")),r.a.createElement(p.a,{onChange:e.onInputChange.bind(void 0,"name"),value:e.inputValues.name,placeholder:"Name","aria-label":"Name",error:e.showErrors.name||e.showErrorProp,onKeyPress:e.onKeyPress,id:"addProjectNameInput",autoFocus:!0})),r.a.createElement(T.b.Consumer,null,function(t){var a=t.roundTo;return r.a.createElement(d.a,{className:"setDurationCell"},r.a.createElement(p.a,{onChange:e.onInputChange.bind(void 0,"duration"),value:e.inputValues.duration,placeholder:"Duration","aria-label":"Duration",error:e.showErrors.duration||e.showErrorProp,onKeyPress:e.onKeyPress,type:"number",inputProps:{step:a}})," minutes")}),"default"!==e.type&&r.a.createElement(o.a,{onChange:e.onTimeInputChange.bind(void 0,"startTime"),value:e.inputValues.startTime,firstInputId:"setStartTimeInput",hError:e.showErrors.startTimeH||e.showErrorProp,mError:e.showErrors.startTimeM||e.showErrorProp,showErrors:e.showErrors,onEnterPress:e.add}),"default"===e.type&&r.a.createElement(d.a,null,r.a.createElement(h.a,{onClick:e.openDaysDialog,variant:"outlined"},"Days")),r.a.createElement(d.a,null,r.a.createElement(E.a,{color:"primary",style:{color:e.showErrorProp?"red":null},"aria-label":"Add the new project",onClick:e.add},r.a.createElement(f.a,null))))})},900:function(e,t,a){"use strict";var n=a(1),r=a.n(n),s=a(804),o=a(772),i=a.n(o);t.a=function(e){return r.a.createElement(i.a,{className:"setStartTimeCell"},r.a.createElement("div",{className:"setStartTimeLabelDiv"},r.a.createElement("label",{htmlFor:e.firstInputId},"Start:")),r.a.createElement(s.a,{onChange:e.onChange,value:e.value,firstInputId:e.firstInputId,hError:e.hError,mError:e.mError,onEnterPress:e.onEnterPress}))}},901:function(e,t,a){"use strict";var n=a(62),r=a(80),s=a(78),o=a(79),i=a(1),l=a.n(i),c=a(814),d=a(896);t.a=function(e){return Object(d.a)(function(t){function a(){var t,o;Object(n.a)(this,a);for(var i=arguments.length,d=new Array(i),u=0;u<i;u++)d[u]=arguments[u];return(o=Object(r.a)(this,(t=Object(s.a)(a)).call.apply(t,[this].concat(d)))).add=function(e){var t,a=o.props,n=a.inputValues,r=a.type;if(!(t="break"===r?Object(c.a)(n):Object(c.c)(n,"default"===r)).valid){var s=o.props.showErrors;return t.errors.forEach(function(e){s[e]=!0}),void o.setState(s)}var i,l={name:""};if("default"!==r&&(l.startTime={h:"",m:"",pm:!0}),"break"===r)l.endTime={h:"",m:"",pm:!0},o.props.onAddBreak(o.props.inputValues);else{l.duration="",l.color=n.color;var d=o.props.settings.defaultColors,u=o.props.defaultColorIndex;i=u>=d.length-1?0:++u,l.color=d[i],o.props.onAddProject(o.props.inputValues,i)}var p={inputValues:l};"break"!==r&&(p.defaultColorIndex=i),o.props.setState(p),"function"===typeof e&&e()},o.handleKeyPress=function(e){"Enter"===e.key&&o.add()},o.render=function(){return l.a.createElement(e,Object.assign({},o.props,{add:o.add,onKeyPress:o.handleKeyPress}))},o}return Object(o.a)(a,t),a}(i.Component))}},902:function(e,t,a){"use strict";t.a=/[{}[\]"':;`]/},922:function(e,t,a){"use strict";var n=a(1),r=a.n(n),s=a(897),o=a(899),i=a(789),l=a.n(i),c=a(790),d=a.n(c),u=a(798),p=a.n(u),m=a(778),h=a.n(m),g=a(772),f=a.n(g),b=a(795),E=a.n(b),j=a(275),T=a.n(j),v=a(948),k=a(771),y=a.n(k),w=a(773),D=a.n(w),P=a(923),C=a.n(P);a(1032);t.a=function(e){var t=r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,null,r.a.createElement(T.a,{variant:"h6",className:"drawerTitle"},"Repetitive projects:")),r.a.createElement(D.a,null,r.a.createElement("label",{style:{color:e.settings.darkTheme?"white":"black"}},"Use repetitive projects",r.a.createElement(C.a,{color:"primary",checked:e.useDefaultProjects&&"false"!==e.useDefaultProjects,onChange:e.onUseDefaultProjectsChange,"aria-label":"Use default projects"}))));return r.a.createElement(r.a.Fragment,null,e.mobile?t:r.a.createElement(D.a,{container:!0,justify:"space-between"},t),r.a.createElement(l.a,{className:"projectsTable"},r.a.createElement(p.a,null,r.a.createElement(h.a,null,r.a.createElement(f.a,null),r.a.createElement(f.a,null,"Name"),r.a.createElement(f.a,null,"Duration"),!e.mobile&&r.a.createElement(f.a,null,"Days"),r.a.createElement(f.a,null))),r.a.createElement(v.a,{onDragEnd:e.onDragEnd},r.a.createElement(v.c,{droppableId:"0"},function(t){return r.a.createElement(E.a,{rootRef:t.innerRef},r.a.createElement(d.a,t.droppableProps,!e.projects.length&&r.a.createElement(h.a,null,r.a.createElement(f.a,null),r.a.createElement(f.a,{colSpan:e.mobile?2:3},"You haven't set any repetitive projects yet"),r.a.createElement(f.a,null)),e.projects.map(function(t,a){return r.a.createElement(v.b,{key:t.id,draggableId:t.id.toString(),index:a},function(a){return r.a.createElement(s.a,{mode:"planning",row:t,currentTime:e.currentTime,provided:a,onColorChange:e.onColorChange,onDoneEditing:e.onDoneEditing,onProjectStateChange:e.onProjectStateChange,onDeleteProject:e.onDeleteProject,isDefaultProjects:!0,startEditingMobile:e.startEditingMobile})})}),t.placeholder,!e.mobile&&r.a.createElement(o.a,{settings:e.settings,defaultColorIndex:e.defaultColorIndex,showErrors:{},lastProject:e.projects[e.projects.length-1],onAddProject:e.onAddProject,type:"default"})))}))),!e.mobile&&r.a.createElement(D.a,{container:!0,justify:"center"},r.a.createElement(y.a,{onClick:e.onClose,variant:"contained",color:"primary",style:{margin:".5rem"}},"Save")))}},951:function(e,t,a){},982:function(e,t,a){},987:function(e,t,a){}}]);
//# sourceMappingURL=8.00323aa9.chunk.js.map